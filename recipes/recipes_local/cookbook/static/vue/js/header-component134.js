"use strict";(self["webpackChunktandoor"]=self["webpackChunktandoor"]||[]).push([[7071],{23062:function(t,e,a){a.r(e),a.d(e,{default:function(){return f}});var s=function(){var t=this,e=t._self._c;return e("div",[e("b-alert",{attrs:{show:"",variant:"danger"}},[t._v(" The API is made for developers to interact with the application. It is possible to break things using the API so be careful and create a backup first. The API definition can and will change in the future, make sure to read the changelog to spot changes early on. "),e("b-button-toolbar",[e("b-button-group",{staticClass:"mx-1"},[e("a",{staticClass:"btn btn-info",attrs:{href:t.resolveDjangoUrl("docs_api"),target:"_blank",rel:"noreferrer nofollow"}},[t._v("Docs")])]),e("b-button-group",{staticClass:"mx-1"},[e("a",{staticClass:"btn btn-success",attrs:{href:t.resolveDjangoUrl("api:api-root"),target:"_blank",rel:"noreferrer nofollow"}},[t._v("Interactive API Browser")])])],1)],1),t._v(" Authentication works by proving the word "),e("code",[t._v("Bearer")]),t._v(" followed by an API Token as a request Authorization header as shown below. "),e("br"),e("code",[t._v("Authorization: Bearer TOKEN")]),t._v(" -or-"),e("br"),e("code",[t._v("curl -X GET http://your.domain.com/api/recipes/ -H 'Authorization: Bearer TOKEN'")]),e("br"),e("br"),t._v(" You can have multiple tokens and each token can have its own scope. Currently there is "),e("code",[t._v("read")]),t._v(", "),e("code",[t._v("write")]),t._v(" and "),e("code",[t._v("bookmarklet")]),t._v(". Read and write do what the name says, the bookmarklet scope is only used for the bookmarklet to limit access to it. "),e("b-alert",{attrs:{show:"",variant:"info"}},[t._v("Make sure to save your token after creation as they cannot be viewed afterwards. ")]),e("b-list-group",{staticClass:"mt-3"},t._l(t.access_tokens,(function(a){return e("b-list-group-item",{key:a.id},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-9"},[t._v(" "+t._s(a.token)),e("br"),e("small",[e("span",{staticClass:"text-muted"},[t._v("Scope:")]),t._v(" "),e("code",[t._v(t._s(a.scope))]),t._v(" "),e("span",{staticClass:"text-muted"},[t._v("Expires:")]),t._v(" "+t._s(t.formatDate(a.expires))+" ")])]),e("div",{staticClass:"col-3"},[e("b-button-group",[e("b-button",{attrs:{variant:"primary"},on:{click:function(e){t.active_token=a,t.generic_action=t.Actions.UPDATE}}},[e("i",{staticClass:"far fa-edit"})]),e("b-button",{attrs:{variant:"danger"},on:{click:function(e){t.active_token=a,t.generic_action=t.Actions.DELETE}}},[e("i",{staticClass:"fas fa-trash-alt"})])],1)],1)])])})),1),e("b-button",{staticClass:"mt-1",attrs:{variant:"success"},on:{click:function(e){t.generic_action=t.Actions.CREATE}}},[t._v(t._s(t.$t("New")))]),e("generic-modal-form",{attrs:{model:t.Models.ACCESS_TOKEN,action:t.generic_action,show:null!==t.generic_action,item1:t.active_token},on:{"finish-action":t.updateToken}})],1)},o=[],n=(a(57658),a(6955)),i=a(49665),r=a(5121),c=a(45871),l=a(30381),u=a.n(l);r.Z.defaults.xsrfCookieName="csrftoken",r.Z.defaults.xsrfHeaderName="X-CSRFTOKEN";var d={name:"APISettingsComponent",components:{GenericModalForm:c["default"]},mixins:[i.ApiMixin,i.ResolveUrlMixin],props:{user_id:Number},data(){return{access_tokens:[],active_token:null,generic_action:null}},mounted(){this.user_preferences=this.preferences,this.languages=window.AVAILABLE_LANGUAGES,this.loadTokens()},methods:{formatDate:function(t){return u().locale(window.navigator.language),u()(t).format("L")},loadTokens:function(){let t=new n.ApiApiFactory;t.listAccessTokens().then((t=>{this.access_tokens=t.data})).catch((t=>{i.StandardToasts.makeStandardToast(this,i.StandardToasts.FAIL_FETCH,t)}))},updateToken:function(t){"cancel"!==t&&(this.generic_action===this.Actions.UPDATE?this.access_tokens[this.access_tokens.indexOf(this.active_token)]=t.item:this.generic_action===this.Actions.CREATE?this.access_tokens.push(t.item):this.generic_action===this.Actions.DELETE&&this.access_tokens.splice(this.access_tokens.indexOf(this.active_token),1)),this.generic_action=null}}},_=d,h=a(1001),v=(0,h.Z)(_,s,o,!1,null,"61d4e7d2",null),f=v.exports}}]);