(self["webpackChunktandoor"]=self["webpackChunktandoor"]||[]).push([[2446,762,4493,1875,607,479,3933,2936],{68697:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return _}});var s=function(){var e=this,t=e._self._c;return t("div",[t(e.compiled,{tag:"component",attrs:{ingredient_factor:e.ingredient_factor,code:e.code}})],1)},n=[],a=i(70538),r=i(96059),l={name:"CompileComponent",props:["code","ingredient_factor"],data(){return{compiled:null}},mounted(){this.compiled=a["default"].component("compiled-component",{props:["ingredient_factor","code"],components:{ScalableNumber:r["default"]},template:`<div>${this.code}</div>`})}},o=l,c=i(1001),d=(0,c.Z)(o,s,n,!1,null,null,null),_=d.exports},40841:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return u}});var s=function(){var e=this,t=e._self._c;return t("tr",{staticClass:"ingredients__item"},[e.ingredient.is_header?[t("td",{staticClass:"ingredients__header-note header",attrs:{colspan:"5"},on:{click:e.done}},[t("b",[e._v(e._s(e.ingredient.note))])])]:[e.detailed?t("td",{staticClass:"ingredients__check d-print-none align-baseline py-2",on:{click:e.done}},[e.ingredient.checked?t("i",{staticClass:"ingredients__check ingredients__check_checked far fa-check-circle text-success"}):e._e(),e.ingredient.checked?e._e():t("i",{staticClass:"ingredients__check ingredients__check_checked_false far fa-check-circle text-primary"})]):e._e(),t("td",{staticClass:"ingredients__amount text-nowrap",on:{click:e.done}},[0===e.ingredient.amount||e.ingredient.no_amount?e._e():t("span",{staticClass:"ingredients__amount",class:e.amountClass,domProps:{innerHTML:e._s(e.amount)}})]),t("td",{staticClass:"ingredients__unit",on:{click:e.done}},[null===e.ingredient.unit||e.ingredient.no_amount?e._e():t("span",{class:e.unitClass},[e._v(e._s(e.unitName))])]),t("td",{staticClass:"ingredients__food",class:e.foodClass,on:{click:e.done}},[null!==e.ingredient.food?[null!==e.ingredient.food.recipe?t("a",{attrs:{href:e.resolveDjangoUrl("view_recipe",e.ingredient.food.recipe.id),target:"_blank",rel:"noopener noreferrer"}},[e._v(" "+e._s(e.foodName)+" ")]):""!==e.ingredient.food.url?t("a",{attrs:{href:e.ingredient.food.url,target:"_blank",rel:"noopener noreferrer"}},[e._v(" "+e._s(e.foodName))]):[t("span",{class:e.foodClass},[e._v(e._s(e.foodName))])]]:e._e()],2),e.detailed?t("td",{staticClass:"ingredients__note align-baseline"},[e.ingredient.note?[t("span",{directives:[{name:"b-popover",rawName:"v-b-popover.hover",value:e.ingredient.note,expression:"ingredient.note",modifiers:{hover:!0}}],staticClass:"ingredients__note ingredients__note_hover d-print-none touchable py-0 px-2"},[t("i",{staticClass:"far fa-comment"})]),t("div",{staticClass:"ingredients__note ingredients__note_print d-none d-print-block"},[t("i",{staticClass:"far fa-comment-alt d-print-none"}),e._v(" "+e._s(e.ingredient.note))])]:e._e()],2):e._e()]],2)},n=[],a=i(49665),r=i(70538),l=i(65284),o=i.n(l);r["default"].use(o());var c={name:"IngredientComponent",props:{ingredient:Object,ingredient_factor:{type:Number,default:1},detailed:{type:Boolean,default:!0}},mixins:[a.ResolveUrlMixin,a.EscapeCSSMixin],data(){return{checked:!1}},watch:{},mounted(){},computed:{amount:function(){return this.$sanitize((0,a.calculateAmount)(this.ingredient.amount,this.ingredient_factor))},isScaledUp:function(){return this.ingredient_factor>1},isScaledDown:function(){return this.ingredient_factor<1},amountClass:function(){return this.isScaledDown?this.escapeCSS("ingredients__amount_scaled_down"):this.isScaledUp?this.escapeCSS("ingredients__amount_scaled_up"):this.escapeCSS("ingredients__amount_scaled_false")},isUnitPlural:function(){return""!==this.ingredient.unit.plural_name&&null!==this.ingredient.unit.plural_name&&!!(this.ingredient.always_use_plural_unit||this.ingredient.amount*this.ingredient_factor>1)},isFoodPlural:function(){return null!=this.ingredient.food.plural_name&&""!==this.ingredient.food.plural_name&&(!!this.ingredient.always_use_plural_food||!this.ingredient.no_amount&&this.ingredient.amount*this.ingredient_factor>1)},unitClass:function(){return this.escapeCSS("_unitname-"+this.ingredient.unit.name)},foodClass:function(){return this.escapeCSS("_foodname-"+this.ingredient.food.name)},unitName:function(){return this.isUnitPlural?this.ingredient.unit.plural_name:this.ingredient.unit.name},foodName:function(){return this.isFoodPlural?this.ingredient.food.plural_name:this.ingredient.food.name}},methods:{done:function(){this.$emit("checked-state-changed",this.ingredient)}}},d=c,_=i(1001),p=(0,_.Z)(d,s,n,!1,null,"5ac4dfea",null),u=p.exports},91515:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return u}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ingredients",class:{"card border-primary no-border":e.header}},[t("div",{class:{"card-body":e.header,"p-0":e.header}},[e.header?t("div",{staticClass:"card-header"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-6"},[t("h4",{staticClass:"card-title"},[t("i",{staticClass:"fas fa-pepper-hot"}),e._v(" "+e._s(e.$t("Ingredients")))])])])]):e._e(),t("div",{staticClass:"card-body p-1 p-md-3"},[t("div",{staticClass:"row no-gutter"},[t("div",{staticClass:"col-12 m-0",class:{"p-0":!e.header}},[t("table",{staticClass:"table table-sm mb-0"},[e._l(e.steps,(function(i){return[i.show_as_header&&""!==i.name&&e.steps.length>1?t("tr",{key:i.id,staticClass:"ingredients__header-step-name"},[t("td",{attrs:{colspan:"5"}},[t("b",[e._v(e._s(i.name))])])]):e._e(),e._l(i.ingredients,(function(i){return[t("ingredient-component",{key:i.id,attrs:{ingredient:i,ingredient_factor:e.ingredient_factor,detailed:e.detailed},on:{"checked-state-changed":function(t){return e.$emit("checked-state-changed",t)}}})]}))]}))],2)])])])])])},n=[],a=i(70538),r=i(12120),l=(i(57024),i(40841)),o=i(49665);a["default"].use(r.XG7);var c={name:"IngredientCard",mixins:[o.ApiMixin],components:{IngredientComponent:l["default"]},props:{steps:{type:Array,default(){return[]}},recipe:{type:Number},ingredient_factor:{type:Number,default:1},servings:{type:Number,default:1},detailed:{type:Boolean,default:!0},header:{type:Boolean,default:!1},recipe_list:{type:Number,default:void 0}},data(){return{}},computed:{},watch:{},mounted(){},methods:{}},d=c,_=i(1001),p=(0,_.Z)(d,s,n,!1,null,null,null),u=p.exports},96059:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return d}});var s=function(){var e=this,t=e._self._c;return t("span",{staticClass:"step__scalable-num",class:[1===this.factor?"step__scalable-num_scaled_false":this.factor>1?"step__scalable-num_scaled_up":"step__scalable-num_scaled_down"],domProps:{innerHTML:e._s(e.calculateAmount(e.number))}})},n=[],a=i(49665),r={name:"ScalableNumber",props:{number:Number,factor:{type:Number,default:4}},methods:{calculateAmount:function(e){return(0,a.calculateAmount)(e,this.factor)}}},l=r,o=i(1001),c=(0,o.Z)(l,s,n,!1,null,null,null),d=c.exports},94190:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return f}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"step",class:e.stepClassName},[t("hr"),e.recipe.steps.length>1?t("div",{staticClass:"row mb-1"},[t("div",{staticClass:"col col-md-8"},[t("h5",{staticClass:"step__name text-primary",class:e.stepClassNameType},[e._v(" "+e._s(e.step_name)+" "),0!==e.step.time?t("small",{staticClass:"step__time text-muted",staticStyle:{"margin-left":"4px"}},[t("i",{staticClass:"fas fa-user-clock"}),e._v(" "+e._s(e.step_time))]):e._e(),""!==e.start_time?t("small",{staticClass:"step__start-time d-print-none"},[t("b-link",{attrs:{id:`id_reactive_popover_${e.step.id}`,href:"#"},on:{click:e.openPopover}},[e._v(" "+e._s(e.moment(e.start_time).add(e.step.time_offset,"minutes").format("HH:mm"))+" ")])],1):e._e()])]),t("div",{staticClass:"col col-md-4 text-right"},[t("b-button",{staticClass:"shadow-none d-print-none step__button-collapse",class:{"step__button-collapse_visible text-primary":e.details_visible,"step_button-collapse_visible_false text-success":!e.details_visible},staticStyle:{border:"none",background:"none"},on:{click:function(t){e.details_visible=!e.details_visible}}},[t("i",{staticClass:"far fa-check-circle"})])],1)]):e._e(),t("b-collapse",{staticClass:"step__details",class:[e.details_visible?"step__details_visible":"step__details_visible_false"],attrs:{id:"collapse-1"},model:{value:e.details_visible,callback:function(t){e.details_visible=t},expression:"details_visible"}},[t("div",{staticClass:"row"},[e.step.show_ingredients_table&&e.step.ingredients.length>0&&(e.recipe.steps.length>1||e.force_ingredients)?t("div",{staticClass:"step__ingredients col col-md-4"},[t("table",{staticClass:"table table-sm"},[t("ingredients-card",{attrs:{steps:[e.step],ingredient_factor:e.ingredient_factor},on:{"checked-state-changed":function(t){return e.$emit("checked-state-changed",t)}}})],1)]):e._e(),t("div",{staticClass:"step__instructions col",class:{"col-md-8 col-12":e.recipe.steps.length>1,"col-md-12 col-12":e.recipe.steps.length<=1}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col col-md-12"},[t("compile-component",{attrs:{code:e.step.instructions_markdown,ingredient_factor:e.ingredient_factor}})],1)]),null!==e.step.file?t("div",{staticClass:"step__file row"},[t("div",{staticClass:"col col-md-12"},[[""!==e.step.file.preview?t("div",[t("b-img",{attrs:{src:e.step.file.preview,"fluid-grow":""}})],1):t("div",[t("a",{attrs:{href:e.step.file.file_download,target:"_blank",rel:"noreferrer nofollow"}},[e._v(e._s(e.$t("Download"))+" "+e._s(e.$t("File")))])])]],2)]):e._e()])]),t("div",{staticClass:"step__subrecipe row"},[t("div",{staticClass:"col col-md-12"},[null!==e.step.step_recipe_data?t("div",{staticClass:"card"},[t("b-collapse",{class:[e.details_visible?"step__details_visible":"step__details_visible_false"],attrs:{id:"collapse-1"},model:{value:e.details_visible,callback:function(t){e.details_visible=t},expression:"details_visible"}},[t("div",{staticClass:"card-body"},[t("h2",{staticClass:"card-title"},[t("a",{attrs:{href:e.resolveDjangoUrl("view_recipe",e.step.step_recipe_data.id)}},[e._v(e._s(e.step.step_recipe_data.name))])]),e._l(e.step.step_recipe_data.steps,(function(i,s){return t("div",{key:`substep_${i.id}`},[t("step-component",{attrs:{recipe:e.step.step_recipe_data,step:i,ingredient_factor:e.ingredient_factor,index:s,start_time:e.start_time,force_ingredients:!0}})],1)}))],2)])],1):e._e()])])]),""!==e.start_time?t("div",[t("b-popover",{ref:`id_reactive_popover_${e.step.id}`,attrs:{target:`id_reactive_popover_${e.step.id}`,triggers:"click",placement:"bottom",title:e.$t("Step start time")}},[t("div",[t("b-form-group",{staticClass:"mb-1",attrs:{label:"Time","label-for":"popover-input-1","label-cols":"3"}},[t("b-form-input",{attrs:{type:"datetime-local",id:"popover-input-1",size:"sm"},model:{value:e.set_time_input,callback:function(t){e.set_time_input=t},expression:"set_time_input"}})],1)],1),t("div",{staticClass:"row",staticStyle:{"margin-top":"1vh"}},[t("div",{staticClass:"col-12",staticStyle:{"text-align":"right"}},[t("b-button",{staticStyle:{"margin-right":"8px"},attrs:{size:"sm",variant:"secondary"},on:{click:e.closePopover}},[e._v(" "+e._s(e.$t("Cancel"))+" ")]),t("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:e.updateTime}},[e._v(e._s(e.$t("Ok")))])],1)])])],1):e._e()],1)},n=[],a=i(49665),r=i(68697),l=i(91515),o=i(70538),c=i(30381),d=i.n(c);o["default"].prototype.moment=d();var _={name:"StepComponent",mixins:[a.GettextMixin,a.ResolveUrlMixin,a.EscapeCSSMixin],components:{CompileComponent:r["default"],IngredientsCard:l["default"]},props:{step:Object,ingredient_factor:Number,index:Number,recipe:Object,start_time:String,force_ingredients:{type:Boolean,default:!1}},computed:{step_time:function(){return(0,a.calculateHourMinuteSplit)(this.step.time)},step_name:function(){return this.step.name?this.step.name:this.$t("Step")+" "+String(this.index+1)},stepClassName:function(){let e={};const t=this.escapeCSS("_stepname-"+this.step_name);return e[t]=!!this.step.name,e["_stepname-"+String(this.index+1)]=!this.step.name,e},stepClassNameType:function(){let e={};return e["step__name_custom"]=!!this.step.name,e["step__name_custom_false"]=!this.step.name,e}},data(){return{details_visible:!0,set_time_input:""}},mounted(){this.set_time_input=d()(this.start_time).add(this.step.time_offset,"minutes").format("yyyy-MM-DDTHH:mm")},methods:{calculateAmount:function(e){return(0,a.calculateAmount)(e,this.ingredient_factor)},updateTime:function(){let e=d()(this.set_time_input).add(-1*this.step.time_offset,"minutes").format("yyyy-MM-DDTHH:mm");this.$emit("update-start-time",e),this.closePopover()},closePopover:function(){this.$refs[`id_reactive_popover_${this.step.id}`].$emit("close")},openPopover:function(){this.$refs[`id_reactive_popover_${this.step.id}`].$emit("open")}}},p=_,u=i(1001),m=(0,u.Z)(p,s,n,!1,null,null,null),f=m.exports},22868:function(){},14777:function(){},99830:function(){},70209:function(){},87414:function(){}}]);