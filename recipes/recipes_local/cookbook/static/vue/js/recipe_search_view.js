(function(){var e={89271:function(e,t,a){"use strict";a.d(t,{s:function(){return i},x:function(){return s}});var i=function(){var e=this,t=e._self._c;return t("multiselect",{attrs:{id:e.id,options:e.objects,"close-on-select":!0,"clear-on-select":!0,"hide-selected":e.multiple,"preserve-search":!0,"internal-search":!1,limit:e.limit,placeholder:e.lookupPlaceholder,label:e.label,"track-by":"id",multiple:e.multiple,taggable:e.allow_create,"tag-placeholder":e.create_placeholder,loading:e.loading,disabled:e.disabled},on:{"search-change":e.search,input:e.selectionChanged,tag:e.addNew,open:function(t){return e.selectOpened()}},model:{value:e.selected_objects,callback:function(t){e.selected_objects=t},expression:"selected_objects"}})},s=[]},80383:function(e,t,a){"use strict";a.d(t,{s:function(){return i},x:function(){return s}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"row"},[t("div",{staticClass:"col",staticStyle:{"text-align":"center"}},[t("img",{staticClass:"spinner-tandoor",style:{height:e.size+"vh"},attrs:{alt:"loading spinner",src:""}})])])},s=[]},9946:function(e,t,a){"use strict";var i=a(70538),s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"search",staticStyle:{"padding-bottom":"60px"},attrs:{id:"app"}},[t("RecipeSwitcher",{ref:"ref_recipe_switcher"}),t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 col-xl-10 col-lg-10 offset-xl-1 offset-lg-1"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col col-md-12"},[t("div",{staticClass:"row justify-content-center"},[t("div",{staticClass:"col-12 col-lg-10 col-xl-10 mt-2"},[t("b-input-group",[t("b-input",{staticClass:"form-control form-control-lg form-control-borderless form-control-search",attrs:{placeholder:e.$t("Search")},model:{value:e.search.search_input,callback:function(t){e.$set(e.search,"search_input",t)},expression:"search.search_input"}}),t("b-input-group-append",[e.debug&&e.ui.sql_debug?t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:e.$t("show_sql")},on:{click:function(t){return e.showSQL()}}},[t("i",{staticClass:"fas fa-bug",staticStyle:{"font-size":"1.5em"}})]):e._e(),t("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse_advanced_search",modifiers:{collapse_advanced_search:!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:e.$t("advanced_search_settings"),variant:e.searchFiltered(!0)?"danger":"primary"}},[t("i",{staticClass:"fas fa-sliders-h"})])],1)],1)],1)]),t("b-collapse",{staticClass:"mt-2 shadow-sm",attrs:{id:"collapse_advanced_search"},model:{value:e.search.advanced_search_visible,callback:function(t){e.$set(e.search,"advanced_search_visible",t)},expression:"search.advanced_search_visible"}},[t("div",{staticClass:"card"},[t("div",{staticClass:"card-body p-4"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3 col-6 mb-1 mb-md-0"},[t("a",{staticClass:"btn btn-primary btn-block text-uppercase",attrs:{href:e.resolveDjangoUrl("new_recipe")}},[e._v(e._s(e.$t("New_Recipe")))])]),t("div",{staticClass:"col-md-3 col-6 mb-1 mb-md-0"},[t("a",{staticClass:"btn btn-primary btn-block text-uppercase",attrs:{href:e.resolveDjangoUrl("data_import_url")}},[e._v(e._s(e.$t("Import")))])]),t("div",{staticClass:"col-md-3 col-6 mb-1 mb-md-0"},[t("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"btn btn-block text-uppercase",class:{"btn-success":e.search.search_internal,"btn-primary":!e.search.search_internal},attrs:{title:e.$t("show_only_internal")},on:{click:function(t){e.search.search_internal=!e.search.search_internal,e.refreshData()}}},[e._v(" "+e._s(e.$t("Internal"))+" ")])]),t("div",{staticClass:"col-md-3 col-6 mb-1 mb-md-0"},[t("button",{staticClass:"btn btn-primary btn-block text-uppercase",attrs:{id:"id_settings_button"}},[t("i",{staticClass:"fas fa-cog fa-lg m-1"})])])]),t("b-popover",{attrs:{target:"id_settings_button",triggers:"click",placement:"bottom"}},[t("b-tabs",{attrs:{"content-class":"mt-1 text-nowrap",small:""}},[t("b-tab",{attrs:{title:e.$t("Settings"),active:"","title-link-class":["mx-0"]}},[t("b-form-group",{staticClass:"mb-1",attrs:{label:e.$t("Recently_Viewed"),"label-for":"popover-input-1","label-cols":"8"}},[t("b-form-input",{staticClass:"mt-1",attrs:{type:"number",id:"popover-input-1",size:"sm"},model:{value:e.ui.recently_viewed,callback:function(t){e.$set(e.ui,"recently_viewed",t)},expression:"ui.recently_viewed"}})],1),t("b-form-group",{staticClass:"mb-1",attrs:{label:e.$t("Recipes_per_page"),"label-for":"popover-input-page-count","label-cols":"8"}},[t("b-form-input",{staticClass:"mt-1",attrs:{type:"number",id:"popover-input-page-count",size:"sm"},model:{value:e.ui.page_size,callback:function(t){e.$set(e.ui,"page_size",t)},expression:"ui.page_size"}})],1),t("b-form-group",{staticClass:"mb-1",attrs:{label:e.$t("Meal_Plan"),"label-for":"popover-input-2","label-cols":"8"}},[t("b-form-checkbox",{staticClass:"mt-2",attrs:{switch:"",id:"popover-input-2",size:"sm"},model:{value:e.ui.show_meal_plan,callback:function(t){e.$set(e.ui,"show_meal_plan",t)},expression:"ui.show_meal_plan"}})],1),e.ui.show_meal_plan?t("b-form-group",{staticClass:"mb-1",attrs:{label:e.$t("Meal_Plan_Days"),"label-for":"popover-input-5","label-cols":"8"}},[t("b-form-input",{staticClass:"mt-1",attrs:{type:"number",id:"popover-input-5",size:"sm"},model:{value:e.ui.meal_plan_days,callback:function(t){e.$set(e.ui,"meal_plan_days",e._n(t))},expression:"ui.meal_plan_days"}})],1):e._e(),t("b-form-group",{staticClass:"mb-1",attrs:{label:e.$t("Sort_by_new"),"label-for":"popover-input-3","label-cols":"8"}},[t("b-form-checkbox",{staticClass:"mt-2",attrs:{switch:"",id:"popover-input-3",size:"sm"},model:{value:e.ui.sort_by_new,callback:function(t){e.$set(e.ui,"sort_by_new",t)},expression:"ui.sort_by_new"}})],1),t("div",{staticClass:"row",staticStyle:{"margin-top":"1vh"}},[t("div",{staticClass:"col-12"},[t("a",{attrs:{href:e.resolveDjangoUrl("view_settings")+"#search"}},[e._v(e._s(e.$t("Search Settings")))])])])],1),t("b-tab",{attrs:{title:e.$t("fields"),"title-link-class":["mx-0"]}},[t("b-form-group",{staticClass:"mb-1",attrs:{label:e.$t("show_keywords"),"label-for":"popover-show_keywords","label-cols":"8"}},[t("b-form-checkbox",{staticClass:"mt-2",attrs:{switch:"",id:"popover-show_keywords",size:"sm"},model:{value:e.ui.show_keywords,callback:function(t){e.$set(e.ui,"show_keywords",t)},expression:"ui.show_keywords"}})],1),t("b-form-group",{staticClass:"mb-1",attrs:{label:e.$t("show_foods"),"label-for":"popover-show_foods","label-cols":"8"}},[t("b-form-checkbox",{staticClass:"mt-2",attrs:{switch:"",id:"popover-show_foods",size:"sm"},model:{value:e.ui.show_foods,callback:function(t){e.$set(e.ui,"show_foods",t)},expression:"ui.show_foods"}})],1),t("b-form-group",{staticClass:"mb-1",attrs:{label:e.$t("show_books"),"label-for":"popover-input-show_books","label-cols":"8"}},[t("b-form-checkbox",{staticClass:"mt-2",attrs:{switch:"",id:"popover-input-show_books",size:"sm"},model:{value:e.ui.show_books,callback:function(t){e.$set(e.ui,"show_books",t)},expression:"ui.show_books"}})],1),t("b-form-group",{staticClass:"mb-1",attrs:{label:e.$t("show_rating"),"label-for":"popover-show_rating","label-cols":"8"}},[t("b-form-checkbox",{staticClass:"mt-2",attrs:{switch:"",id:"popover-show_rating",size:"sm"},model:{value:e.ui.show_rating,callback:function(t){e.$set(e.ui,"show_rating",t)},expression:"ui.show_rating"}})],1),t("b-form-group",{staticClass:"mb-1",attrs:{label:e.$t("show_units"),"label-for":"popover-show_units","label-cols":"8"}},[t("b-form-checkbox",{staticClass:"mt-2",attrs:{switch:"",id:"popover-show_units",size:"sm"},model:{value:e.ui.show_units,callback:function(t){e.$set(e.ui,"show_units",t)},expression:"ui.show_units"}})],1),t("b-form-group",{staticClass:"mb-1",attrs:{label:e.$t("show_filters"),"label-for":"popover-show_filters","label-cols":"8"}},[t("b-form-checkbox",{staticClass:"mt-2",attrs:{switch:"",id:"popover-show_filters",size:"sm"},model:{value:e.ui.show_filters,callback:function(t){e.$set(e.ui,"show_filters",t)},expression:"ui.show_filters"}})],1),t("b-form-group",{staticClass:"mb-1",attrs:{label:e.$t("show_sortby"),"label-for":"popover-show_sortby","label-cols":"8"}},[t("b-form-checkbox",{staticClass:"mt-2",attrs:{switch:"",id:"popover-show_sortby",size:"sm"},model:{value:e.ui.show_sortby,callback:function(t){e.$set(e.ui,"show_sortby",t)},expression:"ui.show_sortby"}})],1),t("b-form-group",{staticClass:"mb-1",attrs:{label:e.$t("times_cooked"),"label-for":"popover-show_timescooked","label-cols":"8"}},[t("b-form-checkbox",{staticClass:"mt-2",attrs:{switch:"",id:"popover-show_cooked",size:"sm"},model:{value:e.ui.show_timescooked,callback:function(t){e.$set(e.ui,"show_timescooked",t)},expression:"ui.show_timescooked"}})],1),t("b-form-group",{staticClass:"mb-1",attrs:{label:e.$t("make_now"),"label-for":"popover-show_makenow","label-cols":"8"}},[t("b-form-checkbox",{staticClass:"mt-2",attrs:{switch:"",id:"popover-show_makenow",size:"sm"},model:{value:e.ui.show_makenow,callback:function(t){e.$set(e.ui,"show_makenow",t)},expression:"ui.show_makenow"}})],1),t("b-form-group",{staticClass:"mb-1",attrs:{label:e.$t("last_cooked"),"label-for":"popover-show_cookedon","label-cols":"8"}},[t("b-form-checkbox",{staticClass:"mt-2",attrs:{switch:"",id:"popover-show_cookedon",size:"sm"},model:{value:e.ui.show_cookedon,callback:function(t){e.$set(e.ui,"show_cookedon",t)},expression:"ui.show_cookedon"}})],1),t("b-form-group",{staticClass:"mb-1",attrs:{label:e.$t("last_viewed"),"label-for":"popover-show_viewedon","label-cols":"8"}},[t("b-form-checkbox",{staticClass:"mt-2",attrs:{switch:"",id:"popover-show_viewedon",size:"sm"},model:{value:e.ui.show_viewedon,callback:function(t){e.$set(e.ui,"show_viewedon",t)},expression:"ui.show_viewedon"}})],1),t("b-form-group",{staticClass:"mb-1",attrs:{label:e.$t("created_on"),"label-for":"popover-show_createdon","label-cols":"8"}},[t("b-form-checkbox",{staticClass:"mt-2",attrs:{switch:"",id:"popover-show_createdon",size:"sm"},model:{value:e.ui.show_createdon,callback:function(t){e.$set(e.ui,"show_createdon",t)},expression:"ui.show_createdon"}})],1),t("b-form-group",{staticClass:"mb-1",attrs:{label:e.$t("updatedon"),"label-for":"popover-show_updatedon","label-cols":"8"}},[t("b-form-checkbox",{staticClass:"mt-2",attrs:{switch:"",id:"popover-show_updatedon",size:"sm"},model:{value:e.ui.show_updatedon,callback:function(t){e.$set(e.ui,"show_updatedon",t)},expression:"ui.show_updatedon"}})],1)],1),t("b-tab",{attrs:{title:e.$t("advanced"),"title-link-class":["mx-0"]}},[t("b-form-group",{staticClass:"mb-1",attrs:{label:e.$t("remember_search"),"label-for":"popover-rem-search","label-cols":"8"}},[t("b-form-checkbox",{staticClass:"mt-2",attrs:{switch:"",id:"popover-rem-search",size:"sm"},model:{value:e.ui.remember_search,callback:function(t){e.$set(e.ui,"remember_search",t)},expression:"ui.remember_search"}})],1),e.ui.remember_search?t("b-form-group",{staticClass:"mb-1",attrs:{label:e.$t("remember_hours"),"label-for":"popover-input-rem-hours","label-cols":"8"}},[t("b-form-input",{staticClass:"mt-1",attrs:{type:"number",id:"popover-rem-hours",size:"sm"},model:{value:e.ui.remember_hours,callback:function(t){e.$set(e.ui,"remember_hours",t)},expression:"ui.remember_hours"}})],1):e._e(),e.debug?t("b-form-group",{staticClass:"mb-1",attrs:{label:e.$t("sql_debug"),"label-for":"popover-input-sqldebug","label-cols":"8"}},[t("b-form-checkbox",{staticClass:"mt-2",attrs:{switch:"",id:"popover-input-sqldebug",size:"sm"},model:{value:e.ui.sql_debug,callback:function(t){e.$set(e.ui,"sql_debug",t)},expression:"ui.sql_debug"}})],1):e._e()],1)],1),t("div",{staticClass:"row",staticStyle:{"margin-top":"1vh"}},[t("div",{staticClass:"col-12",staticStyle:{"text-align":"right"}},[t("b-button",{staticStyle:{"margin-right":"8px"},attrs:{size:"sm",variant:"secondary"},on:{click:function(t){return e.$root.$emit("bv::hide::popover")}}},[e._v(e._s(e.$t("Close"))+" ")])],1)])],1),e.ui.show_filters||e.ui.show_sortby?t("div",{staticClass:"row"},[t("div",{staticClass:"col-12"},[t("b-input-group",{staticClass:"mt-2"},[e.ui.show_filters?t("generic-multiselect",{staticStyle:{"flex-grow":"1","flex-shrink":"1","flex-basis":"0"},attrs:{parent_variable:"search_filter",initial_single_selection:e.search.search_filter,model:e.Models.CUSTOM_FILTER,placeholder:e.$t("Custom Filter"),multiple:!1,limit:50},on:{change:e.genericSelectChanged}}):e._e(),e.ui.show_sortby?t("multiselect",{staticStyle:{"flex-grow":"1","flex-shrink":"1","flex-basis":"0"},attrs:{options:e.sortOptions,multiple:!0,"hide-selected":!0,"internal-search":!1,label:"text","track-by":"id",placeholder:e.$t("sort_by")},on:{input:function(t){return e.refreshData(!1)}},model:{value:e.search.sort_order,callback:function(t){e.$set(e.search,"sort_order",t)},expression:"search.sort_order"}}):e._e()],1)],1)]):e._e(),e.ui.expert_mode&&e.search.keywords_fields>1?t("h6",{staticClass:"mb-0"},[e._v(" "+e._s(e.$t("Keywords"))+" ")]):e._e(),e.ui.expert_mode&&e.search.keywords_fields>1&&e.hasDuplicateFilter(e.search.search_keywords,e.search.keywords_fields)?t("span",{staticClass:"text-sm-left text-warning"},[e._v(e._s(e.$t("warning_duplicate_filter")))]):e._e(),e.ui.show_keywords?t("div",{staticClass:"row"},[t("div",{staticClass:"col-12"},e._l(e.keywordFields,(function(a,i){return t("b-input-group",{key:i,staticClass:"mt-2",scopedSlots:e._u([e.ui.expert_mode?{key:"prepend",fn:function(){return[t("b-input-group-text",{staticStyle:{width:"3em"},on:{click:function(t){return e.addField("keywords",a)}}},[a==e.search.keywords_fields&&a<4?t("i",{staticClass:"fas fa-plus-circle text-primary"}):e._e()]),t("b-input-group-text",{staticStyle:{width:"3em"},on:{click:function(t){return e.removeField("keywords",a)}}},[a==e.search.keywords_fields&&a>1?t("i",{staticClass:"fas fa-minus-circle text-primary"}):e._e()])]},proxy:!0}:null],null,!0)},[e.ui.tree_select?e._e():t("generic-multiselect",{staticStyle:{"flex-grow":"1","flex-shrink":"1","flex-basis":"0"},attrs:{parent_variable:`search_keywords::${i}`,initial_selection:e.search.search_keywords[i].items,model:e.Models.KEYWORD,placeholder:e.$t("Keywords"),limit:50},on:{change:e.genericSelectChanged}}),t("b-input-group-append",[t("b-input-group-text",[t("b-form-checkbox",{staticClass:"shadow-none",staticStyle:{width:"5em"},attrs:{name:"check-button",switch:""},on:{change:function(t){return e.refreshData(!1)}},model:{value:e.search.search_keywords[i].operator,callback:function(t){e.$set(e.search.search_keywords[i],"operator",t)},expression:"search.search_keywords[a].operator"}},[e.search.search_keywords[i].operator?t("span",{staticClass:"text-uppercase"},[e._v(e._s(e.$t("or")))]):t("span",{staticClass:"text-uppercase"},[e._v(e._s(e.$t("and")))])])],1)],1),e.ui.expert_mode?t("b-input-group-append",[t("b-input-group-text",[t("b-form-checkbox",{staticClass:"shadow-none",attrs:{name:"check-button"},on:{change:function(t){return e.refreshData(!1)}},model:{value:e.search.search_keywords[i].not,callback:function(t){e.$set(e.search.search_keywords[i],"not",t)},expression:"search.search_keywords[a].not"}},[t("span",{staticClass:"text-uppercase"},[e._v(e._s(e.$t("not")))])])],1)],1):e._e()],1)})),1)]):e._e(),e.ui.expert_mode&&e.search.foods_fields>1?t("h6",{staticClass:"mt-2 mb-0"},[e._v(" "+e._s(e.$t("Foods"))+" ")]):e._e(),e.ui.expert_mode&&e.search.foods_fields>1&&e.hasDuplicateFilter(e.search.search_foods,e.search.foods_fields)?t("span",{staticClass:"text-sm-left text-warning"},[e._v(e._s(e.$t("warning_duplicate_filter")))]):e._e(),e.ui.show_foods?t("div",{staticClass:"row"},[t("div",{staticClass:"col-12"},e._l(e.foodFields,(function(a,i){return t("b-input-group",{key:i,staticClass:"mt-2",scopedSlots:e._u([e.ui.expert_mode?{key:"prepend",fn:function(){return[t("b-input-group-text",{staticStyle:{width:"3em"},on:{click:function(t){return e.addField("foods",a)}}},[a==e.search.foods_fields&&a<4?t("i",{staticClass:"fas fa-plus-circle text-primary"}):e._e()]),t("b-input-group-text",{staticStyle:{width:"3em"},on:{click:function(t){return e.removeField("foods",a)}}},[a==e.search.foods_fields&&a>1?t("i",{staticClass:"fas fa-minus-circle text-primary"}):e._e()])]},proxy:!0}:null],null,!0)},[e.ui.tree_select?e._e():t("generic-multiselect",{staticStyle:{"flex-grow":"1","flex-shrink":"1","flex-basis":"0"},attrs:{parent_variable:`search_foods::${i}`,initial_selection:e.search.search_foods[i].items,model:e.Models.FOOD,placeholder:e.$t("Foods"),limit:50},on:{change:e.genericSelectChanged}}),t("b-input-group-append",[t("b-input-group-text",[t("b-form-checkbox",{staticClass:"shadow-none",staticStyle:{width:"5em"},attrs:{name:"check-button",switch:""},on:{change:function(t){return e.refreshData(!1)}},model:{value:e.search.search_foods[i].operator,callback:function(t){e.$set(e.search.search_foods[i],"operator",t)},expression:"search.search_foods[i].operator"}},[e.search.search_foods[i].operator?t("span",{staticClass:"text-uppercase"},[e._v(e._s(e.$t("or")))]):t("span",{staticClass:"text-uppercase"},[e._v(e._s(e.$t("and")))])])],1)],1),e.ui.expert_mode?t("b-input-group-append",[t("b-input-group-text",[t("b-form-checkbox",{staticClass:"shadow-none",attrs:{name:"check-button"},on:{change:function(t){return e.refreshData(!1)}},model:{value:e.search.search_foods[i].not,callback:function(t){e.$set(e.search.search_foods[i],"not",t)},expression:"search.search_foods[i].not"}},[t("span",{staticClass:"text-uppercase"},[e._v(e._s(e.$t("not")))])])],1)],1):e._e()],1)})),1)]):e._e(),e.ui.expert_mode&&e.search.books_fields>1?t("h6",{staticClass:"mt-2 mb-0"},[e._v(" "+e._s(e.$t("Books"))+" ")]):e._e(),e.ui.expert_mode&&e.search.books_fields>1&&e.hasDuplicateFilter(e.search.search_books,e.search.books_fields)?t("span",{staticClass:"text-sm-left text-warning"},[e._v(e._s(e.$t("warning_duplicate_filter")))]):e._e(),e.ui.show_books?t("div",{staticClass:"row"},[t("div",{staticClass:"col-12"},e._l(e.bookFields,(function(a,i){return t("b-input-group",{key:i,staticClass:"mt-2",scopedSlots:e._u([e.ui.expert_mode?{key:"prepend",fn:function(){return[t("b-input-group-text",{staticStyle:{width:"3em"},on:{click:function(t){return e.addField("books",a)}}},[a==e.search.books_fields&&a<4?t("i",{staticClass:"fas fa-plus-circle text-primary"}):e._e()]),t("b-input-group-text",{staticStyle:{width:"3em"},on:{click:function(t){return e.removeField("books",a)}}},[a==e.search.books_fields&&a>1?t("i",{staticClass:"fas fa-minus-circle text-primary"}):e._e()])]},proxy:!0}:null],null,!0)},[t("generic-multiselect",{staticStyle:{"flex-grow":"1","flex-shrink":"1","flex-basis":"0"},attrs:{parent_variable:`search_books::${i}`,initial_selection:e.search.search_books[i].items,model:e.Models.RECIPE_BOOK,placeholder:e.$t("Books"),limit:50},on:{change:e.genericSelectChanged}}),t("b-input-group-append",[t("b-input-group-text",[t("b-form-checkbox",{staticClass:"shadow-none",staticStyle:{width:"5em"},attrs:{name:"check-button",switch:""},on:{change:function(t){return e.refreshData(!1)}},model:{value:e.search.search_books[i].operator,callback:function(t){e.$set(e.search.search_books[i],"operator",t)},expression:"search.search_books[i].operator"}},[e.search.search_books[i].operator?t("span",{staticClass:"text-uppercase"},[e._v(e._s(e.$t("or")))]):t("span",{staticClass:"text-uppercase"},[e._v(e._s(e.$t("and")))])])],1)],1),e.ui.expert_mode?t("b-input-group-append",[t("b-input-group-text",[t("b-form-checkbox",{staticClass:"shadow-none",attrs:{name:"check-button"},on:{change:function(t){return e.refreshData(!1)}},model:{value:e.search.search_books[i].not,callback:function(t){e.$set(e.search.search_books[i],"not",t)},expression:"search.search_books[i].not"}},[t("span",{staticClass:"text-uppercase"},[e._v(e._s(e.$t("not")))])])],1)],1):e._e()],1)})),1)]):e._e(),e.ui.show_rating?t("div",{staticClass:"row g-0"},[e.ui.show_rating?t("div",{staticClass:"col-12"},[t("b-input-group",{staticClass:"mt-2"},[t("multiselect",{staticStyle:{"flex-grow":"1","flex-shrink":"1","flex-basis":"0"},attrs:{label:"label","track-by":"id",options:e.ratingOptions,placeholder:e.$t("Ratings"),"internal-search":!1,multiple:!1,taggable:!1},on:{input:function(t){return e.refreshData(!1)}},model:{value:e.search.search_rating,callback:function(t){e.$set(e.search,"search_rating",t)},expression:"search.search_rating"}}),t("b-input-group-append",[t("b-input-group-text",[t("b-form-checkbox",{staticClass:"shadow-none",staticStyle:{width:"5em"},attrs:{name:"check-button",switch:""},on:{change:function(t){return e.refreshData(!1)}},model:{value:e.search.search_rating_gte,callback:function(t){e.$set(e.search,"search_rating_gte",t)},expression:"search.search_rating_gte"}},[e.search.search_rating_gte?t("span",{staticClass:"text-uppercase"},[e._v(">=")]):t("span",{staticClass:"text-uppercase"},[e._v("<=")])])],1)],1)],1)],1):e._e()]):e._e(),e.ui.show_units?t("div",{staticClass:"row"},[t("div",{staticClass:"col-12"},[t("b-input-group",{staticClass:"mt-2"},[t("generic-multiselect",{staticStyle:{"flex-grow":"1","flex-shrink":"1","flex-basis":"0"},attrs:{parent_variable:"search_units",initial_selection:e.search.search_units,model:e.Models.UNIT,placeholder:e.$t("Units"),limit:50},on:{change:e.genericSelectChanged}}),t("b-input-group-append",[t("b-input-group-text",[t("b-form-checkbox",{staticClass:"shadow-none",staticStyle:{width:"4em"},attrs:{name:"check-button",switch:""},on:{change:function(t){return e.refreshData(!1)}},model:{value:e.search.search_units_or,callback:function(t){e.$set(e.search,"search_units_or",t)},expression:"search.search_units_or"}},[e.search.search_units_or?t("span",{staticClass:"text-uppercase"},[e._v(e._s(e.$t("or")))]):t("span",{staticClass:"text-uppercase"},[e._v(e._s(e.$t("and")))])])],1)],1)],1)],1)]):e._e(),e.ui.show_timescooked||e.ui.show_makenow||e.ui.show_cookedon?t("div",{staticClass:"row g-0"},[t("div",{staticClass:"col-12"},[t("b-input-group",{staticClass:"mt-2"},[e.ui.show_timescooked?t("b-input-group-prepend",{attrs:{"is-text":""}},[e._v(" "+e._s(e.$t("times_cooked"))+" ")]):e._e(),e.ui.show_timescooked?t("b-form-input",{attrs:{id:"timescooked",type:"number",min:"0"},model:{value:e.search.timescooked,callback:function(t){e.$set(e.search,"timescooked",t)},expression:"search.timescooked"}}):e._e(),e.ui.show_timescooked?t("b-input-group-append",[t("b-input-group-text",[t("b-form-checkbox",{staticClass:"shadow-none",staticStyle:{width:"4em"},attrs:{name:"check-button",switch:""},on:{change:function(t){return e.refreshData(!1)}},model:{value:e.search.timescooked_gte,callback:function(t){e.$set(e.search,"timescooked_gte",t)},expression:"search.timescooked_gte"}},[e.search.timescooked_gte?t("span",{staticClass:"text-uppercase"},[e._v(">=")]):t("span",{staticClass:"text-uppercase"},[e._v("<=")])])],1)],1):e._e(),e.ui.show_cookedon?t("b-input-group-append",[t("b-form-datepicker",{attrs:{max:e.today,"no-highlight-today":"","reset-button":"","date-format-options":{year:"numeric",month:"numeric",day:"numeric"},locale:e.locale,placeholder:e.$t("last_cooked")},on:{input:function(t){return e.refreshData(!1)}},model:{value:e.search.cookedon,callback:function(t){e.$set(e.search,"cookedon",t)},expression:"search.cookedon"}}),t("b-input-group-text",[t("b-form-checkbox",{staticClass:"shadow-none",staticStyle:{width:"4em"},attrs:{name:"check-button",switch:""},on:{change:function(t){return e.refreshData(!1)}},model:{value:e.search.cookedon_gte,callback:function(t){e.$set(e.search,"cookedon_gte",t)},expression:"search.cookedon_gte"}},[e.search.cookedon_gte?t("span",{staticClass:"text-uppercase"},[e._v(">=")]):t("span",{staticClass:"text-uppercase"},[e._v("<=")])])],1)],1):e._e(),e.ui.show_createdon?t("b-input-group-append",[t("b-form-datepicker",{attrs:{max:e.today,"no-highlight-today":"","reset-button":"","date-format-options":{year:"numeric",month:"numeric",day:"numeric"},locale:e.locale,placeholder:e.$t("date_created")},on:{input:function(t){return e.refreshData(!1)}},model:{value:e.search.createdon,callback:function(t){e.$set(e.search,"createdon",t)},expression:"search.createdon"}}),t("b-input-group-text",[t("b-form-checkbox",{staticClass:"shadow-none",staticStyle:{width:"4em"},attrs:{name:"check-button",switch:""},on:{change:function(t){return e.refreshData(!1)}},model:{value:e.search.createdon_gte,callback:function(t){e.$set(e.search,"createdon_gte",t)},expression:"search.createdon_gte"}},[e.search.createdon_gte?t("span",{staticClass:"text-uppercase"},[e._v(">=")]):t("span",{staticClass:"text-uppercase"},[e._v("<=")])])],1)],1):e._e(),e.ui.show_viewedon?t("b-input-group-append",[t("b-form-datepicker",{attrs:{max:e.today,"no-highlight-today":"","reset-button":"","date-format-options":{year:"numeric",month:"numeric",day:"numeric"},locale:e.locale,placeholder:e.$t("last_viewed")},on:{input:function(t){return e.refreshData(!1)}},model:{value:e.search.viewedon,callback:function(t){e.$set(e.search,"viewedon",t)},expression:"search.viewedon"}}),t("b-input-group-text",[t("b-form-checkbox",{staticClass:"shadow-none",staticStyle:{width:"4em"},attrs:{name:"check-button",switch:""},on:{change:function(t){return e.refreshData(!1)}},model:{value:e.search.viewedon_gte,callback:function(t){e.$set(e.search,"viewedon_gte",t)},expression:"search.viewedon_gte"}},[e.search.viewedon_gte?t("span",{staticClass:"text-uppercase"},[e._v(">=")]):t("span",{staticClass:"text-uppercase"},[e._v("<=")])])],1)],1):e._e(),e.ui.show_updatedon?t("b-input-group-append",[t("b-form-datepicker",{attrs:{max:e.today,"no-highlight-today":"","reset-button":"","date-format-options":{year:"numeric",month:"numeric",day:"numeric"},locale:e.locale,placeholder:e.$t("updatedon")},on:{input:function(t){return e.refreshData(!1)}},model:{value:e.search.updatedon,callback:function(t){e.$set(e.search,"updatedon",t)},expression:"search.updatedon"}}),t("b-input-group-text",[t("b-form-checkbox",{staticClass:"shadow-none",staticStyle:{width:"4em"},attrs:{name:"check-button",switch:""},on:{change:function(t){return e.refreshData(!1)}},model:{value:e.search.updatedon_gte,callback:function(t){e.$set(e.search,"updatedon_gte",t)},expression:"search.updatedon_gte"}},[e.search.updatedon_gte?t("span",{staticClass:"text-uppercase"},[e._v(">=")]):t("span",{staticClass:"text-uppercase"},[e._v("<=")])])],1)],1):e._e(),e.ui.show_makenow?t("b-input-group-append",[t("b-input-group-text",[e._v(" "+e._s(e.$t("make_now"))+" "),t("b-form-checkbox",{staticClass:"shadow-none",staticStyle:{width:"4em"},attrs:{name:"check-button",switch:""},on:{change:function(t){return e.refreshData(!1)}},model:{value:e.search.makenow,callback:function(t){e.$set(e.search,"makenow",t)},expression:"search.makenow"}})],1),t("b-input-group-text",[t("span",[e._v(e._s(e.$t("make_now_count")))]),t("b-form-input",{staticClass:"mt-1",attrs:{type:"number",min:"0",max:"20",size:"sm"},on:{change:function(t){return e.refreshData(!1)}},model:{value:e.search.makenow_count,callback:function(t){e.$set(e.search,"makenow_count",t)},expression:"search.makenow_count"}})],1)],1):e._e()],1)],1)]):e._e(),t("div",{staticClass:"row justify-content-end small"},[t("div",{staticClass:"col-auto"},[t("b-button",{staticClass:"my-0",attrs:{variant:"link",size:"sm"},on:{click:function(t){e.search.explain_visible=!e.search.explain_visible}}},[e.search.explain_visible?t("div",[t("i",{staticClass:"far fa-eye-slash"}),e._v(" "+e._s(e.$t("explain")))]):t("div",[t("i",{staticClass:"far fa-eye"}),e._v(" "+e._s(e.$t("explain"))+" ")])]),t("b-button",{staticClass:"my-0",attrs:{variant:"link",size:"sm"},on:{click:function(t){e.ui.expert_mode=!e.ui.expert_mode}}},[e.ui.expert_mode?e._e():t("div",[t("i",{staticClass:"fas fa-circle"}),e._v(" "+e._s(e.$t("expert_mode"))+" ")]),e.ui.expert_mode?t("div",[t("i",{staticClass:"far fa-circle"}),e._v(" "+e._s(e.$t("simple_mode"))+" ")]):e._e()]),t("b-button",{staticClass:"my-0",attrs:{variant:"link",size:"sm"},on:{click:e.saveSearch}},[t("div",[t("i",{staticClass:"far fa-save"}),e._v(" "+e._s(e.$t("save_filter")))])])],1)]),e.search.explain_visible?t("div",{staticClass:"row"},[t("div",{staticClass:"col-auto p-3"},[t("div",[e._v(" Show all recipes that are matched "),e.search.search_input?t("span",[e._v(" by "),t("i",[e._v(e._s(e.search.search_input))]),e._v(" "),t("br")]):t("span",[e._v(" without any search term "),t("br")]),e.search.search_internal?t("span",[e._v(" and are "),t("span",{staticClass:"text-success"},[e._v("internal")]),e._v(" "),t("br")]):e._e(),e._l(e.search.search_keywords,(function(a){return t("span",{key:a.id},[a.items.length>0?[e._v(" and "),a.not?t("b",[e._v("don't")]):e._e(),e._v(" contain "),a.operator?t("b",[e._v("any")]):t("b",[e._v("all")]),e._v(" of the following "),t("span",{staticClass:"text-success"},[e._v("keywords")]),e._v(": "),t("i",[e._v(e._s(a.items.flatMap((e=>e.name)).join(", ")))]),t("br")]:e._e()],2)})),e._l(e.search.search_foods,(function(a){return t("span",{key:a.id},[a.items.length>0?[e._v(" and "),a.not?t("b",[e._v("don't")]):e._e(),e._v(" contain "),a.operator?t("b",[e._v("any")]):t("b",[e._v("all")]),e._v(" of the following "),t("span",{staticClass:"text-success"},[e._v("foods")]),e._v(": "),t("i",[e._v(e._s(a.items.flatMap((e=>e.name)).join(", ")))]),t("br")]:e._e()],2)})),e._l(e.search.search_books,(function(a){return t("span",{key:a.id},[a.items.length>0?[e._v(" and "),a.not?t("b",[e._v("don't")]):e._e(),e._v(" contain "),a.operator?t("b",[e._v("any")]):t("b",[e._v("all")]),e._v(" of the following "),t("span",{staticClass:"text-success"},[e._v("books")]),e._v(": "),t("i",[e._v(e._s(a.items.flatMap((e=>e.name)).join(", ")))]),t("br")]:e._e()],2)})),e.search.makenow?t("span",[e._v(" and you can "),t("span",{staticClass:"text-success"},[e._v("make right now")]),e._v(" (based on the on hand flag) "),t("br")]):e._e(),e.search.search_units.length>0?t("span",[e._v(" and contain "),e.search.search_units_or?t("b",[e._v("any")]):t("b",[e._v("all")]),e._v(" of the following "),t("span",{staticClass:"text-success"},[e._v("units")]),e._v(": "),t("i",[e._v(e._s(e.search.search_units.flatMap((e=>e.name)).join(", ")))]),t("br")]):e._e(),void 0!==e.search.search_rating?t("span",[e._v(" and have a "),t("span",{staticClass:"text-success"},[e._v("rating")]),e._v(" "),e.search.search_rating_gte?[e._v("greater than")]:[e._v(" less than")],e._v(" or equal to "+e._s(e.search.search_rating)),t("br")],2):e._e(),void 0!==e.search.lastcooked?t("span",[e._v(" and have been "),t("span",{staticClass:"text-success"},[e._v("last cooked")]),e._v(" "),e.search.lastcooked_gte?[e._v(" after")]:[e._v(" before")],e._v(" "),t("i",[e._v(e._s(e.search.lastcooked))]),t("br")],2):e._e(),void 0!==e.search.timescooked?t("span",[e._v(" and have "),t("span",{staticClass:"text-success"},[e._v("been cooked")]),e._v(" "),e.search.timescooked_gte?[e._v(" at least")]:[e._v(" less than")],e._v(" or equal to"),t("i",[e._v(e._s(e.search.timescooked))]),e._v(" times "),t("br")],2):e._e(),e.search.sort_order.length>0?t("span",[t("span",{staticClass:"text-success"},[e._v("order")]),e._v(" by "),t("i",[e._v(e._s(e.search.sort_order.flatMap((e=>e.text)).join(", ")))]),t("br")]):e._e()],2)])]):e._e()],1)])])],1)]),t("div",{staticClass:"row mt-2"},[t("div",{staticClass:"col-12 col-xl-10 col-lg-10 offset-xl-1 offset-lg-1"},[t("div",{staticStyle:{"overflow-x":"visible","overflow-y":"hidden","white-space":"nowrap"}},[t("b-dropdown",{staticClass:"shadow-none",staticStyle:{"overflow-y":"visible","overflow-x":"visible",position:"static"},attrs:{id:"sortby",text:e.sortByLabel,variant:"outline-primary",size:"sm","toggle-class":"text-decoration-none"}},e._l(e.sortOptions,(function(a){return t("div",{key:a.id},[t("b-dropdown-item",{on:{click:function(t){e.search.sort_order=[a],e.refreshData(!1)}}},[t("span",[e._v(e._s(a.text))])])],1)})),0),e.searchFiltered()?t("b-button",{staticClass:"shadow-none ml-1",attrs:{variant:"outline-primary",size:"sm"},on:{click:function(t){return e.resetSearch()}}},[t("i",{staticClass:"fas fa-file-alt"}),e._v(" "+e._s(e.search.pagination_page)+"/"+e._s(Math.ceil(e.pagination_count/e.ui.page_size))+" "+e._s(e.$t("Reset"))+" "),t("i",{staticClass:"fas fa-times-circle"})]):e._e(),t("b-button",{staticClass:"shadow-none ml-1",attrs:{variant:"outline-primary",size:"sm"},on:{click:function(t){return e.openRandom()}}},[t("i",{staticClass:"fas fa-dice-five"}),e._v(" "+e._s(e.$t("Random"))+" ")])],1)])]),!e.searchFiltered()&&e.ui.show_meal_plan&&e.meal_plan_grid.length>0?[t("hr"),t("div",{staticClass:"row"},[t("div",{staticClass:"col col-md-12"},[t("div",{staticStyle:{display:"grid","grid-template-columns":"repeat(auto-fit, minmax(200px, 1fr))","column-gap":"0.5rem","row-gap":"0.5rem","grid-auto-rows":"max-content"}},e._l(e.meal_plan_grid,(function(a){return t("div",{key:a.day,class:{"d-none d-sm-block":0===a.plan_entries.length}},[t("b-list-group",[t("b-list-group-item",{staticClass:"hover-div pb-0"},[t("div",{staticClass:"d-flex flex-row align-items-center"},[t("div",[t("h6",[e._v(e._s(a.date_label))])]),t("div",{staticClass:"flex-grow-1 text-right"},[t("b-button",{staticClass:"hover-button btn-outline-primary btn-sm",on:{click:function(t){return e.showMealPlanEditModal(null,a.create_default_date)}}},[t("i",{staticClass:"fa fa-plus"})])],1)])]),e._l(a.plan_entries,(function(a){return t("b-list-group-item",{key:a.id,staticClass:"hover-div p-0 pr-2"},[t("div",{staticClass:"d-flex flex-row align-items-center"},[t("div",[a.recipe?.image?t("img",{staticStyle:{height:"50px",width:"50px","object-fit":"cover"},attrs:{src:a.recipe.image}}):t("img",{staticStyle:{height:"50px",width:"50px","object-fit":"cover"},attrs:{src:e.image_placeholder}})]),t("div",{staticClass:"flex-grow-1 ml-2",staticStyle:{"text-overflow":"ellipsis","overflow-wrap":"anywhere"}},[t("span",{staticClass:"two-row-text"},[a.recipe?t("a",{attrs:{href:e.resolveDjangoUrl("view_recipe",a.recipe.id)}},[e._v(e._s(a.recipe.name))]):t("span",[e._v(e._s(a.title))])])]),t("div",{staticClass:"hover-button"},[t("b-button",{staticClass:"btn-outline-primary btn-sm",on:{click:function(t){return e.showMealPlanEditModal(a,null)}}},[t("i",{staticClass:"fas fa-pencil-alt"})])],1)])])}))],2)],1)})),0)])]),t("hr")]:e._e(),e.recipes.length>0?t("div",{staticClass:"mt-4"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col col-md-12"},[t("div",{staticStyle:{display:"grid","grid-template-columns":"repeat(auto-fit, minmax(300px, 1fr))","column-gap":"0.5rem","row-gap":"1rem","grid-auto-rows":"max-content"}},e._l(e.recipes,(function(a){return t("recipe-card",{key:a.id,attrs:{recipe:a,footer_text:e.isRecentOrNew(a)[0],footer_icon:e.isRecentOrNew(a)[1],use_plural:e.use_plural}})})),1)])]),e.random_search?e._e():t("div",{staticClass:"row",staticStyle:{"margin-top":"2vh"}},[t("div",{staticClass:"col col-md-12"},[t("b-pagination",{attrs:{"total-rows":e.pagination_count,"first-number":"","last-number":"",size:"lg","per-page":e.ui.page_size,align:"center"},on:{change:e.pageChange},model:{value:e.search.pagination_page,callback:function(t){e.$set(e.search,"pagination_page",t)},expression:"search.pagination_page"}})],1)]),t("div",{staticClass:"col-md-2 d-none d-md-block"})]):e._e(),e.recipes.length<1&&!e.recipes_loading?t("div",[t("div",{staticClass:"row mt-5"},[t("div",{staticClass:"col col-md-12 text-center"},[t("h4",{staticClass:"text-muted"},[t("i",{staticClass:"far fa-eye"}),e._v(" "+e._s(e.$t("search_no_recipes")))])])]),t("div",{staticClass:"row mt-2"},[t("div",{staticClass:"col col-md-12 text-center"},[t("b-card-group",{attrs:{deck:""}},[t("b-card",{staticClass:"text-center",attrs:{title:e.$t("Import")}},[t("b-card-text",[e._v(" "+e._s(e.$t("search_import_help_text"))+" ")]),t("b-button",{attrs:{variant:"primary",href:e.resolveDjangoUrl("data_import_url")}},[t("i",{staticClass:"fas fa-file-import"}),e._v(" "+e._s(e.$t("Import")))])],1),t("b-card",{staticClass:"text-center",attrs:{title:e.$t("Create")}},[t("b-card-text",[e._v(" "+e._s(e.$t("search_create_help_text"))+" ")]),t("b-button",{attrs:{variant:"primary",href:e.resolveDjangoUrl("new_recipe")}},[t("i",{staticClass:"fas fa-plus"}),e._v(" "+e._s(e.$t("Create")))])],1)],1)],1)])]):e._e(),t("meal-plan-edit-modal",{attrs:{entry:e.mealplan_entry_edit,create_date:e.mealplan_default_date}}),t("bottom-navigation-bar",{attrs:{"active-view":"view_search"}})],2)])],1)},n=[],o=(a(57658),a(46229),a(17330),a(62062),a(12120)),r=(a(57024),a(66123)),l=a.n(r),c=a(23279),d=a.n(c),p=a(30381),u=a.n(p),_=a(47907),h=a.n(_),m=function(){var e=this,t=e._self._c;return t("div",{staticClass:"fixed-bottom p-1 pt-2 pl-2 pr-2 border-top text-center d-lg-none d-print-none bottom-action-bar bg-white"},[e._t("custom_nav_content"),t("div",{staticClass:"d-flex flex-row justify-content-around"},[e.show_button_1?t("div",{staticClass:"flex-column"},[e._t("button_1",(function(){return[t("a",{staticClass:"nav-link bottom-nav-link p-0",class:{"bottom-nav-link-active":"view_search"===e.activeView},attrs:{href:e.resolveDjangoUrl("view_search")}},[t("i",{staticClass:"fas fa-fw fa-book",staticStyle:{"font-size":"1.4em"}}),t("br"),t("small",[e._v(e._s(e.$t("Recipes")))])])]}))],2):e._e(),e.show_button_2?t("div",{staticClass:"flex-column"},[e._t("button_2",(function(){return[t("a",{staticClass:"nav-link bottom-nav-link p-0",class:{"bottom-nav-link-active":"view_plan"===e.activeView},attrs:{href:e.resolveDjangoUrl("view_plan")}},[t("i",{staticClass:"fas fa-calendar-alt",staticStyle:{"font-size":"1.4em"}}),t("br"),t("small",[e._v(e._s(e.$t("Meal_Plan")))])])]}))],2):e._e(),e.show_button_create?t("div",{staticClass:"flex-column"},[e._t("button_create",(function(){return[t("div",{staticClass:"dropup"},[e._m(0),t("div",{staticClass:"dropdown-menu center-dropup",attrs:{"aria-labelledby":"navbarDropdownMenuLink"}},[t("a",{staticClass:"dropdown-item",attrs:{href:e.resolveDjangoUrl("new_recipe")}},[t("i",{staticClass:"fas fa-fw fa-plus"}),e._v(" "+e._s(e.$t("Create Recipe")))]),t("a",{staticClass:"dropdown-item",attrs:{href:e.resolveDjangoUrl("data_import_url")}},[t("i",{staticClass:"fas fa-fw fa-file-import"}),e._v(" "+e._s(e.$t("Import Recipe")))]),e.create_links.length>0?t("div",{staticClass:"dropdown-divider"}):e._e(),e._t("custom_create_functions"),e._l(e.create_links,(function(a){return t("a",{key:a.label,staticClass:"dropdown-item",attrs:{href:a.url}},[t("i",{class:a.icon+" fa-fw"}),e._v(" "+e._s(a.label)+" ")])}))],2)])]}))],2):e._e(),e.show_button_3?t("div",{staticClass:"flex-column"},[e._t("button_3",(function(){return[t("a",{staticClass:"nav-link bottom-nav-link p-0",class:{"bottom-nav-link-active":"view_shopping"===e.activeView},attrs:{href:e.resolveDjangoUrl("view_shopping")}},[t("i",{staticClass:"fas fa-shopping-cart",staticStyle:{"font-size":"1.4em"}}),t("br"),t("small",[e._v(e._s(e.$t("Shopping_list")))])])]}))],2):e._e(),t("div",{staticClass:"flex-column"},[e.show_button_4?e._t("button_4",(function(){return[t("a",{staticClass:"nav-link bottom-nav-link p-0",class:{"bottom-nav-link-active":"view_books"===e.activeView},attrs:{href:e.resolveDjangoUrl("view_books")}},[t("i",{staticClass:"fas fa-book-open",staticStyle:{"font-size":"1.4em"}}),t("br"),t("small",[e._v(e._s(e.$t("Books")))])])]})):e._e()],2)])],2)},f=[function(){var e=this,t=e._self._c;return t("a",{staticClass:"nav-link bottom-nav-link p-0",attrs:{href:"#",id:"navbarDropdownMenuLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t("i",{staticClass:"fas fa-plus-circle fa-2x bottom-nav-link bottom-nav-link-active"})])}],g=a(49665),v={name:"BottomNavigationBar",mixins:[g.ResolveUrlMixin],props:{create_links:{type:Array,default(){return[]}},show_button_1:{type:Boolean,default:!0},show_button_2:{type:Boolean,default:!0},show_button_3:{type:Boolean,default:!0},show_button_4:{type:Boolean,default:!0},show_button_create:{type:Boolean,default:!0},activeView:{type:String,default:""}}},b=v,y=a(1001),k=(0,y.Z)(b,m,f,!1,null,"7d188138",null),x=k.exports,w=function(){var e=this,t=e._self._c;return e.recipes!=={}?t("div",[t("div",{staticClass:"align-center",attrs:{id:"switcher"}},[t("i",{directives:[{name:"b-toggle",rawName:"v-b-toggle.related-recipes",modifiers:{"related-recipes":!0}}],staticClass:"btn btn-primary fas fa-receipt fa-xl fa-fw shadow-none btn-circle"})]),t("b-sidebar",{staticStyle:{"z-index":"10000"},attrs:{id:"related-recipes",backdrop:"",right:"",bottom:"","no-header":"",shadow:"sm"},on:{shown:function(t){return e.updatePinnedRecipes()}},scopedSlots:e._u([{key:"default",fn:function({hide:a}){return[t("div",{staticClass:"d-flex flex-column justify-content-end h-100 p-3 align-items-end"},[t("h5",[e._v(e._s(e.$t("Planned"))+" "),t("i",{staticClass:"fas fa-calendar fa-fw"})]),t("div",{staticClass:"text-right"},[e.planned_recipes.length>0?e._l(e.planned_recipes,(function(i){return t("div",{key:`plan${i.id}`},[t("div",{staticClass:"pb-1 pt-1"},[t("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){e.navRecipe(i),a()}}},[e._v(e._s(i.name))])])])})):[t("span",{staticClass:"text-muted"},[e._v(e._s(e.$t("nothing_planned_today")))])]],2),t("h5",[e._v(e._s(e.$t("Pinned"))+" "),t("i",{staticClass:"fas fa-thumbtack fa-fw"})]),e.pinned_recipes.length>0?[t("div",{staticClass:"text-right"},e._l(e.pinned_recipes,(function(i){return t("div",{key:`pin${i.id}`},[t("b-row",{staticClass:"pb-1 pt-1"},[t("b-col",{attrs:{cols:"2"}},[t("a",{staticClass:"text-muted",attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.unPinRecipe(i)}}},[t("i",{staticClass:"fas fa-times"})])]),t("b-col",{attrs:{cols:"10"}},[t("a",{staticClass:"align-self-end",attrs:{href:"javascript:void(0);"},on:{click:function(t){e.navRecipe(i),a()}}},[e._v(e._s(i.name)+" ")])])],1)],1)})),0)]:[t("span",{staticClass:"text-muted"},[e._v(e._s(e.$t("no_pinned_recipes")))])],e.related_recipes.length>0?[t("h5",[e._v("Related "),t("i",{staticClass:"fas fa-link fa-fw"})]),t("div",{staticClass:"text-right"},e._l(e.related_recipes,(function(i){return t("div",{key:`related${i.id}`},[t("div",{staticClass:"pb-1 pt-1"},[t("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){e.navRecipe(i),a()}}},[e._v(e._s(i.name))])])])})),0)]:e._e()],2)]}},{key:"footer",fn:function({hide:a}){return[t("div",{staticClass:"d-flex bg-dark text-light align-items-center px-3 py-2"},[t("strong",{staticClass:"mr-auto"},[e._v(e._s(e.$t("Quick actions")))]),t("b-button",{attrs:{size:"sm"},on:{click:a}},[e._v(e._s(e.$t("Close")))])],1)]}}],null,!1,1200845374)})],1):e._e()},C=[];const{ApiApiFactory:S}=a(6955);var E={name:"RecipeSwitcher",mixins:[g.ResolveUrlMixin],props:{recipe:{type:Number,default:void 0}},data(){return{related_recipes:[],planned_recipes:[],pinned_recipes:[],recipes:{}}},computed:{is_recipe_view:function(){return this.$root._vnode.tag.includes("RecipeView")}},mounted(){let e=[];e.push(this.loadRelatedRecipes()),this.loadPinnedRecipes(),e.push(this.loadMealPlans()),Promise.all(e).then((()=>{this.loadRecipeData()}))},methods:{navRecipe:function(e){this.is_recipe_view?this.$emit("switch",this.recipes[e.id]):window.location.href=this.resolveDjangoUrl("view_recipe",e.id)},updatePinnedRecipes:function(){this.loadPinnedRecipes(),this.loadRecipeData()},loadRecipeData:function(){let e=new S,t=[...this.related_recipes,...this.planned_recipes,...this.pinned_recipes],a=[];t.forEach((e=>{let t=e.id;a.includes(t)||a.push(t)})),a.forEach((t=>{e.retrieveRecipe(t).then((e=>{this.recipes[t]=e.data}))}))},loadRelatedRecipes:function(){let e=new S;if(this.$parent.recipe)return this.related_recipes=[this.$parent.recipe],e.relatedRecipe(this.$parent.recipe.id,{query:{levels:2,format:"json"}}).then((e=>{this.related_recipes=this.related_recipes.concat(e.data)}))},loadPinnedRecipes:function(){let e=JSON.parse(localStorage.getItem("pinned_recipes"))||[];this.pinned_recipes=e},loadMealPlans:function(){let e=new S;var t=6e4*(new Date).getTimezoneOffset();let a=new Date(Date.now()-t).toISOString().split("T")[0];return e.listMealPlans(a,a).then((t=>{let a=[];return t.data.forEach((t=>{this.planned_recipes.push({...t?.recipe,servings:t?.servings});const i=(t?.servings??t?.recipe?.servings??1)/(t?.recipe?.servings??1);a.push(e.relatedRecipe(t?.recipe?.id,{query:{levels:2}}).then((e=>{e.data=e.data.map((e=>({...e,factor:i}))),this.planned_recipes=[...this.planned_recipes,...e.data]})))})),Promise.all(a)}))},unPinRecipe:function(e){let t=JSON.parse(localStorage.getItem("pinned_recipes"))||[];t=t.filter((t=>t.id!==e.id)),console.log("pinned left",t),this.pinned_recipes=t,localStorage.setItem("pinned_recipes",JSON.stringify(t))}}},A=E,$=(0,y.Z)(A,w,C,!1,null,null,null),j=$.exports,T=a(26678),F=a(22280),D=a(13470),M=a(15782),O=a(6955);i["default"].use(l()),i["default"].use(o.XG7);let P="search_settings3",R="ui_search_settings";var I={name:"RecipeSearchView",mixins:[g.ResolveUrlMixin,g.ApiMixin,g.ToastMixin],components:{GenericMultiselect:T["default"],RecipeCard:D["default"],RecipeSwitcher:j,Multiselect:h(),BottomNavigationBar:x,MealPlanEditModal:F["default"]},data(){return{recipes:[],recipes_loading:!0,meal_plans:[],meal_plan_store:null,last_viewed_recipes:[],sortMenu:!1,use_plural:!1,search:{advanced_search_visible:!1,explain_visible:!1,search_input:"",search_internal:!1,search_keywords:[{items:[],operator:!0,not:!1},{items:[],operator:!1,not:!1},{items:[],operator:!0,not:!0},{items:[],operator:!1,not:!0}],search_foods:[{items:[],operator:!0,not:!1},{items:[],operator:!1,not:!1},{items:[],operator:!0,not:!0},{items:[],operator:!1,not:!0}],search_books:[{items:[],operator:!0,not:!1},{items:[],operator:!1,not:!1},{items:[],operator:!0,not:!0},{items:[],operator:!1,not:!0}],search_units:[],search_units_or:!0,search_rating:void 0,search_rating_gte:!0,search_filter:void 0,timescooked:void 0,timescooked_gte:!0,makenow:!1,makenow_count:0,cookedon:void 0,cookedon_gte:!0,createdon:void 0,createdon_gte:!0,updatedon:void 0,updatedon_gte:!0,viewedon:void 0,viewedon_gte:!0,sort_order:[],pagination_page:1,keywords_fields:1,foods_fields:1,books_fields:1,rating_fields:1,units_fields:1},ui:{show_meal_plan:!0,meal_plan_days:0,recently_viewed:5,sort_by_new:!0,page_size:25,expert_mode:!1,remember_search:!0,remember_hours:4,sql_debug:!1,tree_select:!1,show_keywords:!0,show_foods:!0,show_books:!0,show_rating:!0,show_units:!1,show_filters:!0,show_sortby:!1,show_timescooked:!1,show_makenow:!1,show_cookedon:!1,show_viewedon:!1,show_createdon:!1,show_updatedon:!1,include_children:!0},pagination_count:0,random_search:!1,debug:!1,mealplan_default_date:null,mealplan_entry_edit:null,image_placeholder:window.IMAGE_PLACEHOLDER}},computed:{meal_plan_grid:function(){let e=[];if(null!==this.meal_plan_store&&this.meal_plan_store.plan_list.length>0)for(const t of Array(this.ui.meal_plan_days).keys()){let a=u()().add(t,"d");e.push({date:a,create_default_date:a.format("YYYY-MM-DD"),date_label:a.format("dd")+" "+a.format("ll"),plan_entries:this.meal_plan_store.plan_list.filter((e=>a.isBetween(u()(e.from_date),u()(e.to_date),"day","[]")))})}return e},locale:function(){return window.CUSTOM_LOCALE},sortByLabel:function(){return 1==this.search.sort_order.length?this.search.sort_order[0].text:this.$t("sort_by")},yesterday:function(){const e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate()-1)},today:function(){const e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate())},ratingOptions:function(){let e;return e=this.search.search_rating_gte?e=>5==e?"":this.$t("and_up"):e=>1==e?"":this.$t("and_down"),[{id:5,label:"⭐⭐⭐⭐⭐ "+e(5)},{id:4,label:"⭐⭐⭐⭐ "+e()},{id:3,label:"⭐⭐⭐ "+e()},{id:2,label:"⭐⭐ "+e()},{id:1,label:"⭐ "+e(1)},{id:0,label:this.$t("Unrated")}]},keywordFields:function(){return this.ui.expert_mode?this.search.keywords_fields:1},foodFields:function(){return this.ui.expert_mode?this.search.foods_fields:1},bookFields:function(){return this.ui.expert_mode?this.search.books_fields:1},ratingFields:function(){return this.ui.expert_mode?this.search.rating_fields:1},unitFields:function(){return this.ui.expert_mode?this.search.units_fields:1},sortOptions:function(){let e=[],t=1;const a=[[this.$t("search_rank"),"score","1-9","9-1"],[this.$t("Name"),"name","A-z","Z-a"],[this.$t("last_cooked"),"lastcooked","↑","↓"],[this.$t("Rating"),"rating","1-5","5-1"],[this.$t("times_cooked"),"favorite","x-X","X-x"],[this.$t("date_created"),"created_at","↑","↓"],[this.$t("date_viewed"),"lastviewed","↑","↓"]];return a.forEach((a=>{e.push({id:t,text:`${a[0]} (${a[2]})`,value:a[1]},{id:t+1,text:`${a[0]} (${a[3]})`,value:`-${a[1]}`}),t+=2})),e},isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},isTouch:function(){return window.matchMedia("(pointer: coarse)").matches}},mounted(){this.recipes=Array(this.ui.page_size).fill({loading:!0}),this.$nextTick((function(){this.$cookies.isKey(R)&&(this.ui=Object.assign({},this.ui,this.$cookies.get(R))),this.ui.remember_search&&this.$cookies.isKey(P)&&(this.search=Object.assign({},this.search,this.$cookies.get(P)));let e=new URLSearchParams(window.location.search);if(e.has("keyword")){this.search.search_keywords[0].items=[];for(let t of e.getAll("keyword"))this.search.search_keywords[0].items.push(Number.parseInt(t))}e.has("query")&&(this.search.search_input=e.get("query")),this.loadMealPlan(),this.refreshData(!1)}));let e=new O.ApiApiFactory;e.retrieveSpace(window.ACTIVE_SPACE_ID).then((e=>{this.use_plural=e.data.use_plural})),this.$i18n.locale=window.CUSTOM_LOCALE,u().locale(window.CUSTOM_LOCALE),this.debug="True"==localStorage.getItem("DEBUG")||!1},watch:{search:{handler(){this.$cookies.set(P,this.search,`${this.ui.remember_hours}h`)},deep:!0},ui:{handler(){this.$cookies.set(R,this.ui,"100y")},deep:!0},"search.search_input":d()((function(){this.search.pagination_page=1,this.pagination_count=0,this.refreshData(!1)}),300),"search.timescooked":function(){this.refreshData(!1)},"ui.show_meal_plan":function(){this.loadMealPlan()},"ui.meal_plan_days":function(){this.loadMealPlan()},"ui.recently_viewed":function(){this.refreshData(!1)},"ui.page_size":d()((function(){this.refreshData(!1)}),300),"ui.expert_mode":function(e,t){e||(this.search.search_keywords=this.search.search_keywords.map((e=>({...e,not:!1}))),this.search.search_foods=this.search.search_foods.map((e=>({...e,not:!1}))),this.search.search_books=this.search.search_books.map((e=>({...e,not:!1}))))}},methods:{refreshData:d()((function(e){this.recipes_loading=!0,this.recipes=Array(this.ui.page_size).fill({loading:!0});let t=this.buildParams(e);this.genericAPI(this.Models.RECIPE,this.Actions.LIST,t).then((e=>{if(window.scrollTo(0,0),this.pagination_count=e.data.count,this.recipes=[...this.removeDuplicates(e.data.results,(e=>e.id))],!this.searchFiltered()){let e=[];this.meal_plans.forEach((t=>e.push(t.recipe.id))),this.recipes=this.recipes.filter((t=>!e.includes(t.id)))}this.recipes_loading=!1}))}),300),openRandom:function(){this.refreshData(!0)},removeDuplicates:function(e,t){return[...new Map(e.map((e=>[t(e),e]))).values()]},loadMealPlan:function(){console.log("loadMealpLan"),this.meal_plan_store=(0,M.I)(),this.meal_plan_store.refreshFromAPI(u()().format("YYYY-MM-DD"),u()().add(this.ui.meal_plan_days,"days").format("YYYY-MM-DD"))},genericSelectChanged:function(e){if(e.var.includes("::")){let t=e.var.split("::");this.search[t[0]][t[1]].items=e.val}else this.search[e.var]=e.val;"search_filter"===e.var?this.resetSearch(!0):this.refreshData(!1)},resetSearch:function(e=void 0){this.search.search_keywords=this.search.search_keywords.map((e=>({...e,items:[]}))),this.search.search_foods=this.search.search_foods.map((e=>({...e,items:[]}))),this.search.search_books=this.search.search_books.map((e=>({...e,items:[]}))),this.search.search_input=e?.query??"",this.search.search_internal=e?.internal??!1,this.search.search_units=e?.units??[],this.search.search_rating=e?.rating??void 0,this.search.sort_order=e?.options?.query?.sort_order??[],this.search.pagination_page=1,this.search.timescooked=void 0,this.search.makenow=!1,this.search.make_now_count=0,this.search.cookedon=void 0,this.search.viewedon=void 0,this.search.createdon=void 0,this.search.updatedon=void 0,this.search.keywords_fields=1,this.search.foods_fields=1,this.search.books_fields=1,e||(this.search.search_filter=void 0),this.refreshData(!1)},pageChange:function(e){this.search.pagination_page=e,this.refreshData(!1)},normalizer(e){let t=e?.count?" ("+e.count+")":"";return{id:e.id,label:e.name+t,children:e.children,isDefaultExpanded:e.isDefaultExpanded}},isRecentOrNew:function(e){let t=[this.$t("Recently_Viewed"),"fas fa-eye"],a=[this.$t("New_Recipe"),"fas fa-splotch"];return e.new?a:e.recent?t:[void 0,void 0]},showSQL:function(){let e=this.buildParams();e.options.query.debug=!0,this.genericAPI(this.Models.RECIPE,this.Actions.LIST,e).then((e=>{console.log(e.data)}))},applyFilter(){},buildParams:function(e){let t={options:{query:{}},page:this.search.pagination_page,pageSize:this.ui.page_size};if(this.search.search_filter)return t.options.query.filter=this.search.search_filter.id,t;this.random_search=e;let a=this.search.search_rating;void 0===a||this.search.search_rating_gte||(a*=-1);let i=this.search.cookedon||void 0;void 0===i||this.search.cookedon_gte||(i="-"+i);let s=this.search.createdon||void 0;void 0===s||this.search.createdon_gte||(s="-"+s);let n=this.search.viewedon||void 0;void 0===n||this.search.viewedon_gte||(n="-"+n);let o=this.search.updatedon||void 0;void 0===o||this.search.updatedon_gte||(o="-"+o);let r=parseInt(this.search.timescooked);isNaN(r)?r=void 0:this.search.timescooked_gte||(r*=-1);let l=this.search.makenow||void 0;return void 0!==l&&(l=parseInt(this.search.makenow_count)),t={...t,...this.addFields("keywords"),...this.addFields("foods"),...this.addFields("books"),units:this.search.search_units.flatMap((e=>e.id)),query:this.search.search_input,rating:a?.["id"]??void 0,internal:this.search.search_internal,random:this.random_search,timescooked:r,makenow:l,cookedon:i,createdon:s,updatedon:o,viewedon:n},t.options.query={sort_order:this.search.sort_order.map((e=>e.value)),include_children:this.ui.include_children},this.searchFiltered()||(t.options.query.num_recent=this.ui.recently_viewed,t._new=this.ui.sort_by_new),t},searchFiltered:function(e=!1){let t=0!==this.search?.search_keywords?.[0]?.items?.length||0!==this.search?.search_foods?.[0]?.items?.length||0!==this.search?.search_books?.[0]?.items?.length||0!==this.search?.search_units?.length||this.random_search||this.search?.search_filter||this.search.sort_order.length>1||void 0!==this.search?.search_rating||void 0!==this.search.timescooked&&""!==this.search.timescooked||!1!==this.search.makenow||void 0!==this.search.cookedon&&""!==this.search.cookedon||void 0!==this.search.viewedon&&""!==this.search.viewedon||void 0!==this.search.createdon&&""!==this.search.createdon||void 0!==this.search.updatedon&&""!==this.search.updatedon;return e?t:t||""!=this.search?.search_input||this.search.sort_order.length>=1},addFields(e){let t=this.search[`search_${e}`].slice(0,this.search[`${e}_fields`]);return{[`${e}_or`]:t.filter((e=>1==e.operator&&0==e.not)).map((e=>e.items)).flat().map((e=>e?.id??e)),[`${e}_and`]:t.filter((e=>0==e.operator&&0==e.not)).map((e=>e.items)).flat().map((e=>e?.id??e)),[`${e}_or_not`]:t.filter((e=>1==e.operator&&1==e.not)).map((e=>e.items)).flat().map((e=>e?.id??e)),[`${e}_and_not`]:t.filter((e=>0==e.operator&&1==e.not)).map((e=>e.items)).flat().map((e=>e?.id??e))}},saveSearch:function(){let e=window.prompt(this.$t("save_filter"),this.$t("filter_name"));if(null===e||""===e.trim())return;let t=this.buildParams(!1);console.log("after build",t),["page","pageSize"].forEach((e=>{delete t[e]})),t={...t,...t.options.query},console.log("after concat",t);let a={name:e,search:JSON.stringify(t)};this.genericAPI(this.Models.CUSTOM_FILTER,this.Actions.CREATE,a).then((e=>{this.search.search_filter=e.data,g.StandardToasts.makeStandardToast(this,g.StandardToasts.SUCCESS_CREATE)})).catch((e=>{g.StandardToasts.makeStandardToast(this,g.StandardToasts.FAIL_CREATE,e)}))},addField:function(e,t){t==this.search[`${e}_fields`]&&t<4&&(this.search[`${e}_fields`]=this.search[`${e}_fields`]+1,this.refreshData(!1))},removeField:function(e,t){t==this.search[`${e}_fields`]&&t>1&&(this.search[`${e}_fields`]=this.search[`${e}_fields`]-1,this.search[`search_${e}`][t-1].items=[],this.refreshData(!1))},hasDuplicateFilter(e,t){return e=JSON.parse(JSON.stringify(e)),e.splice(t,e.length),e.filter((e=>!0===e.operator&&!0===e.not)).length>1||e.filter((e=>!0===e.operator&&!1===e.not)).length>1||e.filter((e=>!1===e.operator&&!0===e.not)).length>1||e.filter((e=>!1===e.operator&&!1===e.not)).length>1},showMealPlanEditModal:function(e,t){this.mealplan_default_date=t,this.mealplan_entry_edit=e,this.$nextTick((function(){this.$bvModal.show("id_meal_plan_edit_modal")}))}}},N=I,U=(0,y.Z)(N,s,n,!1,null,null,null),L=U.exports,Z=a(72081),z=a(96086);i["default"].config.productionTip=!1;let B=localStorage.STATIC_URL+"vue/";a.p=B;i["default"].use(z.og);const G=(0,z.WB)();new i["default"]({pinia:G,i18n:Z.Z,render:e=>e(L)}).$mount("#app")},72081:function(e,t,a){"use strict";var i=a(70538),s=a(17152);function n(){const e=Date.now();console.log("started loading locale messages");const t=a(72528),i={};return t.keys().forEach((e=>{const a=e.match(/([A-Za-z0-9-_]+)\./i);if(a&&a.length>1){const s=a[1];i[s]=t(e)}})),console.log("finished loading messages in ",Date.now()-e," ms"),i}i["default"].use(s.Z),t.Z=new s.Z({locale:{NODE_ENV:"production",BASE_URL:""}.VUE_APP_I18N_LOCALE||"en",fallbackLocale:{NODE_ENV:"production",BASE_URL:""}.VUE_APP_I18N_FALLBACK_LOCALE||"en",silentTranslationWarn:!0,messages:n()})},15782:function(e,t,a){"use strict";a.d(t,{I:function(){return c}});a(57658);var i=a(6955),s=a(49665),n=a(96086),o=a(70538);const r="meal_plan_store",l="MEAL_PLAN_CLIENT_SETTINGS",c=(0,n.Q_)(r,{state:()=>({plans:{},currently_updating:null,settings:null}),getters:{plan_list:function(){let e=[];for(let t in this.plans)e.push(this.plans[t]);return e},empty_meal_plan:function(){return{from_date:null,to_date:null,id:-1,meal_type:null,note:"",note_markdown:"",recipe:null,servings:1,shared:[],title:"",title_placeholder:"Title"}},client_settings:function(){return null===this.settings&&(this.settings=this.loadClientSettings()),this.settings}},actions:{refreshFromAPI(e,t){if(null==this.currently_updating||this.currently_updating[0]!==e||this.currently_updating[1]!==t){this.currently_updating=[e,t];let a=new i.ApiApiFactory;a.listMealPlans(e,t).then((e=>{e.data.forEach((e=>{o["default"].set(this.plans,e.id,e)})),this.currently_updating=null}))}},createObject(e){let t=new i.ApiApiFactory;return t.createMealPlan(e).then((e=>(o["default"].set(this.plans,e.data.id,e.data),e))).catch((e=>{s.StandardToasts.makeStandardToast(this,s.StandardToasts.FAIL_CREATE,e)}))},updateObject(e){let t=new i.ApiApiFactory;return t.updateMealPlan(e.id,e).then((t=>{o["default"].set(this.plans,e.id,e)})).catch((e=>{s.StandardToasts.makeStandardToast(this,s.StandardToasts.FAIL_UPDATE,e)}))},deleteObject(e){let t=new i.ApiApiFactory;return t.destroyMealPlan(e.id).then((t=>{o["default"].delete(this.plans,e.id)})).catch((e=>{s.StandardToasts.makeStandardToast(this,s.StandardToasts.FAIL_DELETE,e)}))},updateClientSettings(e){this.settings=e,localStorage.setItem(l,JSON.stringify(this.settings))},loadClientSettings(){let e=localStorage.getItem(l);return null===e?{displayPeriodUom:"week",displayPeriodCount:3,startingDayOfWeek:1,displayWeekNumbers:!0}:JSON.parse(e)}}})},81185:function(e,t,a){"use strict";a.d(t,{R:function(){return u}});var i=a(96086),s=a(6955),n=a(70538),o=a(49665);const r=3e4,l="user_preference_store",c="TANDOOR_LOCAL_SETTINGS",d="TANDOOR_USER_SETTINGS",p=localStorage.getItem("USER_ID"),u=(0,i.Q_)(l,{state:()=>({data:null,updated_at:null,currently_updating:!1,user_settings_loaded_at:new Date(0),user_settings:{image:null,theme:"TANDOOR",nav_bg_color:"#ddbf86",nav_text_color:"DARK",nav_show_logo:!0,default_unit:"g",default_page:"SEARCH",use_fractions:!1,use_kj:!1,plan_share:[],nav_sticky:!0,ingredient_decimals:2,comments:!0,shopping_auto_sync:5,mealplan_autoadd_shopping:!1,food_inherit_default:[],default_delay:"4.0000",mealplan_autoinclude_related:!0,mealplan_autoexclude_onhand:!0,shopping_share:[],shopping_recent_days:7,csv_delim:",",csv_prefix:"",filter_to_supermarket:!1,shopping_add_onhand:!1,left_handed:!1,show_step_ingredients:!0,food_children_exist:!1,locally_updated_at:new Date(0)},device_settings_initialized:!1,device_settings_loaded_at:new Date(0),device_settings:{shopping_show_checked_entries:!1,shopping_show_delayed_entries:!1,shopping_show_selected_supermarket_only:!1,shopping_selected_grouping:"food.supermarket_category.name",shopping_selected_supermarket:null,shopping_item_info_created_by:!1,shopping_item_info_mealplan:!1,shopping_item_info_recipe:!0}}),getters:{},actions:{loadDeviceSettings(){let e=localStorage.getItem(c);if(null!==e){let t=JSON.parse(e);for(e in t)n["default"].set(this.device_settings,e,t[e])}this.device_settings_initialized=!0},updateDeviceSettings:function(){localStorage.setItem(c,JSON.stringify(this.device_settings))},loadUserSettings:function(e){let t=localStorage.getItem(d);if(null!==t){let e=JSON.parse(t);for(t in e)n["default"].set(this.user_settings,t,e[t]);console.log(`loaded local user settings age ${((new Date).getTime()-this.user_settings.locally_updated_at)/1e3} `)}if((new Date).getTime()-this.user_settings.locally_updated_at>r||!e){console.log("refreshing user settings from API");let e=new s.ApiApiFactory;e.retrieveUserPreference(localStorage.getItem("USER_ID")).then((e=>{for(t in e.data)t in this.user_settings||"user"===t?n["default"].set(this.user_settings,t,e.data[t]):console.error(`API returned UserPreference key "${t}" which has no default in UserPreferenceStore.user_settings.`);n["default"].set(this.user_settings,"locally_updated_at",(new Date).getTime()),localStorage.setItem(d,JSON.stringify(this.user_settings))})).catch((e=>{this.currently_updating=!1}))}},updateUserSettings:function(){let e=new s.ApiApiFactory;e.partialUpdateUserPreference(p,this.user_settings).then((e=>{this.user_settings=e.data,n["default"].set(this.user_settings,"locally_updated_at",(new Date).getTime()),localStorage.setItem(d,JSON.stringify(this.user_settings)),o.StandardToasts.makeStandardToast(this,o.StandardToasts.SUCCESS_UPDATE)})).catch((e=>{this.currently_updating=!1,o.StandardToasts.makeStandardToast(this,o.StandardToasts.FAIL_UPDATE,e)}))},getData:function(){return this.isStaleOrEmpty?this.refreshFromAPI():this.data},getStaleData:function(){return this.data},isStale(){return null===this.updated_at||new Date-this.updated_at>r},isEmpty(){return null===this.data},isStaleOrEmpty(){return this.isStale()||this.isEmpty()},updateIfStaleOrEmpty(){if(this.isStaleOrEmpty)return this.refreshFromAPI()},refreshFromAPI(){let e=new s.ApiApiFactory;if(!this.currently_updating)return this.currently_updating=!0,e.retrieveUserPreference(localStorage.getItem("USER_ID")).then((e=>(this.data=e.data,this.updated_at=new Date,this.currently_updating=!1,this.user_settings=e.data,this.user_settings_loaded_at=new Date,this.data))).catch((e=>{this.currently_updating=!1}))}}})},36502:function(e,t,a){"use strict";a.d(t,{YI:function(){return n}});var i=a(5121),s=a(49665);a(6955);function n(e){return i.Z.post((0,s.resolveDjangoUrl)("api:cooklog-list"),e).then((e=>{(0,s.makeToast)("Saved","Cook Log entry saved!","success")})).catch((e=>{o(e,"There was an error creating a resource!","danger")}))}function o(e,t){if("response"in e){console.log(e.response);let a="statusText"in e.response?e.response.statusText:(0,s.djangoGettext)("Error");t+="\n\n"+JSON.stringify(e.response.data),(0,s.makeToast)(a,t,"danger")}else(0,s.makeToast)("Error",t,"danger"),console.log(e)}i.Z.defaults.xsrfCookieName="csrftoken",i.Z.defaults.xsrfHeaderName="X-CSRFTOKEN"},98342:function(e,t,a){"use strict";function i(e,t,a){var i=Math.floor(e),s=1,n=i+1,o=1;if(e!==i)while(s<=t&&o<=t){var r=(i+n)/(s+o);if(e===r){s+o<=t?(s+=o,i+=n,o=t+1):s>o?o=t+1:s=t+1;break}e<r?(n=i+n,o=s+o):(i+=n,s+=o)}if(s>t&&(s=o,i=n),!a)return[0,i,s];var l=Math.floor(i/s);return[l,i-l*s,s]}a.d(t,{F:function(){return i}})},7321:function(e,t,a){"use strict";a.d(t,{e:function(){return o},k:function(){return n}});var i,s=a(61369);class n{}i=n,(0,s.Z)(n,"TREE",{list:{params:["query","root","tree","page","pageSize","options"],config:{root:{default:{function:"CONDITIONAL",check:"query",operator:"not_exist",true:0,false:void 0}},tree:{default:void 0}}},delete:{form:{instruction:{form_field:!0,type:"instruction",function:"translate",phrase:"del_confimation_tree",params:[{token:"source",from:"item1",attribute:"name"}]}}},move:{form:{target:{form_field:!0,type:"lookup",field:"target",list:"self",sticky_options:[{id:0,name:"tree_root"}]}}}}),(0,s.Z)(n,"FOOD",{name:"Food",apiName:"Food",model_type:i.TREE,paginated:!0,move:!0,merge:!0,shop:!0,onhand:!0,badges:{linked_recipe:!0,food_onhand:!0,shopping:!0},tags:[{field:"supermarket_category",label:"name",color:"info"}],create:{params:[["name","plural_name","description","recipe","food_onhand","supermarket_category","inherit","inherit_fields","ignore_shopping","substitute","substitute_siblings","substitute_children","reset_inherit","child_inherit_fields","open_data_slug"]],form:{show_help:!0,component:"FoodEditor",name:{form_field:!0,type:"text",field:"name",label:"Name",placeholder:"",subtitle_field:"full_name"},plural_name:{form_field:!0,type:"text",field:"plural_name",label:"Plural",placeholder:""},description:{form_field:!0,type:"text",field:"description",label:"Description",placeholder:""},recipe:{form_field:!0,type:"lookup",field:"recipe",list:"RECIPE",label:"Recipe",help_text:"food_recipe_help"},open_data_slug:{form_field:!0,type:"text",field:"open_data_slug",disabled:!0,label:"Open_Data_Slug",help_text:"open_data_help_text"},onhand:{form_field:!0,type:"checkbox",field:"food_onhand",label:"OnHand",help_text:"OnHand_help"},ignore_shopping:{form_field:!0,type:"checkbox",field:"ignore_shopping",label:"Ignore_Shopping",help_text:"ignore_shopping_help"},shopping_category:{form_field:!0,type:"lookup",field:"supermarket_category",list:"SHOPPING_CATEGORY",label:"Shopping_Category",allow_create:!0,help_text:"shopping_category_help"},substitute:{form_field:!0,advanced:!0,type:"lookup",multiple:!0,field:"substitute",list:"FOOD",label:"Substitutes",allow_create:!1,help_text:"substitute_help"},substitute_siblings:{form_field:!0,advanced:!0,type:"checkbox",field:"substitute_siblings",label:"substitute_siblings",help_text:"substitute_siblings_help",condition:{field:"parent",value:!0,condition:"field_exists"}},substitute_children:{form_field:!0,advanced:!0,type:"checkbox",field:"substitute_children",label:"substitute_children",help_text:"substitute_children_help",condition:{field:"numchild",value:0,condition:"gt"}},inherit_fields:{form_field:!0,advanced:!0,type:"lookup",multiple:!0,field:"inherit_fields",list:"FOOD_INHERIT_FIELDS",label:"InheritFields",condition:{field:"food_children_exist",value:!0,condition:"preference_equals"},help_text:"InheritFields_help"},child_inherit_fields:{form_field:!0,advanced:!0,type:"lookup",multiple:!0,field:"child_inherit_fields",list:"FOOD_INHERIT_FIELDS",label:"ChildInheritFields",condition:{field:"numchild",value:0,condition:"gt"},help_text:"ChildInheritFields_help"},reset_inherit:{form_field:!0,advanced:!0,type:"checkbox",field:"reset_inherit",label:"reset_children",help_text:"reset_children_help",condition:{field:"numchild",value:0,condition:"gt"}},form_function:"FoodCreateDefault"}},shopping:{params:["id",["id","amount","unit","_delete"]]}}),(0,s.Z)(n,"FOOD_INHERIT_FIELDS",{name:"FoodInherit",apiName:"FoodInheritField"}),(0,s.Z)(n,"KEYWORD",{name:"Keyword",apiName:"Keyword",model_type:i.TREE,paginated:!0,move:!0,merge:!0,badges:{icon:!0},create:{params:[["name","description"]],form:{name:{form_field:!0,type:"text",field:"name",label:"Name",placeholder:""},description:{form_field:!0,type:"text",field:"description",label:"Description",placeholder:"",optional:!0},full_name:{form_field:!0,type:"smalltext",field:"full_name"}}}}),(0,s.Z)(n,"UNIT",{name:"Unit",apiName:"Unit",paginated:!0,create:{params:[["name","plural_name","description","base_unit","open_data_slug"]],form:{show_help:!0,name:{form_field:!0,type:"text",field:"name",label:"Name",placeholder:""},plural_name:{form_field:!0,type:"text",field:"plural_name",label:"Plural name",placeholder:"",optional:!0},description:{form_field:!0,type:"text",field:"description",label:"Description",placeholder:"",optional:!0},base_unit:{form_field:!0,type:"choice",options:[{value:"g",text:"g"},{value:"kg",text:"kg"},{value:"ounce",text:"ounce"},{value:"pound",text:"pound"},{value:"ml",text:"ml"},{value:"l",text:"l"},{value:"fluid_ounce",text:"fluid_ounce"},{value:"us_cup",text:"us_cup"},{value:"pint",text:"pint"},{value:"quart",text:"quart"},{value:"gallon",text:"gallon"},{value:"tbsp",text:"tbsp"},{value:"tsp",text:"tsp"},{value:"imperial_fluid_ounce",text:"imperial_fluid_ounce"},{value:"imperial_pint",text:"imperial_pint"},{value:"imperial_quart",text:"imperial_quart"},{value:"imperial_gallon",text:"imperial_gallon"},{value:"imperial_tbsp",text:"imperial_tbsp"},{value:"imperial_tsp",text:"imperial_tsp"}],field:"base_unit",label:"Base Unit",placeholder:"",optional:!0},open_data_slug:{form_field:!0,type:"text",field:"open_data_slug",disabled:!0,label:"Open_Data_Slug",help_text:"open_data_help_text",optional:!0}}},merge:!0}),(0,s.Z)(n,"SHOPPING_LIST",{name:"Shopping_list",apiName:"ShoppingListEntry",list:{params:["id","checked","supermarket","options"]},create:{params:[["amount","unit","food","checked"]],form:{unit:{form_field:!0,type:"lookup",field:"unit",list:"UNIT",label:"Unit",allow_create:!0},food:{form_field:!0,type:"lookup",field:"food",list:"FOOD",label:"Food",allow_create:!0}}}}),(0,s.Z)(n,"RECIPE_BOOK",{name:"Recipe_Book",apiName:"RecipeBook",create:{params:[["name","description","filter"]],form:{name:{form_field:!0,type:"text",field:"name",label:"Name",placeholder:""},description:{form_field:!0,type:"text",field:"description",label:"Description",placeholder:"",optional:!0},filter:{form_field:!0,type:"lookup",field:"filter",label:"Custom Filter",list:"CUSTOM_FILTER",optional:!0}}}}),(0,s.Z)(n,"SHOPPING_CATEGORY",{name:"Shopping_Category",apiName:"SupermarketCategory",merge:!0,create:{params:[["name","description"]],form:{name:{form_field:!0,type:"text",field:"name",label:"Name",placeholder:""},description:{form_field:!0,type:"text",field:"description",label:"Description",placeholder:"",optional:!0},open_data_slug:{form_field:!0,type:"text",field:"open_data_slug",disabled:!0,label:"Open_Data_Slug",help_text:"open_data_help_text",optional:!0}}}}),(0,s.Z)(n,"SHOPPING_CATEGORY_RELATION",{name:"Shopping_Category_Relation",apiName:"SupermarketCategoryRelation",create:{params:[["category","supermarket","order"]],form:{name:{form_field:!0,type:"text",field:"name",label:"Name",placeholder:""},description:{form_field:!0,type:"text",field:"description",label:"Description",placeholder:""}}}}),(0,s.Z)(n,"SUPERMARKET",{name:"Supermarket",apiName:"Supermarket",ordered_tags:[{field:"category_to_supermarket",label:"category::name",color:"info"}],create:{params:[["name","description","category_to_supermarket"]],form:{show_help:!0,name:{form_field:!0,type:"text",field:"name",label:"Name",placeholder:""},description:{form_field:!0,type:"text",field:"description",label:"Description",placeholder:"",optional:!0},categories:{form_field:!0,type:"lookup",list:"SHOPPING_CATEGORY",list_label:"category::name",ordered:!0,field:"category_to_supermarket",label:"Categories",placeholder:"",optional:!0},open_data_slug:{form_field:!0,type:"text",field:"open_data_slug",disabled:!0,label:"Open_Data_Slug",help_text:"open_data_help_text",optional:!0}},config:{function:"SupermarketWithCategories"}},partialUpdate:{config:{function:"SupermarketWithCategories"}}}),(0,s.Z)(n,"AUTOMATION",{name:"Automation",apiName:"Automation",paginated:!0,list:{header_component:{name:"BetaWarning"},params:["automation_type","page","pageSize","options"]},create:{params:[["name","description","type","param_1","param_2","param_3","order","disabled"]],form:{name:{form_field:!0,type:"text",field:"name",label:"Name",placeholder:""},description:{form_field:!0,type:"text",field:"description",label:"Description",placeholder:"",optional:!0},type:{form_field:!0,type:"choice",options:[{value:"FOOD_ALIAS",text:"Food_Alias"},{value:"UNIT_ALIAS",text:"Unit_Alias"},{value:"KEYWORD_ALIAS",text:"Keyword_Alias"},{value:"NAME_REPLACE",text:"Name_Replace"},{value:"DESCRIPTION_REPLACE",text:"Description_Replace"},{value:"INSTRUCTION_REPLACE",text:"Instruction_Replace"},{value:"FOOD_REPLACE",text:"Food_Replace"},{value:"UNIT_REPLACE",text:"Unit_Replace"},{value:"NEVER_UNIT",text:"Never_Unit"},{value:"TRANSPOSE_WORDS",text:"Transpose_Words"}],field:"type",label:"Type",placeholder:""},param_1:{form_field:!0,type:"text",field:"param_1",label:{function:"translate",phrase:"parameter_count",params:[{token:"count",attribute:"1"}]},placeholder:""},param_2:{form_field:!0,type:"text",field:"param_2",label:{function:"translate",phrase:"parameter_count",params:[{token:"count",attribute:"2"}]},placeholder:""},param_3:{form_field:!0,type:"text",field:"param_3",label:{function:"translate",phrase:"parameter_count",params:[{token:"count",attribute:"3"}]},placeholder:""},order:{form_field:!0,type:"number",field:"order",label:"Order",placeholder:0},disabled:{form_field:!0,type:"checkbox",field:"disabled",label:"Disabled",placeholder:""},form_function:"AutomationOrderDefault"}}}),(0,s.Z)(n,"UNIT_CONVERSION",{name:"Unit Conversion",apiName:"UnitConversion",paginated:!1,list:{header_component:{name:"BetaWarning"}},create:{params:[["food","base_amount","base_unit","converted_amount","converted_unit","open_data_slug"]],form:{show_help:!0,food:{form_field:!0,type:"lookup",field:"food",list:"FOOD",list_label:"name",label:"Food",multiple:!1},base_amount:{form_field:!0,type:"text",field:"base_amount",label:"base_amount",placeholder:""},base_unit:{form_field:!0,type:"lookup",field:"base_unit",list:"UNIT",list_label:"name",label:"base_unit",multiple:!1},converted_amount:{form_field:!0,type:"text",field:"converted_amount",label:"converted_amount",placeholder:""},converted_unit:{form_field:!0,type:"lookup",field:"converted_unit",list:"UNIT",list_label:"name",label:"converted_unit",multiple:!1},open_data_slug:{form_field:!0,type:"text",field:"open_data_slug",disabled:!0,label:"Open_Data_Slug",help_text:"open_data_help_text",optional:!0}}}}),(0,s.Z)(n,"PROPERTY_TYPE",{name:"Property Type",apiName:"PropertyType",paginated:!1,list:{header_component:{name:"BetaWarning"}},create:{params:[["name","unit","description","order","fdc_id"]],form:{show_help:!0,name:{form_field:!0,type:"text",field:"name",label:"Name",placeholder:""},unit:{form_field:!0,type:"text",field:"unit",label:"Unit",placeholder:"",optional:!0},description:{form_field:!0,type:"text",field:"description",label:"Description",placeholder:"",optional:!0},order:{form_field:!0,type:"number",field:"order",label:"Order",placeholder:"",optional:!0,help_text:"OrderInformation"},fdc_id:{form_field:!0,type:"choice",options:[{value:1002,text:"Nitrogen [g] (1002)"},{value:1003,text:"Protein [g] (1003)"},{value:1004,text:"Total lipid (fat) [g] (1004)"},{value:1005,text:"Carbohydrate, by difference [g] (1005)"},{value:1007,text:"Ash [g] (1007)"},{value:1008,text:"Energy [kcal] (1008)"},{value:1009,text:"Starch [g] (1009)"},{value:1010,text:"Sucrose [g] (1010)"},{value:1011,text:"Glucose [g] (1011)"},{value:1012,text:"Fructose [g] (1012)"},{value:1013,text:"Lactose [g] (1013)"},{value:1014,text:"Maltose [g] (1014)"},{value:1024,text:"Specific Gravity [sp gr] (1024)"},{value:1032,text:"Citric acid [mg] (1032)"},{value:1039,text:"Malic acid [mg] (1039)"},{value:1041,text:"Oxalic acid [mg] (1041)"},{value:1043,text:"Pyruvic acid [mg] (1043)"},{value:1044,text:"Quinic acid [mg] (1044)"},{value:1050,text:"Carbohydrate, by summation [g] (1050)"},{value:1051,text:"Water [g] (1051)"},{value:1062,text:"Energy [kJ] (1062)"},{value:1063,text:"Sugars, Total [g] (1063)"},{value:1075,text:"Galactose [g] (1075)"},{value:1076,text:"Raffinose [g] (1076)"},{value:1077,text:"Stachyose [g] (1077)"},{value:1079,text:"Fiber, total dietary [g] (1079)"},{value:1082,text:"Fiber, soluble [g] (1082)"},{value:1084,text:"Fiber, insoluble [g] (1084)"},{value:1085,text:"Total fat (NLEA) [g] (1085)"},{value:1087,text:"Calcium, Ca [mg] (1087)"},{value:1089,text:"Iron, Fe [mg] (1089)"},{value:1090,text:"Magnesium, Mg [mg] (1090)"},{value:1091,text:"Phosphorus, P [mg] (1091)"},{value:1092,text:"Potassium, K [mg] (1092)"},{value:1093,text:"Sodium, Na [mg] (1093)"},{value:1094,text:"Sulfur, S [mg] (1094)"},{value:1095,text:"Zinc, Zn [mg] (1095)"},{value:1097,text:"Cobalt, Co [Âµg] (1097)"},{value:1098,text:"Copper, Cu [mg] (1098)"},{value:1100,text:"Iodine, I [Âµg] (1100)"},{value:1101,text:"Manganese, Mn [mg] (1101)"},{value:1102,text:"Molybdenum, Mo [Âµg] (1102)"},{value:1103,text:"Selenium, Se [Âµg] (1103)"},{value:1105,text:"Retinol [Âµg] (1105)"},{value:1106,text:"Vitamin A, RAE [Âµg] (1106)"},{value:1107,text:"Carotene, beta [Âµg] (1107)"},{value:1108,text:"Carotene, alpha [Âµg] (1108)"},{value:1109,text:"Vitamin E (alpha-tocopherol) [mg] (1109)"},{value:1110,text:"Vitamin D (D2 + D3), International Units [IU] (1110)"},{value:1111,text:"Vitamin D2 (ergocalciferol) [Âµg] (1111)"},{value:1112,text:"Vitamin D3 (cholecalciferol) [Âµg] (1112)"},{value:1113,text:"25-hydroxycholecalciferol [Âµg] (1113)"},{value:1114,text:"Vitamin D (D2 + D3) [Âµg] (1114)"},{value:1116,text:"Phytoene [Âµg] (1116)"},{value:1117,text:"Phytofluene [Âµg] (1117)"},{value:1118,text:"Carotene, gamma [Âµg] (1118)"},{value:1119,text:"Zeaxanthin [Âµg] (1119)"},{value:1120,text:"Cryptoxanthin, beta [Âµg] (1120)"},{value:1121,text:"Lutein [Âµg] (1121)"},{value:1122,text:"Lycopene [Âµg] (1122)"},{value:1123,text:"Lutein + zeaxanthin [Âµg] (1123)"},{value:1125,text:"Tocopherol, beta [mg] (1125)"},{value:1126,text:"Tocopherol, gamma [mg] (1126)"},{value:1127,text:"Tocopherol, delta [mg] (1127)"},{value:1128,text:"Tocotrienol, alpha [mg] (1128)"},{value:1129,text:"Tocotrienol, beta [mg] (1129)"},{value:1130,text:"Tocotrienol, gamma [mg] (1130)"},{value:1131,text:"Tocotrienol, delta [mg] (1131)"},{value:1137,text:"Boron, B [Âµg] (1137)"},{value:1146,text:"Nickel, Ni [Âµg] (1146)"},{value:1159,text:"cis-beta-Carotene [Âµg] (1159)"},{value:1160,text:"cis-Lycopene [Âµg] (1160)"},{value:1161,text:"cis-Lutein/Zeaxanthin [Âµg] (1161)"},{value:1162,text:"Vitamin C, total ascorbic acid [mg] (1162)"},{value:1165,text:"Thiamin [mg] (1165)"},{value:1166,text:"Riboflavin [mg] (1166)"},{value:1167,text:"Niacin [mg] (1167)"},{value:1170,text:"Pantothenic acid [mg] (1170)"},{value:1175,text:"Vitamin B-6 [mg] (1175)"},{value:1176,text:"Biotin [Âµg] (1176)"},{value:1177,text:"Folate, total [Âµg] (1177)"},{value:1178,text:"Vitamin B-12 [Âµg] (1178)"},{value:1180,text:"Choline, total [mg] (1180)"},{value:1183,text:"Vitamin K (Menaquinone-4) [Âµg] (1183)"},{value:1184,text:"Vitamin K (Dihydrophylloquinone) [Âµg] (1184)"},{value:1185,text:"Vitamin K (phylloquinone) [Âµg] (1185)"},{value:1188,text:"5-methyl tetrahydrofolate (5-MTHF) [Âµg] (1188)"},{value:1191,text:"10-Formyl folic acid (10HCOFA) [Âµg] (1191)"},{value:1192,text:"5-Formyltetrahydrofolic acid (5-HCOH4 [Âµg] (1192)"},{value:1194,text:"Choline, free [mg] (1194)"},{value:1195,text:"Choline, from phosphocholine [mg] (1195)"},{value:1196,text:"Choline, from phosphotidyl choline [mg] (1196)"},{value:1197,text:"Choline, from glycerophosphocholine [mg] (1197)"},{value:1198,text:"Betaine [mg] (1198)"},{value:1199,text:"Choline, from sphingomyelin [mg] (1199)"},{value:1210,text:"Tryptophan [g] (1210)"},{value:1211,text:"Threonine [g] (1211)"},{value:1212,text:"Isoleucine [g] (1212)"},{value:1213,text:"Leucine [g] (1213)"},{value:1214,text:"Lysine [g] (1214)"},{value:1215,text:"Methionine [g] (1215)"},{value:1216,text:"Cystine [g] (1216)"},{value:1217,text:"Phenylalanine [g] (1217)"},{value:1218,text:"Tyrosine [g] (1218)"},{value:1219,text:"Valine [g] (1219)"},{value:1220,text:"Arginine [g] (1220)"},{value:1221,text:"Histidine [g] (1221)"},{value:1222,text:"Alanine [g] (1222)"},{value:1223,text:"Aspartic acid [g] (1223)"},{value:1224,text:"Glutamic acid [g] (1224)"},{value:1225,text:"Glycine [g] (1225)"},{value:1226,text:"Proline [g] (1226)"},{value:1227,text:"Serine [g] (1227)"},{value:1228,text:"Hydroxyproline [g] (1228)"},{value:1232,text:"Cysteine [g] (1232)"},{value:1253,text:"Cholesterol [mg] (1253)"},{value:1257,text:"Fatty acids, total trans [g] (1257)"},{value:1258,text:"Fatty acids, total saturated [g] (1258)"},{value:1259,text:"SFA 4:0 [g] (1259)"},{value:1260,text:"SFA 6:0 [g] (1260)"},{value:1261,text:"SFA 8:0 [g] (1261)"},{value:1262,text:"SFA 10:0 [g] (1262)"},{value:1263,text:"SFA 12:0 [g] (1263)"},{value:1264,text:"SFA 14:0 [g] (1264)"},{value:1265,text:"SFA 16:0 [g] (1265)"},{value:1266,text:"SFA 18:0 [g] (1266)"},{value:1267,text:"SFA 20:0 [g] (1267)"},{value:1268,text:"MUFA 18:1 [g] (1268)"},{value:1269,text:"PUFA 18:2 [g] (1269)"},{value:1270,text:"PUFA 18:3 [g] (1270)"},{value:1271,text:"PUFA 20:4 [g] (1271)"},{value:1272,text:"PUFA 22:6 n-3 (DHA) [g] (1272)"},{value:1273,text:"SFA 22:0 [g] (1273)"},{value:1276,text:"PUFA 18:4 [g] (1276)"},{value:1277,text:"MUFA 20:1 [g] (1277)"},{value:1278,text:"PUFA 20:5 n-3 (EPA) [g] (1278)"},{value:1279,text:"MUFA 22:1 [g] (1279)"},{value:1280,text:"PUFA 22:5 n-3 (DPA) [g] (1280)"},{value:1281,text:"TFA 14:1 t [g] (1281)"},{value:1284,text:"Ergosterol [mg] (1284)"},{value:1285,text:"Stigmasterol [mg] (1285)"},{value:1286,text:"Campesterol [mg] (1286)"},{value:1287,text:"Brassicasterol [mg] (1287)"},{value:1288,text:"Beta-sitosterol [mg] (1288)"},{value:1289,text:"Campestanol [mg] (1289)"},{value:1292,text:"Fatty acids, total monounsaturated [g] (1292)"},{value:1293,text:"Fatty acids, total polyunsaturated [g] (1293)"},{value:1294,text:"Beta-sitostanol [mg] (1294)"},{value:1296,text:"Delta-5-avenasterol [mg] (1296)"},{value:1298,text:"Phytosterols, other [mg] (1298)"},{value:1299,text:"SFA 15:0 [g] (1299)"},{value:1300,text:"SFA 17:0 [g] (1300)"},{value:1301,text:"SFA 24:0 [g] (1301)"},{value:1303,text:"TFA 16:1 t [g] (1303)"},{value:1304,text:"TFA 18:1 t [g] (1304)"},{value:1305,text:"TFA 22:1 t [g] (1305)"},{value:1306,text:"TFA 18:2 t not further defined [g] (1306)"},{value:1311,text:"PUFA 18:2 CLAs [g] (1311)"},{value:1312,text:"MUFA 24:1 c [g] (1312)"},{value:1313,text:"PUFA 20:2 n-6 c,c [g] (1313)"},{value:1314,text:"MUFA 16:1 c [g] (1314)"},{value:1315,text:"MUFA 18:1 c [g] (1315)"},{value:1316,text:"PUFA 18:2 n-6 c,c [g] (1316)"},{value:1317,text:"MUFA 22:1 c [g] (1317)"},{value:1321,text:"PUFA 18:3 n-6 c,c,c [g] (1321)"},{value:1323,text:"MUFA 17:1 [g] (1323)"},{value:1325,text:"PUFA 20:3 [g] (1325)"},{value:1329,text:"Fatty acids, total trans-monoenoic [g] (1329)"},{value:1330,text:"Fatty acids, total trans-dienoic [g] (1330)"},{value:1331,text:"Fatty acids, total trans-polyenoic [g] (1331)"},{value:1333,text:"MUFA 15:1 [g] (1333)"},{value:1334,text:"PUFA 22:2 [g] (1334)"},{value:1335,text:"SFA 11:0 [g] (1335)"},{value:1340,text:"Daidzein [mg] (1340)"},{value:1341,text:"Genistein [mg] (1341)"},{value:1404,text:"PUFA 18:3 n-3 c,c,c (ALA) [g] (1404)"},{value:1405,text:"PUFA 20:3 n-3 [g] (1405)"},{value:1406,text:"PUFA 20:3 n-6 [g] (1406)"},{value:1409,text:"PUFA 18:3i [g] (1409)"},{value:1411,text:"PUFA 22:4 [g] (1411)"},{value:1414,text:"PUFA 20:3 n-9 [g] (1414)"},{value:2e3,text:"Sugars, total including NLEA [g] (2000)"},{value:2003,text:"SFA 5:0 [g] (2003)"},{value:2004,text:"SFA 7:0 [g] (2004)"},{value:2005,text:"SFA 9:0 [g] (2005)"},{value:2006,text:"SFA 21:0 [g] (2006)"},{value:2007,text:"SFA 23:0 [g] (2007)"},{value:2008,text:"MUFA 12:1 [g] (2008)"},{value:2009,text:"MUFA 14:1 c [g] (2009)"},{value:2010,text:"MUFA 17:1 c [g] (2010)"},{value:2012,text:"MUFA 20:1 c [g] (2012)"},{value:2013,text:"TFA 20:1 t [g] (2013)"},{value:2014,text:"MUFA 22:1 n-9 [g] (2014)"},{value:2015,text:"MUFA 22:1 n-11 [g] (2015)"},{value:2016,text:"PUFA 18:2 c [g] (2016)"},{value:2017,text:"TFA 18:2 t [g] (2017)"},{value:2018,text:"PUFA 18:3 c [g] (2018)"},{value:2019,text:"TFA 18:3 t [g] (2019)"},{value:2020,text:"PUFA 20:3 c [g] (2020)"},{value:2021,text:"PUFA 22:3 [g] (2021)"},{value:2022,text:"PUFA 20:4c [g] (2022)"},{value:2023,text:"PUFA 20:5c [g] (2023)"},{value:2024,text:"PUFA 22:5 c [g] (2024)"},{value:2025,text:"PUFA 22:6 c [g] (2025)"},{value:2026,text:"PUFA 20:2 c [g] (2026)"},{value:2028,text:"trans-beta-Carotene [Âµg] (2028)"},{value:2029,text:"trans-Lycopene [Âµg] (2029)"},{value:2032,text:"Cryptoxanthin, alpha [Âµg] (2032)"},{value:2033,text:"Total dietary fiber (AOAC 2011.25) [g] (2033)"},{value:2038,text:"High Molecular Weight Dietary Fiber (HMWDF) [g] (2038)"},{value:2047,text:"Energy (Atwater General Factors) [kcal] (2047)"},{value:2048,text:"Energy (Atwater Specific Factors) [kcal] (2048)"},{value:2049,text:"Daidzin [mg] (2049)"},{value:2050,text:"Genistin [mg] (2050)"},{value:2051,text:"Glycitin [mg] (2051)"},{value:2052,text:"Delta-7-Stigmastenol [mg] (2052)"},{value:2053,text:"Stigmastadiene [mg] (2053)"},{value:2057,text:"Ergothioneine [mg] (2057)"},{value:2058,text:"Beta-glucan [g] (2058)"},{value:2059,text:"Vitamin D4 [Âµg] (2059)"},{value:2060,text:"Ergosta-7-enol [mg] (2060)"},{value:2061,text:" Ergosta-7,22-dienol [mg] (2061)"},{value:2062,text:" Ergosta-5,7-dienol [mg] (2062)"},{value:2063,text:"Verbascose [g] (2063)"},{value:2065,text:"Low Molecular Weight Dietary Fiber (LMWDF) [g] (2065)"},{value:2066,text:"Vitamin A [mg] (2066)"},{value:2069,text:"Glutathione [mg] (2069)"}],field:"fdc_id",label:"FDC_ID",help_text:"FDC_ID_help",optional:!0},open_data_slug:{form_field:!0,type:"text",field:"open_data_slug",disabled:!0,label:"Open_Data_Slug",help_text:"open_data_help_text",optional:!0}}}}),(0,s.Z)(n,"RECIPE",{name:"Recipe",apiName:"Recipe",list:{params:["query","keywords","keywords_or","keywords_and","keywords_or_not","keywords_and_not","foods","foods_or","foods_and","foods_or_not","foods_and_not","units","rating","books","books_or","books_and","books_or_not","books_and_not","internal","random","_new","timescooked","cookedon","createdon","updatedon","viewedon","makenow","page","pageSize","options"]},shopping:{params:["id",["id","list_recipe","ingredients","servings"]]}}),(0,s.Z)(n,"CUSTOM_FILTER",{name:"Custom Filter",apiName:"CustomFilter",paginated:!0,create:{params:[["name","search","shared"]],form:{name:{form_field:!0,type:"text",field:"name",label:"Name",placeholder:""},shared:{form_field:!0,type:"lookup",field:"shared",list:"USER",list_label:"display_name",label:"shared_with",multiple:!0}}},list:{params:["page","pageSize","options"]}}),(0,s.Z)(n,"USER_NAME",{name:"User",apiName:"User",list:{params:["filter_list"]}}),(0,s.Z)(n,"MEAL_TYPE",{name:"Meal_Type",apiName:"MealType",list:{params:["filter_list"]},create:{params:[["name","color","default"]],form:{name:{form_field:!0,type:"text",field:"name",label:"Name",placeholder:""},color:{form_field:!0,type:"color",field:"color",label:"Color",placeholder:""},default:{form_field:!0,type:"checkbox",field:"default",label:"Default",placeholder:""}}}}),(0,s.Z)(n,"MEAL_PLAN",{name:"Meal_Plan",apiName:"MealPlan",list:{params:["options"]}}),(0,s.Z)(n,"USERFILE",{name:"File",apiName:"UserFile",paginated:!1,list:{header_component:{name:"StorageQuota"}},create:{params:["name","file"],form:{name:{form_field:!0,type:"text",field:"name",label:"Name",placeholder:""},file:{form_field:!0,type:"file",field:"file",label:"File",placeholder:""}}}}),(0,s.Z)(n,"INVITE_LINK",{name:"InviteLink",apiName:"InviteLink",paginated:!1,create:{params:[["email","group","valid_until","reusable","internal_note"]],form:{group:{form_field:!0,type:"lookup",field:"group",list:"GROUP",list_label:"name",label:"Group",placeholder:""},valid_until:{form_field:!0,type:"date",field:"valid_until",label:"Valid Until",placeholder:""},email:{form_field:!0,type:"text",field:"email",label:"Email",placeholder:"",optional:!0},reusable:{form_field:!0,type:"checkbox",field:"reusable",label:"Reusable",help_text:"reusable_help_text",placeholder:""},internal_note:{form_field:!0,type:"textarea",field:"internal_note",label:"Note",placeholder:"",optional:!0},form_function:"InviteLinkDefaultValid"}}}),(0,s.Z)(n,"ACCESS_TOKEN",{name:"AccessToken",apiName:"AccessToken",paginated:!1,create:{params:[["scope","expires"]],form:{scope:{form_field:!0,type:"text",field:"scope",label:"Scope",placeholder:""},expires:{form_field:!0,type:"date",field:"expires",label:"expires",placeholder:""}}}}),(0,s.Z)(n,"USER",{name:"User",apiName:"User",paginated:!1}),(0,s.Z)(n,"GROUP",{name:"Group",apiName:"Group",paginated:!1}),(0,s.Z)(n,"STEP",{name:"Step",apiName:"Step",paginated:!0,list:{params:["recipe","query","page","pageSize","options"]}});class o{}(0,s.Z)(o,"CREATE",{function:"create",form:{title:{function:"translate",phrase:"create_title",params:[{token:"type",from:"model",attribute:"name",translate:!0}]},ok_label:{function:"translate",phrase:"Save"}}}),(0,s.Z)(o,"UPDATE",{function:"partialUpdate",form_title:{function:"translate",phrase:"edit_title",params:[{token:"type",from:"model",attribute:"name",translate:!0}]}}),(0,s.Z)(o,"DELETE",{function:"destroy",params:["id"],form:{title:{function:"translate",phrase:"delete_title",params:[{token:"type",from:"model",attribute:"name",translate:!0}]},ok_label:{function:"translate",phrase:"Delete"},instruction:{form_field:!0,type:"instruction",label:{function:"translate",phrase:"delete_confirmation",params:[{token:"source",from:"item1",attribute:"name"}]}}}}),(0,s.Z)(o,"FETCH",{function:"retrieve",params:["id"]}),(0,s.Z)(o,"LIST",{function:"list",suffix:"s",params:["query","page","pageSize","options"],config:{query:{default:void 0},page:{default:1},pageSize:{default:25}}}),(0,s.Z)(o,"MERGE",{function:"merge",params:["source","target"],config:{source:{type:"string"},target:{type:"string"}},form:{title:{function:"translate",phrase:"merge_title",params:[{token:"type",from:"model",attribute:"name",translate:!0}]},ok_label:{function:"translate",phrase:"Merge"},instruction:{form_field:!0,type:"instruction",label:{function:"translate",phrase:"merge_selection",params:[{token:"source",from:"item1",attribute:"name"},{token:"type",from:"model",attribute:"name",translate:!0}]}},target:{form_field:!0,type:"lookup",field:"target",list:"self"}}}),(0,s.Z)(o,"MOVE",{function:"move",params:["source","target"],config:{source:{type:"string"},target:{type:"string"}},form:{title:{function:"translate",phrase:"move_title",params:[{token:"type",from:"model",attribute:"name",translate:!0}]},ok_label:{function:"translate",phrase:"Move"},instruction:{form_field:!0,type:"instruction",label:{function:"translate",phrase:"move_selection",params:[{token:"source",from:"item1",attribute:"name"},{token:"type",from:"model",attribute:"name",translate:!0}]}},target:{form_field:!0,type:"lookup",field:"target",list:"self"}}}),(0,s.Z)(o,"SHOPPING",{function:"shopping"})},49665:function(e,t,a){"use strict";a.d(t,{ApiMixin:function(){return k},EscapeCSSMixin:function(){return v},ResolveUrlMixin:function(){return h},StandardToasts:function(){return u},ToastMixin:function(){return d},calculateAmount:function(){return g},calculateHourMinuteSplit:function(){return y},djangoGettext:function(){return _},makeToast:function(){return p},resolveDjangoUrl:function(){return m}});var i=a(61369),s=(a(57658),a(72081)),n=a(98342),o=a(6955),r=a(5121),l=a(10575),c=(a(70538),a(7321));a(30381);const d={name:"ToastMixin",methods:{makeToast:function(e,t,a=null){return p(e,t,a)}}};function p(e,t,a=null){let i=new l.K;i.$bvToast.toast(t,{title:e,variant:a,toaster:"b-toaster-bottom-right",solid:!0})}class u{static makeStandardToast(e,t,a=void 0,i=!1){let n="",o="",r="";switch(t){case u.SUCCESS_CREATE:r="success",n=s.Z.tc("Success"),o=s.Z.tc("success_creating_resource");break;case u.SUCCESS_FETCH:r="success",n=s.Z.tc("Success"),o=s.Z.tc("success_fetching_resource");break;case u.SUCCESS_UPDATE:r="success",n=s.Z.tc("Success"),o=s.Z.tc("success_updating_resource");break;case u.SUCCESS_DELETE:r="success",n=s.Z.tc("Success"),o=s.Z.tc("success_deleting_resource");break;case u.SUCCESS_MOVE:r="success",n=s.Z.tc("Success"),o=s.Z.tc("success_moving_resource");break;case u.SUCCESS_MERGE:r="success",n=s.Z.tc("Success"),o=s.Z.tc("success_merging_resource");break;case u.FAIL_CREATE:r="danger",n=s.Z.tc("Failure"),o=s.Z.tc("err_creating_resource");break;case u.FAIL_FETCH:r="danger",n=s.Z.tc("Failure"),o=s.Z.tc("err_fetching_resource");break;case u.FAIL_UPDATE:r="danger",n=s.Z.tc("Failure"),o=s.Z.tc("err_updating_resource");break;case u.FAIL_DELETE:r="danger",n=s.Z.tc("Failure"),o=s.Z.tc("err_deleting_resource");break;case u.FAIL_DELETE_PROTECTED:r="danger",n=s.Z.tc("Failure"),o=s.Z.tc("err_deleting_protected_resource");break;case u.FAIL_MOVE:r="danger",n=s.Z.tc("Failure"),o=s.Z.tc("err_moving_resource");break;case u.FAIL_MERGE:r="danger",n=s.Z.tc("Failure"),o=s.Z.tc("err_merging_resource");break;case u.FAIL_IMPORT:r="danger",n=s.Z.tc("Failure"),o=s.Z.tc("err_importing_recipe");break}let c=("True"===localStorage.getItem("DEBUG")||i)&&"success"!==r;if(c&&(console.log("ERROR ",a,JSON.stringify(a?.response?.data)),console.trace()),void 0!==a&&"response"in a&&"headers"in a.response&&"application/json"===a.response.headers["content-type"]&&a.response.status<500&&a.response.data&&(c||a.response.data.msg)){const t=a.response.data.msg?a.response.data.msg:JSON.stringify(a.response.data);o=e.$createElement("div",{},[e.$createElement("span",{},[o]),e.$createElement("br",{},[]),e.$createElement("code",{class:"mt-2"},[t])])}let d=new l.K;d.$bvToast.toast(o,{title:n,variant:r,toaster:"b-toaster-bottom-right",solid:!0})}}(0,i.Z)(u,"SUCCESS_CREATE","SUCCESS_CREATE"),(0,i.Z)(u,"SUCCESS_FETCH","SUCCESS_FETCH"),(0,i.Z)(u,"SUCCESS_UPDATE","SUCCESS_UPDATE"),(0,i.Z)(u,"SUCCESS_DELETE","SUCCESS_DELETE"),(0,i.Z)(u,"SUCCESS_MOVE","SUCCESS_MOVE"),(0,i.Z)(u,"SUCCESS_MERGE","SUCCESS_MERGE"),(0,i.Z)(u,"FAIL_CREATE","FAIL_CREATE"),(0,i.Z)(u,"FAIL_FETCH","FAIL_FETCH"),(0,i.Z)(u,"FAIL_UPDATE","FAIL_UPDATE"),(0,i.Z)(u,"FAIL_DELETE","FAIL_DELETE"),(0,i.Z)(u,"FAIL_DELETE_PROTECTED","FAIL_DELETE_PROTECTED"),(0,i.Z)(u,"FAIL_MOVE","FAIL_MOVE"),(0,i.Z)(u,"FAIL_MERGE","FAIL_MERGE"),(0,i.Z)(u,"FAIL_IMPORT","FAIL_IMPORT");function _(e){return window.gettext(e)}const h={methods:{resolveDjangoUrl:function(e,t=null){return m(e,t)}}};function m(e,t=null){let a=window.Urls[e];if("function"===typeof a){if(null==t)return a();if("object"!=typeof t)return a(t);if("object"==typeof t){if(1===t.length)return a(t);if(2===t.length)return a(t[0],t[1]);if(3===t.length)return a(t[0],t[1],t[2])}}else console.error(`window.Urls[${e}] is not a function: ${a}`)}function f(e=void 0){let t;if(document.getElementById("user_preference"))return t=JSON.parse(document.getElementById("user_preference").textContent),e?t?.[e]:t}function g(e,t){if(f("use_fractions")){let a="",i=(0,n.F)(e*t,16,!0);return 0===i[0]&&0===i[1]&&1===i[2]?b(e*t):(i[0]>0&&(a+=i[0]),i[1]>0&&(a+=` <sup>${i[1]}</sup>&frasl;<sub>${i[2]}</sub>`),a)}return b(e*t)}const v={methods:{escapeCSS:function(e){return CSS.escape(e.replace(/\s+/g,"-").toLowerCase())}}};function b(e){let t=f("user_fractions")?f("user_fractions"):2;return+(Math.round(e+`e+${t}`)+`e-${t}`)}function y(e){if(e>=60){let t=Math.floor(e/60),a=e-60*t,i=t+" h";return a>0&&(i+=" "+a+" min"),i}return e+" min"}r.Z.defaults.xsrfCookieName="csrftoken",r.Z.defaults.xsrfHeaderName="X-CSRFTOKEN";const k={data(){return{Models:c.k,Actions:c.e}},methods:{genericAPI:function(e,t,a){let i=S(e,t);if(i?.config?.function)return E[i.config.function](t,a,i);let s=i.function,n=w(a,i),r=new o.ApiApiFactory;return void 0!==e.apiClient&&(r=e.apiClient),r[s](...n)},genericGetAPI:function(e,t){return r.Z.get(m(e),{params:t,emulateJSON:!0})},genericPostAPI:function(e,t){let a=new FormData;return Object.keys(t).forEach((e=>{a.append(e,t[e])})),r.Z.post(m(e),a)}}};function x(e,t,a){if(e)for(const[i,s]of Object.entries(e))switch(i){case"type":switch(s){case"string":if(Array.isArray(t)){let e=[];t.forEach((t=>e.push(String(t)))),t=e}else void 0!==t&&(t=String(t));break;case"integer":if(Array.isArray(t)){let e=[];t.forEach((t=>e.push(parseInt(t)))),t=e}else void 0!==t&&(t=parseInt(t));break}break;case"function":E[s](t,a);break}return t}function w(e,t){let a,i=t?.config??{},s=t?.params??[],n=[];return s.forEach((function(t,s){if(Array.isArray(t)){a={};for(const[s,n]of Object.entries(e))t.includes(s)&&(a[s]=x(i?.[s],n,e))}else a=x(i?.[t],e?.[t]??void 0,e);void 0===a&&(a=C(i?.[t],e)),n.push(a)})),n}function C(e,t){let a;if(a=e?.default??void 0,"object"===typeof a){let e=!1;switch(a.function){case"CONDITIONAL":switch(a.operator){case"not_exist":e=(!t?.[a.check]??void 0)||0==t?.[a.check]?.length,a=e?a.true:a.false;break}break}}return a}function S(e,t){let a=t.function;"partialUpdate"!==a||e?.[a]?.params||(e[a]={params:["id",...e.create.params]});let i={name:s.Z.t(e.name),apiName:e.apiName};return i={...i,...t,...e.model_type?.[a],...e?.[a]},i.config={...t?.config,...e.model_type?.[a]?.config,...e?.[a]?.config},"partialUpdate"===a&&0===Object.keys(i.config).length&&(i.config={...e.model_type?.create?.config,...e?.create?.config}),i["function"]=a+i.apiName+(i?.suffix??""),i}const E={SupermarketWithCategories:function(e,t,a){let i,s=k.methods.genericAPI,n=[];return"partialUpdate"===e.function?(i=s,n=[c.k.SUPERMARKET,c.e.FETCH,{id:t.id}]):"create"===e.function&&(i=(new o.ApiApiFactory)[a.function],n=w(t,a)),i(...n).then((e=>e.data)).then((e=>{let a=e.id,i=e.category_to_supermarket,n=t.category_to_supermarket.map((e=>({...e,category:{id:e?.category?.id??e.id,name:e?.category?.name??e.name},id:e?.category_to_supermarket__id,order:e?.order??e?.category_to_supermarket__order}))),o=[],r=i.filter((e=>!n.map((e=>e.category.id)).includes(e.category.id))),l=n.filter((e=>!i.map((e=>e.category.id)).includes(e.category.id))),d=n.filter((e=>i.map((e=>e.category.id)).includes(e.category.id))),p=Math.max(...i.map((e=>e?.order??0)),...n.map((e=>e?.order??0)),0)+1;r.forEach((e=>{o.push(s(c.k.SHOPPING_CATEGORY_RELATION,c.e.DELETE,{id:e.id}))}));let u={supermarket:a};return l.forEach((e=>{u.order=e?.order??p,e?.order||(p+=1),u.category={id:e.category.id,name:e.category.name},o.push(s(c.k.SHOPPING_CATEGORY_RELATION,c.e.CREATE,u))})),d.forEach((e=>{u.id=e?.id??i.find((t=>t.category.id===e.category.id)).id,u.order=e?.order??p,e?.order||(p+=1),u.category={id:e.category.id,name:e.category.name},o.push(s(c.k.SHOPPING_CATEGORY_RELATION,c.e.UPDATE,u))})),Promise.all(o).then((()=>s(c.k.SUPERMARKET,c.e.FETCH,{id:a})))}))}}},87503:function(e,t,a){"use strict";a.d(t,{default:function(){return h}});var i=function(){var e=this,t=e._self._c;return t("div",[t("b-modal",{staticClass:"modal",attrs:{id:`id_modal_cook_log_${e.modal_id}`,title:e.$t("Log_Recipe_Cooking"),"ok-title":e.$t("Save"),"cancel-title":e.$t("Close")},on:{ok:function(t){return e.logCook()}}},[t("p",[e._v(e._s(e.$t("all_fields_optional")))]),t("form",[t("label",{attrs:{for:"id_log_servings"}},[e._v(e._s(e.$t("Servings")))]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.logObject.servings,expression:"logObject.servings"}],staticClass:"form-control",attrs:{type:"number",id:"id_log_servings"},domProps:{value:e.logObject.servings},on:{input:function(t){t.target.composing||e.$set(e.logObject,"servings",t.target.value)}}}),t("label",{staticStyle:{"margin-top":"2vh"}},[e._v(e._s(e.$t("Rating"))+" - "),t("span",{attrs:{id:"id_rating_show"}},[e._v(e._s(e.logObject.rating)+"/5")])]),t("b-form-rating",{model:{value:e.logObject.rating,callback:function(t){e.$set(e.logObject,"rating",t)},expression:"logObject.rating"}}),t("label",{staticStyle:{"margin-top":"2vh"},attrs:{for:"id_date"}},[e._v(e._s(e.$t("Date")))]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.logObject.created_at,expression:"logObject.created_at"}],staticClass:"form-control",attrs:{type:"datetime-local",id:"id_date"},domProps:{value:e.logObject.created_at},on:{input:function(t){t.target.composing||e.$set(e.logObject,"created_at",t.target.value)}}})],1)])],1)},s=[],n=a(30381),o=a.n(n),r=a(70538),l=a(12120),c=a(36502);r["default"].prototype.moment=o(),r["default"].use(l.XG7);var d={name:"CookLog",props:{recipe:Object,modal_id:Number},data(){return{logObject:{recipe:this.recipe.id,servings:0,rating:0,created_at:o()().format("yyyy-MM-DDTHH:mm")}}},methods:{logCook:function(){(0,c.YI)(this.logObject)}}},p=d,u=a(1001),_=(0,u.Z)(p,i,s,!1,null,null,null),h=_.exports},26678:function(e,t,a){"use strict";var i=a(89271),s=a(47331),n=a(1001),o=(0,n.Z)(s.Z,i.s,i.x,!1,null,"4a8e4aeb",null);t["default"]=o.exports},40841:function(e,t,a){"use strict";a.d(t,{default:function(){return _}});var i=function(){var e=this,t=e._self._c;return t("tr",{staticClass:"ingredients__item"},[e.ingredient.is_header?[t("td",{staticClass:"ingredients__header-note header",attrs:{colspan:"5"},on:{click:e.done}},[t("b",[e._v(e._s(e.ingredient.note))])])]:[e.detailed?t("td",{staticClass:"ingredients__check d-print-none align-baseline py-2",on:{click:e.done}},[e.ingredient.checked?t("i",{staticClass:"ingredients__check ingredients__check_checked far fa-check-circle text-success"}):e._e(),e.ingredient.checked?e._e():t("i",{staticClass:"ingredients__check ingredients__check_checked_false far fa-check-circle text-primary"})]):e._e(),t("td",{staticClass:"ingredients__amount text-nowrap",on:{click:e.done}},[0===e.ingredient.amount||e.ingredient.no_amount?e._e():t("span",{staticClass:"ingredients__amount",class:e.amountClass,domProps:{innerHTML:e._s(e.amount)}})]),t("td",{staticClass:"ingredients__unit",on:{click:e.done}},[null===e.ingredient.unit||e.ingredient.no_amount?e._e():t("span",{class:e.unitClass},[e._v(e._s(e.unitName))])]),t("td",{staticClass:"ingredients__food",class:e.foodClass,on:{click:e.done}},[null!==e.ingredient.food?[null!==e.ingredient.food.recipe?t("a",{attrs:{href:e.resolveDjangoUrl("view_recipe",e.ingredient.food.recipe.id),target:"_blank",rel:"noopener noreferrer"}},[e._v(" "+e._s(e.foodName)+" ")]):""!==e.ingredient.food.url?t("a",{attrs:{href:e.ingredient.food.url,target:"_blank",rel:"noopener noreferrer"}},[e._v(" "+e._s(e.foodName))]):[t("span",{class:e.foodClass},[e._v(e._s(e.foodName))])]]:e._e()],2),e.detailed?t("td",{staticClass:"ingredients__note align-baseline"},[e.ingredient.note?[t("span",{directives:[{name:"b-popover",rawName:"v-b-popover.hover",value:e.ingredient.note,expression:"ingredient.note",modifiers:{hover:!0}}],staticClass:"ingredients__note ingredients__note_hover d-print-none touchable py-0 px-2"},[t("i",{staticClass:"far fa-comment"})]),t("div",{staticClass:"ingredients__note ingredients__note_print d-none d-print-block"},[t("i",{staticClass:"far fa-comment-alt d-print-none"}),e._v(" "+e._s(e.ingredient.note))])]:e._e()],2):e._e()]],2)},s=[],n=a(49665),o=a(70538),r=a(65284),l=a.n(r);o["default"].use(l());var c={name:"IngredientComponent",props:{ingredient:Object,ingredient_factor:{type:Number,default:1},detailed:{type:Boolean,default:!0}},mixins:[n.ResolveUrlMixin,n.EscapeCSSMixin],data(){return{checked:!1}},watch:{},mounted(){},computed:{amount:function(){return this.$sanitize((0,n.calculateAmount)(this.ingredient.amount,this.ingredient_factor))},isScaledUp:function(){return this.ingredient_factor>1},isScaledDown:function(){return this.ingredient_factor<1},amountClass:function(){return this.isScaledDown?this.escapeCSS("ingredients__amount_scaled_down"):this.isScaledUp?this.escapeCSS("ingredients__amount_scaled_up"):this.escapeCSS("ingredients__amount_scaled_false")},isUnitPlural:function(){return""!==this.ingredient.unit.plural_name&&null!==this.ingredient.unit.plural_name&&!!(this.ingredient.always_use_plural_unit||this.ingredient.amount*this.ingredient_factor>1)},isFoodPlural:function(){return null!=this.ingredient.food.plural_name&&""!==this.ingredient.food.plural_name&&(!!this.ingredient.always_use_plural_food||!this.ingredient.no_amount&&this.ingredient.amount*this.ingredient_factor>1)},unitClass:function(){return this.escapeCSS("_unitname-"+this.ingredient.unit.name)},foodClass:function(){return this.escapeCSS("_foodname-"+this.ingredient.food.name)},unitName:function(){return this.isUnitPlural?this.ingredient.unit.plural_name:this.ingredient.unit.name},foodName:function(){return this.isFoodPlural?this.ingredient.food.plural_name:this.ingredient.food.name}},methods:{done:function(){this.$emit("checked-state-changed",this.ingredient)}}},d=c,p=a(1001),u=(0,p.Z)(d,i,s,!1,null,"5ac4dfea",null),_=u.exports},91515:function(e,t,a){"use strict";a.d(t,{default:function(){return _}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ingredients",class:{"card border-primary no-border":e.header}},[t("div",{class:{"card-body":e.header,"p-0":e.header}},[e.header?t("div",{staticClass:"card-header"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-6"},[t("h4",{staticClass:"card-title"},[t("i",{staticClass:"fas fa-pepper-hot"}),e._v(" "+e._s(e.$t("Ingredients")))])])])]):e._e(),t("div",{staticClass:"card-body p-1 p-md-3"},[t("div",{staticClass:"row no-gutter"},[t("div",{staticClass:"col-12 m-0",class:{"p-0":!e.header}},[t("table",{staticClass:"table table-sm mb-0"},[e._l(e.steps,(function(a){return[a.show_as_header&&""!==a.name&&e.steps.length>1?t("tr",{key:a.id,staticClass:"ingredients__header-step-name"},[t("td",{attrs:{colspan:"5"}},[t("b",[e._v(e._s(a.name))])])]):e._e(),e._l(a.ingredients,(function(a){return[t("ingredient-component",{key:a.id,attrs:{ingredient:a,ingredient_factor:e.ingredient_factor,detailed:e.detailed},on:{"checked-state-changed":function(t){return e.$emit("checked-state-changed",t)}}})]}))]}))],2)])])])])])},s=[],n=a(70538),o=a(12120),r=(a(57024),a(40841)),l=a(49665);n["default"].use(o.XG7);var c={name:"IngredientCard",mixins:[l.ApiMixin],components:{IngredientComponent:r["default"]},props:{steps:{type:Array,default(){return[]}},recipe:{type:Number},ingredient_factor:{type:Number,default:1},servings:{type:Number,default:1},detailed:{type:Boolean,default:!0},header:{type:Boolean,default:!1},recipe_list:{type:Number,default:void 0}},data(){return{}},computed:{},watch:{},mounted(){},methods:{}},d=c,p=a(1001),u=(0,p.Z)(d,i,s,!1,null,null,null),_=u.exports},32825:function(e,t,a){"use strict";a.d(t,{default:function(){return d}});var i=function(){var e=this,t=e._self._c;return e.recipe.keywords.length>0?t("div",{staticClass:"keywords"},e._l(e.recipe.keywords.slice(0,e.keyword_splice).filter((e=>e.show||void 0===e.show)),(function(a){return t("span",{key:a.id,staticClass:"keywords__item pl-1",class:e.keywordClass(a)},[e.enable_keyword_links?[t("a",{attrs:{href:`${e.resolveDjangoUrl("view_search")}?keyword=${a.id}`}},[t("b-badge",{staticClass:"font-weight-normal",attrs:{pill:"",variant:"light"}},[e._v(e._s(a.label))])],1)]:[t("b-badge",{staticClass:"font-weight-normal",attrs:{pill:"",variant:"light"}},[e._v(e._s(a.label))])]],2)})),0):e._e()},s=[],n=a(49665),o={name:"KeywordsComponent",mixins:[n.ResolveUrlMixin,n.EscapeCSSMixin],props:{recipe:Object,limit:Number,enable_keyword_links:{type:Boolean,default:!0}},computed:{keyword_splice:function(){return this.limit?this.limit:this.recipe.keywords.length}},methods:{keywordClass:function(e){return this.escapeCSS("_keywordname-"+e.label)}}},r=o,l=a(1001),c=(0,l.Z)(r,i,s,!1,null,null,null),d=c.exports},92077:function(e,t,a){"use strict";a.d(t,{default:function(){return p}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"last-cooked"},[void 0!==e.recipe.last_cooked&&null!==e.recipe.last_cooked?t("span",{staticClass:"pl-1"},[t("b-badge",{staticClass:"font-weight-normal",attrs:{pill:"",variant:"primary"}},[t("i",{staticClass:"fas fa-utensils"}),e._v(" "+e._s(e.formatDate(e.recipe.last_cooked)))])],1):e._e()])},s=[],n=a(30381),o=a.n(n),r={name:"LastCooked",props:{recipe:Object},methods:{formatDate:function(e){return o().locale(window.navigator.language),o()(e).format("L")}}},l=r,c=a(1001),d=(0,c.Z)(l,i,s,!1,null,"5a23d523",null),p=d.exports},57609:function(e,t,a){"use strict";var i=a(80383),s=a(34322),n=a(1001),o=(0,n.Z)(s.Z,i.s,i.x,!1,null,null,null);t["default"]=o.exports},22280:function(e,t,a){"use strict";a.d(t,{default:function(){return x}});var i=function(){var e=this,t=e._self._c;return t("div",[t("b-modal",{attrs:{id:e.modal_id,size:"lg",title:e.modal_title,"hide-footer":"","aria-label":""},on:{show:e.showModal}},[null!==e.entryEditing?t("div",{staticClass:"row"},[t("div",{staticClass:"col col-md-12"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col col-md-12"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12"},[t("b-input-group",[t("b-form-input",{attrs:{id:"TitleInput",placeholder:e.entryEditing.title_placeholder},on:{change:function(t){e.missing_recipe=!1}},model:{value:e.entryEditing.title,callback:function(t){e.$set(e.entryEditing,"title",t)},expression:"entryEditing.title"}}),t("b-input-group-append",{staticClass:"d-none d-lg-block"},[t("b-button",{attrs:{variant:"primary"},on:{click:function(t){e.entryEditing.title=""}}},[t("i",{staticClass:"fa fa-eraser"})])],1)],1),e.missing_recipe?t("span",{staticClass:"text-danger"},[e._v(e._s(e.$t("Title_or_Recipe_Required")))]):e._e(),e.missing_recipe?e._e():t("small",{staticClass:"form-text text-muted",attrs:{tabindex:"-1"}},[e._v(e._s(e.$t("Title")))])],1),t("div",{staticClass:"col-12 col-lg-6"},[t("b-input-group",[t("b-form-input",{attrs:{type:"date"},model:{value:e.entryEditing.from_date,callback:function(t){e.$set(e.entryEditing,"from_date",t)},expression:"entryEditing.from_date"}}),t("b-input-group-append",[t("b-button",{attrs:{variant:"secondary"},on:{click:function(t){e.entryEditing.from_date=e.changeDate(e.entryEditing.from_date,-1)}}},[t("i",{staticClass:"fas fa-minus"})]),t("b-button",{attrs:{variant:"primary"},on:{click:function(t){e.entryEditing.from_date=e.changeDate(e.entryEditing.from_date,1)}}},[t("i",{staticClass:"fas fa-plus"})])],1)],1),t("small",{staticClass:"form-text text-muted",attrs:{tabindex:"-1"}},[e._v(e._s(e.$t("StartDate")))])],1),t("div",{staticClass:"col-12 col-lg-6"},[t("b-input-group",[t("b-form-input",{attrs:{type:"date"},model:{value:e.entryEditing.to_date,callback:function(t){e.$set(e.entryEditing,"to_date",t)},expression:"entryEditing.to_date"}}),t("b-input-group-append",[t("b-button",{attrs:{variant:"secondary"},on:{click:function(t){e.entryEditing.to_date=e.changeDate(e.entryEditing.to_date,-1)}}},[t("i",{staticClass:"fas fa-minus"})]),t("b-button",{attrs:{variant:"primary"},on:{click:function(t){e.entryEditing.to_date=e.changeDate(e.entryEditing.to_date,1)}}},[t("i",{staticClass:"fas fa-plus"})])],1)],1),t("small",{staticClass:"form-text text-muted",attrs:{tabindex:"-1"}},[e._v(e._s(e.$t("EndDate")))])],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col-12"},[t("b-form-group",[t("generic-multiselect",{staticStyle:{"flex-grow":"1","flex-shrink":"1","flex-basis":"0"},attrs:{initial_single_selection:e.entryEditing.recipe,label:"name",model:e.Models.RECIPE,placeholder:e.$t("Recipe"),limit:10,multiple:!1},on:{change:e.selectRecipe}}),t("small",{staticClass:"form-text text-muted",attrs:{tabindex:"-1"}},[e._v(e._s(e.$t("Recipe")))])],1)],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 col-lg-6 col-xl-6"},[t("b-form-group",{},[t("generic-multiselect",{staticStyle:{"flex-grow":"1","flex-shrink":"1","flex-basis":"0"},attrs:{required:"",label:"name",model:e.Models.MEAL_TYPE,placeholder:e.$t("Meal_Type"),limit:10,multiple:!1,initial_single_selection:e.entryEditing.meal_type,allow_create:!0,create_placeholder:e.$t("Create_New_Meal_Type")},on:{change:e.selectMealType}}),e.missing_meal_type?t("span",{staticClass:"text-danger"},[e._v(e._s(e.$t("Meal_Type_Required")))]):e._e(),e.missing_meal_type?e._e():t("small",{staticClass:"form-text text-muted",attrs:{tabindex:"-1"}},[e._v(e._s(e.$t("Meal_Type")))])],1),t("b-form-group",{staticClass:"mt-3",attrs:{"label-for":"NoteInput",description:e.$t("Note")}},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.entryEditing.note,expression:"entryEditing.note"}],staticClass:"form-control",attrs:{id:"NoteInput",placeholder:e.$t("Note")},domProps:{value:e.entryEditing.note},on:{input:function(t){t.target.composing||e.$set(e.entryEditing,"note",t.target.value)}}})]),t("b-input-group",[t("b-form-input",{attrs:{id:"ServingsInput",placeholder:e.$t("Servings")},model:{value:e.entryEditing.servings,callback:function(t){e.$set(e.entryEditing,"servings",t)},expression:"entryEditing.servings"}})],1),t("small",{staticClass:"form-text text-muted",attrs:{tabindex:"-1"}},[e._v(e._s(e.$t("Servings")))]),t("b-form-group",{staticClass:"mt-3"},[t("generic-multiselect",{staticStyle:{"flex-grow":"1","flex-shrink":"1","flex-basis":"0"},attrs:{required:"",parent_variable:"entryEditing.shared",label:"display_name",model:e.Models.USER_NAME,placeholder:e.$t("Share"),limit:10,multiple:!0,initial_selection:e.entryEditing.shared},on:{change:function(t){e.entryEditing.shared=t.val}}}),t("small",{staticClass:"form-text text-muted",attrs:{tabindex:"-1"}},[e._v(e._s(e.$t("Share")))])],1),e.autoMealPlan?e._e():t("b-input-group",[t("b-form-checkbox",{attrs:{id:"AddToShopping"},model:{value:e.mealplan_settings.addshopping,callback:function(t){e.$set(e.mealplan_settings,"addshopping",t)},expression:"mealplan_settings.addshopping"}}),t("small",{staticClass:"form-text text-muted",attrs:{tabindex:"-1"}},[e._v(e._s(e.$t("AddToShopping")))])],1),e.mealplan_settings.addshopping&&!e.autoMealPlan?t("b-input-group",[t("b-form-checkbox",{attrs:{id:"reviewShopping"},model:{value:e.mealplan_settings.reviewshopping,callback:function(t){e.$set(e.mealplan_settings,"reviewshopping",t)},expression:"mealplan_settings.reviewshopping"}}),t("small",{staticClass:"form-text text-muted",attrs:{tabindex:"-1"}},[e._v(e._s(e.$t("review_shopping")))])],1):e._e()],1),t("div",{staticClass:"col-lg-6 d-none d-lg-block d-xl-block"},[e.entryEditing.recipe?t("recipe-card",{attrs:{recipe:e.entryEditing.recipe,detailed:!1}}):e._e()],1)]),t("div",{staticClass:"row mt-3 mb-3"},[t("div",{staticClass:"col-12"},[e.allow_delete?t("b-button",{attrs:{variant:"danger"},on:{click:e.deleteEntry}},[e._v(e._s(e.$t("Delete"))+" ")]):e._e(),t("b-button",{staticClass:"float-right",attrs:{variant:"primary"},on:{click:e.editEntry}},[e._v(e._s(e.$t("Save"))+" ")])],1)])])])])]):e._e()]),null!==e.last_created_plan&&null!==e.last_created_plan.recipe?t("shopping-modal",{attrs:{recipe:e.last_created_plan.recipe,servings:e.last_created_plan.servings,modal_id:999999,mealplan:e.last_created_plan}}):e._e()],1)},s=[],n=a(70538),o=a(66123),r=a.n(o),l=a(12120),c=a(26678),d=a(49665),p=a(81185),u=a(15782),_=a(92301),h=a(30381),m=a.n(h);const{ApiApiFactory:f}=a(6955);n["default"].use(l.XG7),n["default"].use(r());let g="mealplan_settings";var v={name:"MealPlanEditModal",props:{entry:Object,create_date:String,modal_title:String,modal_id:{type:String,default:"id_meal_plan_edit_modal"},allow_delete:{type:Boolean,default:!0}},mixins:[d.ApiMixin,d.ToastMixin],components:{GenericMultiselect:c["default"],RecipeCard:()=>Promise.all([a.e(1956),a.e(3470)]).then(a.bind(a,13470)),ShoppingModal:_["default"]},data(){return{entryEditing:null,missing_recipe:!1,missing_meal_type:!1,default_plan_share:[],mealplan_settings:{addshopping:!1,reviewshopping:!1},last_created_plan:null}},watch:{entry:{handler(){this.entryEditing=Object.assign({},this.entry)},deep:!0},"entryEditing.from_date":{handler(e,t){if(void 0!==e&&void 0!==t&&e!==t&&e!==this.entryEditing.to_date){let a=Math.abs(m()(t).diff(m()(this.entryEditing.to_date),"days"));this.entryEditing.to_date=m()(e).add(a,"d").format("YYYY-MM-DD")}},deep:!0},mealplan_settings:{handler(e){this.$cookies.set(g,this.mealplan_settings)},deep:!0}},mounted:function(){(0,p.R)().updateIfStaleOrEmpty()},computed:{autoMealPlan:function(){return(0,p.R)().getStaleData()?.mealplan_autoadd_shopping}},methods:{showModal(){this.$cookies.isKey(g)&&(this.mealplan_settings=Object.assign({},this.mealplan_settings,this.$cookies.get(g))),null===this.entry?this.entryEditing=Object.assign({},(0,u.I)().empty_meal_plan,null):this.entryEditing=Object.assign({},this.entry,null),this.create_date&&(this.entryEditing.from_date=this.create_date,this.entryEditing.to_date=this.create_date),(0,p.R)().getData().then((e=>{-1===this.entryEditing.id&&(this.entryEditing.shared=e.plan_share)}))},editEntry(){null!=this.entryEditing.meal_type?null!=this.entryEditing.recipe||""!==this.entryEditing.title?(this.$bvModal.hide(this.modal_id),this.$set(this.entryEditing,"addshopping",this.mealplan_settings.addshopping&&!this.mealplan_settings.reviewshopping),"id"in this.entryEditing&&-1!==this.entryEditing.id?(0,u.I)().updateObject(this.entryEditing):(0,u.I)().createObject(this.entryEditing).then((e=>{this.last_created_plan=e.data,e.data.recipe&&this.mealplan_settings.addshopping&&!this.autoMealPlan&&this.mealplan_settings.reviewshopping&&this.$nextTick((function(){this.$bvModal.show("shopping_999999")}))}))):this.makeToast("Warning",this.$t("Title_or_Recipe_Required"),"warning"):this.makeToast("Warning",this.$t("Meal_Type_Required"),"warning")},deleteEntry(){this.$bvModal.hide(this.modal_id),(0,u.I)().deleteObject(this.entryEditing)},selectMealType(e){this.missing_meal_type=!1,null!=e.val?this.entryEditing.meal_type=e.val:this.entryEditing.meal_type=null},selectShared(e){null!=e.val?this.entryEditing.shared=e.val:this.entryEditing.meal_type=null},selectRecipe(e){this.missing_recipe=!1,null!=e.val?(this.entryEditing.recipe=e.val,this.entryEditing.title_placeholder=this.entryEditing.recipe.name,this.entryEditing.servings=this.entryEditing.recipe.servings):(this.entryEditing.recipe=null,this.entryEditing.title_placeholder="",this.entryEditing.servings=1)},changeDate(e,t){return m()(e).add(t,"d").format("YYYY-MM-DD")}}},b=v,y=a(1001),k=(0,y.Z)(b,i,s,!1,null,"838b285a",null),x=k.exports},11072:function(e,t,a){"use strict";a.d(t,{default:function(){return g}});var i=function(){var e=this,t=e._self._c;return t("div",[t("b-modal",{staticClass:"modal",attrs:{id:`id_modal_add_book_${e.modal_id}`,title:e.$t("Manage_Books"),"ok-title":e.$t("Add"),"cancel-title":e.$t("Close")},on:{ok:function(t){return e.addToBook()},shown:e.loadBookEntries}},[t("ul",{staticClass:"list-group"},e._l(this.recipe_book_list,(function(a){return t("li",{key:a.id,staticClass:"list-group-item d-flex justify-content-between align-items-center"},[e._v(" "+e._s(a.book_content.name)+" "),t("span",{staticClass:"btn btn-sm btn-danger",on:{click:function(t){return e.removeFromBook(a)}}},[t("i",{staticClass:"fa fa-trash-alt"})])])})),0),t("multiselect",{staticStyle:{"margin-top":"1vh"},attrs:{options:e.books_filtered,taggable:!0,"tag-placeholder":e.$t("Create"),placeholder:e.$t("Select_Book"),label:"name","track-by":"id",id:"id_books",multiple:!1,loading:e.books_loading},on:{tag:e.createBook,"search-change":e.loadBooks},model:{value:e.selected_book,callback:function(t){e.selected_book=t},expression:"selected_book"}})],1)],1)},s=[],n=(a(57658),a(47907)),o=a.n(n),r=a(30381),l=a.n(r),c=a(70538),d=a(12120),p=a(6955),u=a(49665);c["default"].prototype.moment=l(),c["default"].use(d.XG7);var _={name:"AddRecipeToBook",components:{Multiselect:o()},props:{recipe:Object,modal_id:Number},data(){return{books:[],books_loading:!1,recipe_book_list:[],selected_book:null}},computed:{books_filtered:function(){let e=[];return this.books.forEach((t=>{0===this.recipe_book_list.filter((e=>e.book===t.id)).length&&e.push(t)})),e}},mounted(){},methods:{loadBooks:function(e){this.books_loading=!0;let t=new p.ApiApiFactory;t.listRecipeBooks({query:{query:e}}).then((e=>{this.books=e.data.filter((e=>-1===this.recipe_book_list.indexOf(e))),this.books_loading=!1}))},createBook:function(e){let t=new p.ApiApiFactory;t.createRecipeBook({name:e}).then((e=>{this.books.push(e.data),this.selected_book=e.data,u.StandardToasts.makeStandardToast(this,u.StandardToasts.SUCCESS_CREATE)}))},addToBook:function(){let e=new p.ApiApiFactory;e.createRecipeBookEntry({book:this.selected_book.id,recipe:this.recipe.id}).then((e=>{this.recipe_book_list.push(e.data),u.StandardToasts.makeStandardToast(this,u.StandardToasts.SUCCESS_CREATE)})).catch((e=>{u.StandardToasts.makeStandardToast(this,u.StandardToasts.FAIL_UPDATE,e)}))},removeFromBook:function(e){let t=new p.ApiApiFactory;t.destroyRecipeBookEntry(e.id).then((t=>{this.recipe_book_list=this.recipe_book_list.filter((t=>t.id!==e.id)),u.StandardToasts.makeStandardToast(this,u.StandardToasts.SUCCESS_DELETE)}))},loadBookEntries:function(){let e=new p.ApiApiFactory;e.listRecipeBookEntrys({query:{recipe:this.recipe.id}}).then((e=>{this.recipe_book_list=e.data,this.loadBooks("")}))}}},h=_,m=a(1001),f=(0,m.Z)(h,i,s,!1,null,null,null),g=f.exports},92301:function(e,t,a){"use strict";a.d(t,{default:function(){return f}});var i=function(){var e=this,t=e._self._c;return t("div",[t("b-modal",{attrs:{"hide-footer":"",id:`shopping_${this.modal_id}`,"body-class":"p-3 pt-0 pt-md-3"},on:{show:e.loadRecipe},scopedSlots:e._u([{key:"modal-title",fn:function(){return[t("h5",[e._v(e._s(e.$t("Add_Servings_to_Shopping",{servings:e.recipe_servings})))])]},proxy:!0}])},[e.loading?t("loading-spinner"):e._e(),e.loading?e._e():t("div",{staticClass:"accordion",attrs:{role:"tablist"}},[t("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[t("b-card-header",{staticClass:"p-0",attrs:{"header-tag":"header",role:"tab"}},[t("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-0",modifiers:{"accordion-0":!0}}],staticClass:"text-left",attrs:{block:"",variant:"outline-info"}},[e._v(e._s(e.recipe.name))])],1),t("b-collapse",{staticClass:"p-2",attrs:{id:"accordion-0",visible:"",accordion:"my-accordion",role:"tabpanel"}},[t("div",[t("table",{staticClass:"table table-sm mb-0"},e._l(e.steps.flatMap((e=>e.ingredients)),(function(a){return t("ingredient-component",{key:a.id,attrs:{detailed:!0,ingredient:a,ingredient_factor:e.ingredient_factor},on:{"checked-state-changed":function(t){return e.$set(a,"checked",!a.checked)}}})})),1)])]),e._l(e.related_recipes,(function(a){return[t("b-card",{key:a.recipe.id,staticClass:"mb-1",attrs:{"no-body":""}},[t("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[t("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"accordion-"+a.recipe.id,expression:"'accordion-' + r.recipe.id"}],staticClass:"text-left",attrs:{"btn-sm":"",block:"",variant:"outline-primary"}},[e._v(e._s(a.recipe.name))])],1),t("b-collapse",{attrs:{id:"accordion-"+a.recipe.id,accordion:"my-accordion",role:"tabpanel"}},e._l(a.steps.flatMap((e=>e.ingredients)),(function(a){return t("div",{key:a.id},[t("table",{staticClass:"table table-sm mb-0"},[t("ingredient-component",{key:a.id,attrs:{detailed:!0,ingredient:a,ingredient_factor:e.ingredient_factor},on:{"checked-state-changed":function(t){return e.$set(a,"checked",!a.checked)}}})],1)])})),0)],1)]}))],2)],1),t("div",[t("b-input-group",[t("b-input-group-prepend",{staticClass:"d-inline-flex",attrs:{"is-text":""}},[t("i",{staticClass:"fa fa-calculator"})]),t("b-form-spinbutton",{staticStyle:{height:"3em"},attrs:{min:"1",inline:""},model:{value:e.recipe_servings,callback:function(t){e.recipe_servings=t},expression:"recipe_servings"}}),t("b-input-group-append",{staticClass:"d-inline-flex"},[t("b-button",{staticClass:"d-none d-lg-inline-block",attrs:{variant:"success"},on:{click:e.saveShopping}},[e._v(e._s(e.$t("Save")))]),t("b-button",{staticClass:"d-inline-block d-lg-none",attrs:{variant:"success"},on:{click:e.saveShopping}},[t("i",{staticClass:"fa fa-cart-plus"})])],1)],1)],1)],1)],1)},s=[],n=(a(57658),a(70538)),o=a(12120),r=a(49665),l=a(40841),c=a(57609),d=a(15782);n["default"].use(o.XG7);const{ApiApiFactory:p}=a(6955);var u={name:"ShoppingModal",components:{LoadingSpinner:c["default"],IngredientComponent:l["default"]},mixins:[],props:{recipe:{required:!0,type:Object},servings:{type:Number,default:void 0},modal_id:{required:!0,type:Number},mealplan:{type:Object,default:void 0},list_recipe:{type:Number,default:void 0}},data(){return{loading:!0,steps:[],recipe_servings:void 0,add_shopping:[],related_recipes:[]}},mounted(){this.recipe_servings=this.servings},computed:{ingredient_factor:function(){return this.recipe_servings/this.recipe.servings}},watch:{servings:function(e){this.recipe_servings=parseInt(e)}},methods:{loadRecipe:function(){this.add_shopping=[],this.related_recipes=[];let e=new p;e.retrieveRecipe(this.recipe.id).then((e=>{this.steps=e.data.steps,this.recipe_servings||(this.recipe_servings=e.data?.servings),this.steps.forEach((e=>e.ingredients.filter((e=>!1===e.food?.food_onhand)).forEach((e=>this.$set(e,"checked",!0))))),this.loading=!1})).then((()=>{e.relatedRecipe(this.recipe.id).then((e=>e.data)).then((t=>{let a=[];return t.forEach((t=>{a.push(e.listSteps(t.id).then((e=>{let a=e.data.results.filter((e=>e.ingredients.length>0));a.forEach((e=>e.ingredients.filter((e=>!1===e.food.food_onhand)).forEach((e=>this.$set(e,"checked",!0))))),this.related_recipes.push({recipe:t,steps:a})})))})),Promise.all(a)}))}))},saveShopping:function(){let e={id:this.recipe.id,ingredients:this.steps.flatMap((e=>e.ingredients.filter((e=>!0===e.checked)).flatMap((e=>e.id)))).concat(this.related_recipes.flatMap((e=>e.steps.flatMap((e=>e.ingredients.filter((e=>!0===e.checked)).flatMap((e=>e.id))))))),servings:this.recipe_servings,mealplan:this.mealplan,list_recipe:this.list_recipe},t=new p;t.shoppingRecipe(this.recipe.id,e).then((e=>{r.StandardToasts.makeStandardToast(this,r.StandardToasts.SUCCESS_CREATE),this.$emit("finish"),void 0!==this.mealplan&&null!==this.mealplan&&((0,d.I)().plans[this.mealplan.id].shopping=!0)})).catch((e=>{r.StandardToasts.makeStandardToast(this,r.StandardToasts.FAIL_CREATE,e)})),this.$bvModal.hide(`shopping_${this.modal_id}`)}}},_=u,h=a(1001),m=(0,h.Z)(_,i,s,!1,null,null,null),f=m.exports},13470:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return v}});var i=function(){var e=this,t=e._self._c;return t("div",[e.recipe&&e.recipe.loading?[t("b-card",{directives:[{name:"hover",rawName:"v-hover"}],staticStyle:{height:"100%"},attrs:{"no-body":""}},[t("b-card-img-lazy",{staticStyle:{height:"15vh","object-fit":"cover"},attrs:{src:e.placeholder_image,alt:e.$t("Recipe_Image"),top:""}}),t("b-card-body",{staticClass:"p-4"},[t("h6",[t("b-skeleton",{attrs:{width:"95%"}})],1),t("b-card-text",[t("b-skeleton",{attrs:{height:"12px",width:"65%"}}),t("b-skeleton",{attrs:{height:"12px",width:"45%"}}),t("b-skeleton",{attrs:{height:"12px",width:"55%"}})],1)],1)],1)]:[e.recipe?t("b-card",{directives:[{name:"hover",rawName:"v-hover"}],staticStyle:{height:"100%"},attrs:{"no-body":""}},[t("a",{attrs:{href:e.recipe_link}},[t("div",{staticClass:"content"},[null!==e.recipe.description&&""!==e.recipe.description?t("div",{staticClass:"content-overlay"}):e._e(),t("b-card-img-lazy",{staticStyle:{height:"15vh","object-fit":"cover"},attrs:{src:e.recipe_image,alt:e.$t("Recipe_Image"),top:""}}),t("div",{staticClass:"content-details"},[t("p",{staticClass:"content-text"},[e._v(" "+e._s(e.recipe.description)+" ")])]),t("b-row",{staticClass:"card-img-overlay pt-1"},[t("b-col",{attrs:{cols:"6"}},[0!==e.recipe.working_time||0!==e.recipe.waiting_time?t("div",[0!==e.recipe.working_time&&void 0!==e.recipe.working_time?t("b-badge",{staticClass:"mt-1 font-weight-normal",attrs:{pill:"",variant:"light"}},[t("i",{staticClass:"fa fa-clock"}),e._v(" "+e._s(e.working_time)+" ")]):e._e(),0!==e.recipe.waiting_time&&void 0!==e.recipe.waiting_time?t("b-badge",{staticClass:"mt-1 font-weight-normal",attrs:{pill:"",variant:"secondary"}},[t("i",{staticClass:"fa fa-pause"}),e._v(" "+e._s(e.waiting_time)+" ")]):e._e()],1):e._e()]),t("b-col",{staticClass:"text-right",attrs:{cols:"6"}},[t("recipe-rating",{attrs:{recipe:e.recipe,pill:!0}})],1)],1)],1)]),t("b-card-body",{staticClass:"p-2 pl-3 pr-3"},[t("div",{staticClass:"d-flex flex-row"},[t("div",{staticClass:"flex-grow-1"},[t("a",{staticClass:"text-body font-weight-bold two-row-text",attrs:{href:e.recipe_link}},[null!==e.recipe?[e._v(e._s(e.recipe.name))]:[e._v(e._s(e.meal_plan.title))]],2)]),t("div",{staticClass:"justify-content-end"},[null!==e.recipe&&e.show_context_menu?t("recipe-context-menu",{staticClass:"justify-content-end float-right align-items-end pr-0",attrs:{recipe:e.recipe,disabled_options:e.context_disabled_options}}):e._e()],1)]),t("b-card-text",{staticStyle:{"text-overflow":"ellipsis"}},[null!==e.recipe?[e.show_detail?t("div",[e._v(" "+e._s(e.recipe.description)+" ")]):e._e(),t("p",{staticClass:"mt-1 mb-1"},[t("last-cooked",{attrs:{recipe:e.recipe}}),t("keywords-component",{staticStyle:{"margin-top":"4px",position:"relative","z-index":"3"},attrs:{recipe:e.recipe,limit:3,enable_keyword_links:e.enable_keyword_links}})],1),t("transition",{attrs:{name:"fade",mode:"in-out"}},[e.show_detail?t("div",{staticClass:"row mt-3"},[t("div",{staticClass:"col-md-12"},[t("h6",{staticClass:"card-title"},[t("i",{staticClass:"fas fa-pepper-hot"}),e._v(" "+e._s(e.$t("Ingredients")))]),t("ingredients-card",{attrs:{steps:e.recipe.steps,header:!1,detailed:!1,servings:e.recipe.servings}})],1)]):e._e()]),void 0===e.recipe.internal||e.recipe.internal?e._e():t("b-badge",{attrs:{pill:"",variant:"info"}},[e._v(e._s(e.$t("External")))])]:e._e()],2)],1)],1):e._e()]],2)},s=[],n=a(91515),o=a(32825),r=a(92077),l=a(21956),c=a(11840),d=a(49665),p=a(30381),u=a.n(p),_=a(70538);_["default"].prototype.moment=u();var h={name:"RecipeCard",mixins:[d.ResolveUrlMixin],components:{LastCooked:r["default"],KeywordsComponent:o["default"],"recipe-context-menu":l["default"],IngredientsCard:n["default"],RecipeRating:c["default"]},props:{recipe:Object,meal_plan:Object,footer_text:String,footer_icon:String,detailed:{type:Boolean,default:!0},show_context_menu:{type:Boolean,default:!0},context_disabled_options:Object,open_recipe_on_click:{type:Boolean,default:!0},enable_keyword_links:{type:Boolean,default:!0}},data(){return{placeholder_image:window.IMAGE_PLACEHOLDER}},mounted(){},computed:{show_detail:function(){return void 0!==this.recipe?.steps&&this.detailed},recipe_image:function(){return null==this.recipe||null===this.recipe.image?window.IMAGE_PLACEHOLDER:this.recipe.image},working_time:function(){return(0,d.calculateHourMinuteSplit)(this.recipe.working_time)},waiting_time:function(){return(0,d.calculateHourMinuteSplit)(this.recipe.waiting_time)},recipe_link:function(){return this.open_recipe_on_click?void 0!==this.recipe.id?(0,d.resolveDjangoUrl)("view_recipe",this.recipe.id):null:"#"}},methods:{},directives:{hover:{inserted:function(e){e.addEventListener("mouseenter",(()=>{e.classList.add("shadow")})),e.addEventListener("mouseleave",(()=>{e.classList.remove("shadow")}))}}}},m=h,f=a(1001),g=(0,f.Z)(m,i,s,!1,null,"8dba8f0c",null),v=g.exports},21956:function(e,t,a){"use strict";a.d(t,{default:function(){return y}});var i=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"dropdown d-print-none"},[e._m(0),t("div",{staticClass:"dropdown-menu dropdown-menu-right",attrs:{"aria-labelledby":"dropdownMenuLink"}},[e.disabled_options.edit?e._e():t("a",{staticClass:"dropdown-item",attrs:{href:e.resolveDjangoUrl("edit_recipe",e.recipe.id)}},[t("i",{staticClass:"fas fa-pencil-alt fa-fw"}),e._v(" "+e._s(e.$t("Edit")))]),e.disabled_options.edit?e._e():t("a",{staticClass:"dropdown-item",attrs:{href:e.resolveDjangoUrl("view_property_editor",e.recipe.id)}},[t("i",{staticClass:"fas fa-table"}),e._v(" "+e._s(e.$t("Property_Editor")))]),e.recipe.internal||e.disabled_options.convert?e._e():t("a",{staticClass:"dropdown-item",attrs:{href:e.resolveDjangoUrl("edit_convert_recipe",e.recipe.id)}},[t("i",{staticClass:"fas fa-exchange-alt fa-fw"}),e._v(" "+e._s(e.$t("convert_internal")))]),t("a",{attrs:{href:"javascript:void(0);"}},[e.disabled_options.books?e._e():t("button",{staticClass:"dropdown-item",on:{click:function(t){return e.$bvModal.show(`id_modal_add_book_${e.modal_id}`)}}},[t("i",{staticClass:"fas fa-bookmark fa-fw"}),e._v(" "+e._s(e.$t("Manage_Books"))+" ")])]),e.recipe.internal&&!e.disabled_options.shopping?t("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:e.addToShopping}},[t("i",{staticClass:"fas fa-shopping-cart fa-fw"}),e._v(" "+e._s(e.$t("Add_to_Shopping"))+" ")]):e._e(),e.disabled_options.plan?e._e():t("a",{staticClass:"dropdown-item",attrs:{href:"javascript:void(0);"},on:{click:e.createMealPlan}},[t("i",{staticClass:"fas fa-calendar fa-fw"}),e._v(" "+e._s(e.$t("Add_to_Plan"))+" ")]),t("a",{attrs:{href:"javascript:void(0);"}},[e.disabled_options.log?e._e():t("button",{staticClass:"dropdown-item",on:{click:function(t){return e.$bvModal.show(`id_modal_cook_log_${e.modal_id}`)}}},[t("i",{staticClass:"fas fa-clipboard-list fa-fw"}),e._v(" "+e._s(e.$t("Log_Cooking"))+" ")])]),t("a",{attrs:{href:"javascript:void(0);"}},[e.disabled_options.print?e._e():t("button",{staticClass:"dropdown-item",attrs:{onclick:"window.print()"}},[t("i",{staticClass:"fas fa-print fa-fw"}),e._v(" "+e._s(e.$t("Print"))+" ")])]),t("a",{attrs:{href:"javascript:void(0);"}},[e.disabled_options.copy?e._e():t("button",{staticClass:"dropdown-item",on:{click:e.copyToNew}},[t("i",{staticClass:"fas fa-copy fa-fw"}),e._v(" "+e._s(e.$t("copy_to_new"))+" ")])]),e.disabled_options.export?e._e():t("a",{staticClass:"dropdown-item",attrs:{href:e.resolveDjangoUrl("view_export")+"?r="+e.recipe.id,target:"_blank",rel:"noopener noreferrer"}},[t("i",{staticClass:"fas fa-file-export fa-fw"}),e._v(" "+e._s(e.$t("Export")))]),t("a",{attrs:{href:"javascript:void(0);"}},[e.disabled_options.pin?e._e():t("button",{staticClass:"dropdown-item",on:{click:function(t){return e.pinRecipe()}}},[t("i",{staticClass:"fas fa-thumbtack fa-fw"}),e._v(" "+e._s(e.isPinned?e.$t("Unpin"):e.$t("Pin"))+" ")])]),t("a",{attrs:{href:"javascript:void(0);"}},[e.recipe.internal&&!e.disabled_options.share?t("button",{staticClass:"dropdown-item",on:{click:function(t){return e.createShareLink()}}},[t("i",{staticClass:"fas fa-share-alt fa-fw"}),e._v(" "+e._s(e.$t("Share"))+" ")]):e._e()])])]),t("cook-log",{attrs:{recipe:e.recipe,modal_id:e.modal_id}}),t("add-recipe-to-book",{attrs:{recipe:e.recipe,modal_id:e.modal_id,entryEditing_inital_servings:e.servings_value}}),t("shopping-modal",{attrs:{recipe:e.recipe,servings:e.servings_value,modal_id:e.modal_id,mealplan:void 0}}),t("b-modal",{attrs:{id:`modal-share-link_${e.modal_id}`,title:e.$t("Share"),"hide-footer":""}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col col-md-12"},[void 0!==e.recipe_share_link?t("label",[e._v(e._s(e.$t("Public share link")))]):e._e(),t("input",{directives:[{name:"model",rawName:"v-model",value:e.recipe_share_link,expression:"recipe_share_link"}],ref:"share_link_ref",staticClass:"form-control",domProps:{value:e.recipe_share_link},on:{input:function(t){t.target.composing||(e.recipe_share_link=t.target.value)}}}),t("b-button",{staticClass:"mt-2 mb-3 d-none d-md-inline",attrs:{variant:"secondary"},on:{click:function(t){return e.$bvModal.hide(`modal-share-link_${e.modal_id}`)}}},[e._v(e._s(e.$t("Close"))+" ")]),t("b-button",{staticClass:"mt-2 mb-3 ml-md-2",attrs:{variant:"primary"},on:{click:function(t){return e.copyShareLink()}}},[e._v(e._s(e.$t("Copy"))+" ")]),t("b-button",{staticClass:"mt-2 mb-3 ml-2 float-right",attrs:{variant:"success"},on:{click:function(t){return e.shareIntend()}}},[e._v(e._s(e.$t("Share"))+" "),t("i",{staticClass:"fa fa-share-alt"})])],1)])]),t("meal-plan-edit-modal",{attrs:{entry:e.entryEditing,modal_id:`modal-meal-plan_${e.modal_id}`,allow_delete:!1,modal_title:e.$t("Create_Meal_Plan_Entry")},on:{"save-entry":e.saveMealPlan}})],1)},s=[function(){var e=this,t=e._self._c;return t("a",{staticClass:"btn shadow-none pr-0 pl-0",attrs:{href:"javascript:void(0);",role:"button",id:"dropdownMenuLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t("i",{staticClass:"fas fa-ellipsis-v fa-lg"})])}],n=(a(57658),a(87503)),o=a(22280),r=a(11072),l=a(92301),c=a(15782),d=a(6955),p=a(49665),u=a(5121),_=a(30381),h=a.n(_),m=a(70538);m["default"].prototype.moment=h();var f={name:"RecipeContextMenu",mixins:[p.ResolveUrlMixin],components:{AddRecipeToBook:r["default"],CookLog:n["default"],MealPlanEditModal:o["default"],ShoppingModal:l["default"]},data(){return{servings_value:0,isPinned:!1,recipe_share_link:void 0,modal_id:Math.round(1e5*Math.random()),options:{entryEditing:{date:null,id:-1,meal_type:null,note:"",note_markdown:"",recipe:null,servings:1,shared:[],title:"",title_placeholder:this.$t("Title")}},entryEditing:{},mealplan:void 0}},props:{recipe:Object,servings:{type:Number,default:-1},disabled_options:{type:Object,default:()=>({print:!0})}},mounted(){this.servings_value=-1===this.servings?this.recipe.servings:this.servings;let e=JSON.parse(localStorage.getItem("pinned_recipes"))||[];this.isPinned=e.some((e=>e.id==this.recipe.id))},watch:{recipe:{handler(){},deep:!0},servings:function(e){this.servings_value=parseInt(e)}},methods:{pinRecipe(){let e=JSON.parse(localStorage.getItem("pinned_recipes"))||[];this.isPinned?(e=e.filter((e=>e.id!==this.recipe.id)),(0,p.makeToast)(this.$t("Unpin"),this.$t("UnpinnedConfirmation",{recipe:this.recipe.name}),"info")):(e.push({id:this.recipe.id,name:this.recipe.name}),(0,p.makeToast)(this.$t("Pin"),this.$t("PinnedConfirmation",{recipe:this.recipe.name}),"info")),this.isPinned=!this.isPinned,localStorage.setItem("pinned_recipes",JSON.stringify(e))},saveMealPlan:function(e){e.from_date=h()(e.from_date).format("YYYY-MM-DD");let t=e.addshopping&&e.reviewshopping;e.addshopping=e.addshopping&&!e.reviewshopping;let a=new d.ApiApiFactory;a.createMealPlan(e).then((e=>{(0,c.I)().plans.push(e.data),this.$bvModal.hide(`modal-meal-plan_${this.modal_id}`),t&&(this.mealplan=e.data.id,this.servings_value=e.data.servings,this.addToShopping()),p.StandardToasts.makeStandardToast(this,p.StandardToasts.SUCCESS_CREATE)})).catch((e=>{p.StandardToasts.makeStandardToast(this,p.StandardToasts.FAIL_CREATE,e)}))},createMealPlan(e){this.entryEditing=this.options.entryEditing,this.entryEditing.recipe=this.recipe,this.entryEditing.servings=this.recipe.servings,this.entryEditing.from_date=h()(new Date).format("YYYY-MM-DD"),this.entryEditing.to_date=h()(new Date).format("YYYY-MM-DD"),this.$nextTick((function(){this.$bvModal.show(`modal-meal-plan_${this.modal_id}`)}))},createShareLink:function(){console.log("create"),u.Z.get((0,p.resolveDjangoUrl)("api_share_link",this.recipe.id)).then((e=>{console.log("success"),this.$bvModal.show(`modal-share-link_${this.modal_id}`),this.recipe_share_link=e.data.link})).catch((e=>{console.log("fail"),403===e.response.status&&(0,p.makeToast)(this.$t("Share"),this.$t("Sharing is not enabled for this space or your user account."),"danger")}))},copyShareLink:function(){let e=this.$refs.share_link_ref;e.select(),document.execCommand("copy")},shareIntend:function(){let e={title:this.recipe.name,text:`${this.$t("Check out this recipe: ")} ${this.recipe.name}`,url:this.recipe_share_link};navigator.share(e)},addToShopping(){this.$bvModal.show(`shopping_${this.modal_id}`)},copyToNew:function(){let e=window.prompt(this.$t("copy_to_new"),this.$t("recipe_name")),t=new d.ApiApiFactory;t.retrieveRecipe(this.recipe.id).then((a=>{let i={...a.data,id:void 0,name:e};i.steps=i.steps.map((e=>({...e,id:void 0,ingredients:e.ingredients.map((e=>({...e,id:void 0})))}))),i.properties=i.properties.map((e=>({...e,id:void 0}))),t.createRecipe(i).then((e=>{p.StandardToasts.makeStandardToast(this,p.StandardToasts.SUCCESS_CREATE),window.open(this.resolveDjangoUrl("view_recipe",e.data.id))})).catch((e=>{p.StandardToasts.makeStandardToast(this,p.StandardToasts.FAIL_CREATE,e)}))}))}}},g=f,v=a(1001),b=(0,v.Z)(g,i,s,!1,null,null,null),y=b.exports},11840:function(e,t,a){"use strict";a.d(t,{default:function(){return c}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"rating"},[e.recipe.rating>0?t("span",{staticClass:"d-inline"},[e.pill?t("div",[t("b-badge",{staticClass:"mt-1 font-weight-normal",attrs:{pill:"",variant:"light"}},[e._l(Math.floor(e.recipe.rating),(function(e){return t("i",{key:e,staticClass:"fas fa-star fa-xs text-dark"})})),e.recipe.rating%1>0?t("i",{staticClass:"fas fa-star-half-alt fa-xs text-dark"}):e._e(),e._l(5-Math.ceil(e.recipe.rating),(function(e){return t("i",{key:e+10,staticClass:"far fa-star fa-xs text-dark"})}))],2)],1):t("div",[e._l(Math.floor(e.recipe.rating),(function(e){return t("i",{key:e,staticClass:"fas fa-star fa-xs text-primary"})})),e.recipe.rating%1>0?t("i",{staticClass:"fas fa-star-half-alt fa-xs text-primary"}):e._e(),e._l(5-Math.ceil(e.recipe.rating),(function(e){return t("i",{key:e+10,staticClass:"far fa-star fa-xs text-secondary"})}))],2)]):e._e()])},s=[],n={name:"RecipeRating",props:{recipe:Object,pill:{required:!1,type:Boolean,default:!1}}},o=n,r=a(1001),l=(0,r.Z)(o,i,s,!1,null,"b597b90a",null),c=l.exports},47331:function(e,t,a){"use strict";var i=a(9741);t.Z=i.Z},34322:function(e,t,a){"use strict";var i=a(46969);t.Z=i.Z},46700:function(e,t,a){var i={"./af":42786,"./af.js":42786,"./ar":30867,"./ar-dz":14130,"./ar-dz.js":14130,"./ar-kw":96135,"./ar-kw.js":96135,"./ar-ly":56440,"./ar-ly.js":56440,"./ar-ma":47702,"./ar-ma.js":47702,"./ar-ps":20315,"./ar-ps.js":20315,"./ar-sa":16040,"./ar-sa.js":16040,"./ar-tn":37100,"./ar-tn.js":37100,"./ar.js":30867,"./az":31083,"./az.js":31083,"./be":9808,"./be.js":9808,"./bg":68338,"./bg.js":68338,"./bm":67438,"./bm.js":67438,"./bn":8905,"./bn-bd":76225,"./bn-bd.js":76225,"./bn.js":8905,"./bo":11560,"./bo.js":11560,"./br":1278,"./br.js":1278,"./bs":80622,"./bs.js":80622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":50877,"./cv.js":50877,"./cy":47373,"./cy.js":47373,"./da":24780,"./da.js":24780,"./de":59740,"./de-at":60217,"./de-at.js":60217,"./de-ch":60894,"./de-ch.js":60894,"./de.js":59740,"./dv":5300,"./dv.js":5300,"./el":50837,"./el.js":50837,"./en-au":78348,"./en-au.js":78348,"./en-ca":77925,"./en-ca.js":77925,"./en-gb":22243,"./en-gb.js":22243,"./en-ie":46436,"./en-ie.js":46436,"./en-il":47207,"./en-il.js":47207,"./en-in":44175,"./en-in.js":44175,"./en-nz":76319,"./en-nz.js":76319,"./en-sg":31662,"./en-sg.js":31662,"./eo":92915,"./eo.js":92915,"./es":55655,"./es-do":55251,"./es-do.js":55251,"./es-mx":96112,"./es-mx.js":96112,"./es-us":71146,"./es-us.js":71146,"./es.js":55655,"./et":5603,"./et.js":5603,"./eu":77763,"./eu.js":77763,"./fa":76959,"./fa.js":76959,"./fi":11897,"./fi.js":11897,"./fil":42549,"./fil.js":42549,"./fo":94694,"./fo.js":94694,"./fr":94470,"./fr-ca":63049,"./fr-ca.js":63049,"./fr-ch":52330,"./fr-ch.js":52330,"./fr.js":94470,"./fy":5044,"./fy.js":5044,"./ga":29295,"./ga.js":29295,"./gd":2101,"./gd.js":2101,"./gl":38794,"./gl.js":38794,"./gom-deva":27884,"./gom-deva.js":27884,"./gom-latn":23168,"./gom-latn.js":23168,"./gu":95349,"./gu.js":95349,"./he":24206,"./he.js":24206,"./hi":30094,"./hi.js":30094,"./hr":30316,"./hr.js":30316,"./hu":22138,"./hu.js":22138,"./hy-am":11423,"./hy-am.js":11423,"./id":29218,"./id.js":29218,"./is":90135,"./is.js":90135,"./it":90626,"./it-ch":10150,"./it-ch.js":10150,"./it.js":90626,"./ja":39183,"./ja.js":39183,"./jv":24286,"./jv.js":24286,"./ka":12105,"./ka.js":12105,"./kk":47772,"./kk.js":47772,"./km":18758,"./km.js":18758,"./kn":79282,"./kn.js":79282,"./ko":33730,"./ko.js":33730,"./ku":1408,"./ku-kmr":90563,"./ku-kmr.js":90563,"./ku.js":1408,"./ky":33291,"./ky.js":33291,"./lb":36841,"./lb.js":36841,"./lo":55466,"./lo.js":55466,"./lt":57010,"./lt.js":57010,"./lv":37595,"./lv.js":37595,"./me":39861,"./me.js":39861,"./mi":35493,"./mi.js":35493,"./mk":95966,"./mk.js":95966,"./ml":87341,"./ml.js":87341,"./mn":5115,"./mn.js":5115,"./mr":10370,"./mr.js":10370,"./ms":9847,"./ms-my":41237,"./ms-my.js":41237,"./ms.js":9847,"./mt":72126,"./mt.js":72126,"./my":56165,"./my.js":56165,"./nb":64924,"./nb.js":64924,"./ne":16744,"./ne.js":16744,"./nl":93901,"./nl-be":59814,"./nl-be.js":59814,"./nl.js":93901,"./nn":83877,"./nn.js":83877,"./oc-lnc":92135,"./oc-lnc.js":92135,"./pa-in":15858,"./pa-in.js":15858,"./pl":64495,"./pl.js":64495,"./pt":89520,"./pt-br":57971,"./pt-br.js":57971,"./pt.js":89520,"./ro":96459,"./ro.js":96459,"./ru":21793,"./ru.js":21793,"./sd":40950,"./sd.js":40950,"./se":10490,"./se.js":10490,"./si":90124,"./si.js":90124,"./sk":64249,"./sk.js":64249,"./sl":14985,"./sl.js":14985,"./sq":51104,"./sq.js":51104,"./sr":49131,"./sr-cyrl":79915,"./sr-cyrl.js":79915,"./sr.js":49131,"./ss":85893,"./ss.js":85893,"./sv":98760,"./sv.js":98760,"./sw":91172,"./sw.js":91172,"./ta":27333,"./ta.js":27333,"./te":23110,"./te.js":23110,"./tet":52095,"./tet.js":52095,"./tg":27321,"./tg.js":27321,"./th":9041,"./th.js":9041,"./tk":19005,"./tk.js":19005,"./tl-ph":75768,"./tl-ph.js":75768,"./tlh":89444,"./tlh.js":89444,"./tr":72397,"./tr.js":72397,"./tzl":28254,"./tzl.js":28254,"./tzm":51106,"./tzm-latn":30699,"./tzm-latn.js":30699,"./tzm.js":51106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":67691,"./uk.js":67691,"./ur":13795,"./ur.js":13795,"./uz":6791,"./uz-latn":60588,"./uz-latn.js":60588,"./uz.js":6791,"./vi":65666,"./vi.js":65666,"./x-pseudo":14378,"./x-pseudo.js":14378,"./yo":75805,"./yo.js":75805,"./zh-cn":83839,"./zh-cn.js":83839,"./zh-hk":55726,"./zh-hk.js":55726,"./zh-mo":99807,"./zh-mo.js":99807,"./zh-tw":74152,"./zh-tw.js":74152};function s(e){var t=n(e);return a(t)}function n(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}s.keys=function(){return Object.keys(i)},s.resolve=n,e.exports=s,s.id=46700},9741:function(e,t,a){"use strict";a(57658);var i=a(70538),s=a(47907),n=a.n(s),o=a(49665);t.Z={name:"GenericMultiselect",components:{Multiselect:n()},mixins:[o.ApiMixin],data(){return{id:void 0,loading:!1,objects:[],selected_objects:void 0}},props:{placeholder:{type:String,default:void 0},model:{type:Object,default(){return{}}},label:{type:String,default:"name"},parent_variable:{type:String,default:void 0},limit:{type:Number,default:25},sticky_options:{type:Array,default(){return[]}},initial_selection:{type:Array,default(){return[]}},initial_single_selection:{type:Object,default:void 0},search_on_load:{type:Boolean,default:!0},multiple:{type:Boolean,default:!0},allow_create:{type:Boolean,default:!1},create_placeholder:{type:String,default:"You Forgot to Add a Tag Placeholder"},clear:{type:Number},disabled:{type:Boolean,default:!1}},watch:{initial_selection:function(e,t){this.selected_objects=e;let a=[],s={};s[this.label]=`..${this.$t("loading")}..`,this.selected_objects.forEach((e=>{"object"!==typeof e&&(this.selected_objects[this.selected_objects.indexOf(e)]={...s,id:e},a.push(e))})),a.forEach((e=>{this.genericAPI(this.model,this.Actions.FETCH,{id:e}).then((t=>{i["default"].set(this.selected_objects,this.selected_objects.map((e=>e.id)).indexOf(e),t.data)})).catch((t=>{this.selected_objects=this.selected_objects.filter((t=>t.id!==e))}))}))},initial_single_selection:function(e,t){if(this.selected_objects=e,"object"!==typeof this.selected_objects){let e={};e[this.label]=`..${this.$t("loading")}..`,this.selected_objects={...e,id:this.selected_objects},this.genericAPI(this.model,this.Actions.FETCH,{id:this.selected_objects}).then((e=>{this.selected_objects=e.data})).catch((e=>{this.selected_objects=void 0}))}},clear:function(e,t){this.multiple||!this.initial_single_selection?this.selected_objects=[]:this.selected_objects=void 0}},mounted(){this.id=Math.random(),this.search_on_load&&this.search(""),this.multiple||!this.initial_single_selection?this.selected_objects=this.initial_selection:this.selected_objects=this.initial_single_selection},computed:{lookupPlaceholder(){return this.placeholder||this.model.name||this.$t("Search")},nothingSelected(){return this.multiple||!this.initial_single_selection?0===this.selected_objects?.length&&0===this.initial_selection?.length:!this.selected_objects&&!this.initial_single_selection}},methods:{search:function(e){let t={page:1,pageSize:this.limit,query:e,limit:this.limit,options:{query:{simple:1}}};this.genericAPI(this.model,this.Actions.LIST,t).then((e=>{this.objects=this.sticky_options.concat(e.data?.results??e.data),this.nothingSelected&&this.objects.length>0&&this.objects.forEach((e=>{"default"in e&&e.default&&(this.multiple?this.selected_objects=[e]:this.selected_objects=e,this.selectionChanged())}))}))},selectOpened:function(){this.objects.length<1&&this.search("")},selectionChanged:function(){this.$emit("change",{var:this.parent_variable,val:this.selected_objects})},addNew(e){console.log("CREATEING NEW with -> ",e),this.genericAPI(this.model,this.Actions.CREATE,{name:e}).then((e=>{let t=e.data?.results??e.data;o.StandardToasts.makeStandardToast(this,o.StandardToasts.SUCCESS_CREATE),this.multiple?this.selected_objects.push(t):this.selected_objects=t,this.objects.push(t),this.selectionChanged()})).catch(((e,t)=>{o.StandardToasts.makeStandardToast(this,o.StandardToasts.FAIL_CREATE)}))}}}},46969:function(e,t){"use strict";t.Z={name:"LoadingSpinner",props:{recipe:Object,size:{type:Number,default:30}}}},72528:function(e,t,a){var i={"./ar.json":26726,"./bg.json":24901,"./ca.json":23886,"./cs.json":99789,"./da.json":85638,"./de.json":39929,"./el.json":7498,"./en.json":20790,"./es.json":18563,"./fi.json":2276,"./fr.json":844,"./he.json":8818,"./hu.json":64626,"./hy.json":36283,"./id.json":98446,"./is.json":92188,"./it.json":20504,"./lt.json":41560,"./nb_NO.json":95978,"./nl.json":13055,"./pl.json":75143,"./pt.json":69898,"./pt_BR.json":65321,"./ro.json":54691,"./ru.json":69672,"./sl.json":75329,"./sv.json":93244,"./tr.json":12021,"./uk.json":61754,"./zh_Hans.json":74709,"./zh_Hant.json":88698};function s(e){var t=n(e);return a(t)}function n(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}s.keys=function(){return Object.keys(i)},s.resolve=n,e.exports=s,s.id=72528},22868:function(){},14777:function(){},99830:function(){},70209:function(){},87414:function(){}},t={};function a(i){var s=t[i];if(void 0!==s)return s.exports;var n=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}a.m=e,function(){var e=[];a.O=function(t,i,s,n){if(!i){var o=1/0;for(d=0;d<e.length;d++){i=e[d][0],s=e[d][1],n=e[d][2];for(var r=!0,l=0;l<i.length;l++)(!1&n||o>=n)&&Object.keys(a.O).every((function(e){return a.O[e](i[l])}))?i.splice(l--,1):(r=!1,n<o&&(o=n));if(r){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[i,s,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,i){return a.f[i](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/"+e+".js"}}(),function(){a.miniCssF=function(e){return"css/"+e+".css"}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="tandoor:";a.l=function(i,s,n,o){if(e[i])e[i].push(s);else{var r,l;if(void 0!==n)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var p=c[d];if(p.getAttribute("src")==i||p.getAttribute("data-webpack")==t+n){r=p;break}}r||(l=!0,r=document.createElement("script"),r.charset="utf-8",r.timeout=120,a.nc&&r.setAttribute("nonce",a.nc),r.setAttribute("data-webpack",t+n),r.src=i),e[i]=[s];var u=function(t,a){r.onerror=r.onload=null,clearTimeout(_);var s=e[i];if(delete e[i],r.parentNode&&r.parentNode.removeChild(r),s&&s.forEach((function(e){return e(a)})),t)return t(a)},_=setTimeout(u.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=u.bind(null,r.onerror),r.onload=u.bind(null,r.onload),l&&document.head.appendChild(r)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){a.j=170}(),function(){a.p=""}(),function(){if("undefined"!==typeof document){var e=function(e,t,a,i,s){var n=document.createElement("link");n.rel="stylesheet",n.type="text/css";var o=function(a){if(n.onerror=n.onload=null,"load"===a.type)i();else{var o=a&&("load"===a.type?"missing":a.type),r=a&&a.target&&a.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=o,l.request=r,n.parentNode&&n.parentNode.removeChild(n),s(l)}};return n.onerror=n.onload=o,n.href=t,a?a.parentNode.insertBefore(n,a.nextSibling):document.head.appendChild(n),n},t=function(e,t){for(var a=document.getElementsByTagName("link"),i=0;i<a.length;i++){var s=a[i],n=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(n===e||n===t))return s}var o=document.getElementsByTagName("style");for(i=0;i<o.length;i++){s=o[i],n=s.getAttribute("data-href");if(n===e||n===t)return s}},i=function(i){return new Promise((function(s,n){var o=a.miniCssF(i),r=a.p+o;if(t(o,r))return s();e(i,r,null,s,n)}))},s={170:0,3470:0,1868:0,4493:0,1875:0,7362:0,3591:0,842:0,607:0,3448:0,479:0,1070:0,3933:0,4634:0,466:0,1956:0,2280:0};a.f.miniCss=function(e,t){var a={3470:1};s[e]?t.push(s[e]):0!==s[e]&&a[e]&&t.push(s[e]=i(e).then((function(){s[e]=0}),(function(t){throw delete s[e],t})))}}}(),function(){var e={170:0,3470:0,1868:0,4493:0,1875:0,7362:0,3591:0,842:0,607:0,3448:0,479:0,1070:0,3933:0,4634:0,466:0,1956:0,2280:0};a.f.j=function(t,i){var s=a.o(e,t)?e[t]:void 0;if(0!==s)if(s)i.push(s[2]);else{var n=new Promise((function(a,i){s=e[t]=[a,i]}));i.push(s[2]=n);var o=a.p+a.u(t),r=new Error,l=function(i){if(a.o(e,t)&&(s=e[t],0!==s&&(e[t]=void 0),s)){var n=i&&("load"===i.type?"missing":i.type),o=i&&i.target&&i.target.src;r.message="Loading chunk "+t+" failed.\n("+n+": "+o+")",r.name="ChunkLoadError",r.type=n,r.request=o,s[1](r)}};a.l(o,l,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,i){var s,n,o=i[0],r=i[1],l=i[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(s in r)a.o(r,s)&&(a.m[s]=r[s]);if(l)var d=l(a)}for(t&&t(i);c<o.length;c++)n=o[c],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(d)},i=self["webpackChunktandoor"]=self["webpackChunktandoor"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=a.O(void 0,[9380,486,4998],(function(){return a(9946)}));i=a.O(i)})();