"use strict";(self["webpackChunktandoor"]=self["webpackChunktandoor"]||[]).push([[4578,3470,1677,3240,7362,3591,607,479,1070,3933,4634],{76919:function(e,t,i){i.d(t,{s:function(){return a},x:function(){return s}});var a=function(){var e=this,t=e._self._c;return t("b-card",{directives:[{name:"hover",rawName:"v-hover"}],attrs:{"no-body":""}},[t("b-card-header",{staticClass:"p-4"},[t("h5",[e._v(" "+e._s(e.book_copy.name)+" "),t("span",{staticClass:"float-right text-primary",on:{click:e.editOrSave}},[t("i",{staticClass:"fa",class:{"fa-pen":!e.editing,"fa-save":e.editing},attrs:{"aria-hidden":"true"}})])]),e._l(e.book_copy.shared,(function(i){return t("b-badge",{key:i.id,staticClass:"font-weight-normal mr-1",attrs:{variant:"primary",pill:""}},[e._v(e._s(i.display_name))])}))],2),t("b-card-body",{staticClass:"p-4"},[e.editing?t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"inputName1"}},[e._v(e._s(e.$t("Name")))]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.book_copy.name,expression:"book_copy.name"}],staticClass:"form-control",attrs:{id:"inputName1",placeholder:"Name"},domProps:{value:e.book_copy.name},on:{input:function(t){t.target.composing||e.$set(e.book_copy,"name",t.target.value)}}})]):e._e(),e.editing?t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"inputDesc1"}},[e._v(e._s(e.$t("Description")))]),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.book_copy.description,expression:"book_copy.description"}],staticClass:"form-control",attrs:{id:"inputDesc1",rows:"3"},domProps:{value:e.book_copy.description},on:{input:function(t){t.target.composing||e.$set(e.book_copy,"description",t.target.value)}}})]):e._e(),e.editing?t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"inputDesc1"}},[e._v(e._s(e.$t("Share")))]),t("generic-multiselect",{staticStyle:{"flex-grow":"1","flex-shrink":"1","flex-basis":"0"},attrs:{parent_variable:"book.shared",initial_selection:e.book.shared,label:"display_name",model:e.Models.USER_NAME,placeholder:e.$t("Share"),limit:50},on:{change:function(t){e.book_copy.shared=t.val}}})],1):e._e(),e.editing?t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"inputDesc1"}},[e._v(e._s(e.$t("recipe_filter")))]),t("generic-multiselect",{staticStyle:{"flex-grow":"1","flex-shrink":"1","flex-basis":"0"},attrs:{parent_variable:"book.filter",initial_single_selection:e.book.filter,model:e.Models.CUSTOM_FILTER,multiple:!1,placeholder:e.$t("Custom Filter"),limit:50},on:{change:function(t){e.book_copy.filter=t.val}}}),t("small",{staticClass:"text-muted"},[e._v(e._s(e.$t("book_filter_help")))])],1):e._e(),e.editing?t("button",{staticClass:"btn btn-danger",on:{click:e.deleteBook}},[e._v(e._s(e.$t("Delete")))]):e._e(),e.editing?t("button",{staticClass:"btn btn-primary float-right",on:{click:e.editOrSave}},[e._v(e._s(e.$t("Save")))]):e._e(),e.editing?e._e():t("b-card-text",{staticStyle:{"text-overflow":"ellipsis"}},[e._v(" "+e._s(e.book_copy.description)+" ")])],1)],1)},s=[]},78046:function(e,t,i){i.d(t,{s:function(){return a},x:function(){return s}});var a=function(){var e=this,t=e._self._c;return t("div",{class:{bounceright:e.bounce_right,bounceleft:e.bounce_left}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col col-md-12 text-center pt-2 pb-4"},[t("b-pagination",{attrs:{pills:"","total-rows":e.page_count_pagination,"per-page":e.per_page_count,"first-text":"ðŸ“–",align:"fill"},on:{change:e.pageChange},model:{value:e.current_page,callback:function(t){e.current_page=t},expression:"current_page"}})],1)]),t("div",{directives:[{name:"touch",rawName:"v-touch:swipe.left",value:e.swipeLeft,expression:"swipeLeft",arg:"swipe",modifiers:{left:!0}},{name:"touch",rawName:"v-touch:swipe.right",value:e.swipeRight,expression:"swipeRight",arg:"swipe",modifiers:{right:!0}}],staticClass:"row"},[t("div",{staticClass:"col-md-1",staticStyle:{cursor:"pointer"},on:{click:e.swipeRight}}),t("div",{staticClass:"col-md-5"},[t("transition",{attrs:{name:"flip",mode:"out-in"}},[1===e.current_page?t("cookbook-edit-card",{attrs:{book:e.book},on:{editing:function(t){e.cookbook_editing=t},refresh:function(t){return e.$emit("refresh")},reload:function(t){return e.$emit("reload")}}}):e._e()],1),t("transition",{attrs:{name:"flip",mode:"out-in"}},[e.current_page>1?t("recipe-card",{key:e.display_recipes[0].recipe,attrs:{recipe:e.display_recipes[0].recipe_content}}):e._e()],1)],1),t("div",{staticClass:"col-md-5"},[t("transition",{attrs:{name:"flip",mode:"out-in"}},[1===e.current_page?t("cookbook-toc",{attrs:{recipes:e.recipes},on:{switchRecipe:function(t){return e.switchRecipe(t)}}}):e._e()],1),t("transition",{attrs:{name:"flip",mode:"out-in"}},[e.current_page>1&&2===e.display_recipes.length?t("recipe-card",{key:e.display_recipes[1].recipe,attrs:{recipe:e.display_recipes[1].recipe_content}}):e._e()],1)],1),t("div",{staticClass:"col-md-1",staticStyle:{cursor:"pointer"},on:{click:e.swipeLeft}})])])},s=[]},57793:function(e,t,i){i.d(t,{s:function(){return a},x:function(){return s}});var a=function(){var e=this,t=e._self._c;return t("b-card",{directives:[{name:"hover",rawName:"v-hover"}],attrs:{"no-body":""}},[t("b-card-header",{staticClass:"p-4"},[t("h5",[e._v(e._s(e.$t("Table_of_Contents")))])]),t("b-card-body",{staticClass:"p-4"},[t("ol",{staticClass:"mb-1",staticStyle:{"max-height":"60vh","overflow-y":"auto","-webkit-overflow-scrolling":"touch"}},e._l(e.recipes,(function(i,a){return t("li",{key:a,on:{click:function(t){return e.$emit("switchRecipe",a)}}},[t("a",{attrs:{href:"javascript:void(0)"}},[e._v(e._s(i.recipe_content.name)+" "),t("recipe-rating",{attrs:{recipe:i}})],1)])})),0),0===e.recipes.length?t("b-card-text",[e._v(" "+e._s(e.$t("Empty"))+" ")]):e._e()],1)],1)},s=[]},23398:function(e,t,i){i.r(t);var a=i(76919),s=i(56538),r=i(1001),n=(0,r.Z)(s.Z,a.s,a.x,!1,null,"4c724611",null);t["default"]=n.exports},56865:function(e,t,i){i.r(t);var a=i(78046),s=i(10104),r=(i(55805),i(1001)),n=(0,r.Z)(s.Z,a.s,a.x,!1,null,"397e86de",null);t["default"]=n.exports},98840:function(e,t,i){i.r(t);var a=i(57793),s=i(7576),r=i(1001),n=(0,r.Z)(s.Z,a.s,a.x,!1,null,"1a59c10c",null);t["default"]=n.exports},91515:function(e,t,i){i.r(t),i.d(t,{default:function(){return _}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ingredients",class:{"card border-primary no-border":e.header}},[t("div",{class:{"card-body":e.header,"p-0":e.header}},[e.header?t("div",{staticClass:"card-header"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-6"},[t("h4",{staticClass:"card-title"},[t("i",{staticClass:"fas fa-pepper-hot"}),e._v(" "+e._s(e.$t("Ingredients")))])])])]):e._e(),t("div",{staticClass:"card-body p-1 p-md-3"},[t("div",{staticClass:"row no-gutter"},[t("div",{staticClass:"col-12 m-0",class:{"p-0":!e.header}},[t("table",{staticClass:"table table-sm mb-0"},[e._l(e.steps,(function(i){return[i.show_as_header&&""!==i.name&&e.steps.length>1?t("tr",{key:i.id,staticClass:"ingredients__header-step-name"},[t("td",{attrs:{colspan:"5"}},[t("b",[e._v(e._s(i.name))])])]):e._e(),e._l(i.ingredients,(function(i){return[t("ingredient-component",{key:i.id,attrs:{ingredient:i,ingredient_factor:e.ingredient_factor,detailed:e.detailed},on:{"checked-state-changed":function(t){return e.$emit("checked-state-changed",t)}}})]}))]}))],2)])])])])])},s=[],r=i(70538),n=i(12120),o=(i(57024),i(40841)),c=i(49665);r["default"].use(n.XG7);var l={name:"IngredientCard",mixins:[c.ApiMixin],components:{IngredientComponent:o["default"]},props:{steps:{type:Array,default(){return[]}},recipe:{type:Number},ingredient_factor:{type:Number,default:1},servings:{type:Number,default:1},detailed:{type:Boolean,default:!0},header:{type:Boolean,default:!1},recipe_list:{type:Number,default:void 0}},data(){return{}},computed:{},watch:{},mounted(){},methods:{}},d=l,p=i(1001),u=(0,p.Z)(d,a,s,!1,null,null,null),_=u.exports},32825:function(e,t,i){i.r(t),i.d(t,{default:function(){return d}});var a=function(){var e=this,t=e._self._c;return e.recipe.keywords.length>0?t("div",{staticClass:"keywords"},e._l(e.recipe.keywords.slice(0,e.keyword_splice).filter((e=>e.show||void 0===e.show)),(function(i){return t("span",{key:i.id,staticClass:"keywords__item pl-1",class:e.keywordClass(i)},[e.enable_keyword_links?[t("a",{attrs:{href:`${e.resolveDjangoUrl("view_search")}?keyword=${i.id}`}},[t("b-badge",{staticClass:"font-weight-normal",attrs:{pill:"",variant:"light"}},[e._v(e._s(i.label))])],1)]:[t("b-badge",{staticClass:"font-weight-normal",attrs:{pill:"",variant:"light"}},[e._v(e._s(i.label))])]],2)})),0):e._e()},s=[],r=i(49665),n={name:"KeywordsComponent",mixins:[r.ResolveUrlMixin,r.EscapeCSSMixin],props:{recipe:Object,limit:Number,enable_keyword_links:{type:Boolean,default:!0}},computed:{keyword_splice:function(){return this.limit?this.limit:this.recipe.keywords.length}},methods:{keywordClass:function(e){return this.escapeCSS("_keywordname-"+e.label)}}},o=n,c=i(1001),l=(0,c.Z)(o,a,s,!1,null,null,null),d=l.exports},92077:function(e,t,i){i.r(t),i.d(t,{default:function(){return p}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"last-cooked"},[void 0!==e.recipe.last_cooked&&null!==e.recipe.last_cooked?t("span",{staticClass:"pl-1"},[t("b-badge",{staticClass:"font-weight-normal",attrs:{pill:"",variant:"primary"}},[t("i",{staticClass:"fas fa-utensils"}),e._v(" "+e._s(e.formatDate(e.recipe.last_cooked)))])],1):e._e()])},s=[],r=i(30381),n=i.n(r),o={name:"LastCooked",props:{recipe:Object},methods:{formatDate:function(e){return n().locale(window.navigator.language),n()(e).format("L")}}},c=o,l=i(1001),d=(0,l.Z)(c,a,s,!1,null,"5a23d523",null),p=d.exports},13470:function(e,t,i){i.r(t),i.d(t,{default:function(){return v}});var a=function(){var e=this,t=e._self._c;return t("div",[e.recipe&&e.recipe.loading?[t("b-card",{directives:[{name:"hover",rawName:"v-hover"}],staticStyle:{height:"100%"},attrs:{"no-body":""}},[t("b-card-img-lazy",{staticStyle:{height:"15vh","object-fit":"cover"},attrs:{src:e.placeholder_image,alt:e.$t("Recipe_Image"),top:""}}),t("b-card-body",{staticClass:"p-4"},[t("h6",[t("b-skeleton",{attrs:{width:"95%"}})],1),t("b-card-text",[t("b-skeleton",{attrs:{height:"12px",width:"65%"}}),t("b-skeleton",{attrs:{height:"12px",width:"45%"}}),t("b-skeleton",{attrs:{height:"12px",width:"55%"}})],1)],1)],1)]:[e.recipe?t("b-card",{directives:[{name:"hover",rawName:"v-hover"}],staticStyle:{height:"100%"},attrs:{"no-body":""}},[t("a",{attrs:{href:e.recipe_link}},[t("div",{staticClass:"content"},[null!==e.recipe.description&&""!==e.recipe.description?t("div",{staticClass:"content-overlay"}):e._e(),t("b-card-img-lazy",{staticStyle:{height:"15vh","object-fit":"cover"},attrs:{src:e.recipe_image,alt:e.$t("Recipe_Image"),top:""}}),t("div",{staticClass:"content-details"},[t("p",{staticClass:"content-text"},[e._v(" "+e._s(e.recipe.description)+" ")])]),t("b-row",{staticClass:"card-img-overlay pt-1"},[t("b-col",{attrs:{cols:"6"}},[0!==e.recipe.working_time||0!==e.recipe.waiting_time?t("div",[0!==e.recipe.working_time&&void 0!==e.recipe.working_time?t("b-badge",{staticClass:"mt-1 font-weight-normal",attrs:{pill:"",variant:"light"}},[t("i",{staticClass:"fa fa-clock"}),e._v(" "+e._s(e.working_time)+" ")]):e._e(),0!==e.recipe.waiting_time&&void 0!==e.recipe.waiting_time?t("b-badge",{staticClass:"mt-1 font-weight-normal",attrs:{pill:"",variant:"secondary"}},[t("i",{staticClass:"fa fa-pause"}),e._v(" "+e._s(e.waiting_time)+" ")]):e._e()],1):e._e()]),t("b-col",{staticClass:"text-right",attrs:{cols:"6"}},[t("recipe-rating",{attrs:{recipe:e.recipe,pill:!0}})],1)],1)],1)]),t("b-card-body",{staticClass:"p-2 pl-3 pr-3"},[t("div",{staticClass:"d-flex flex-row"},[t("div",{staticClass:"flex-grow-1"},[t("a",{staticClass:"text-body font-weight-bold two-row-text",attrs:{href:e.recipe_link}},[null!==e.recipe?[e._v(e._s(e.recipe.name))]:[e._v(e._s(e.meal_plan.title))]],2)]),t("div",{staticClass:"justify-content-end"},[null!==e.recipe&&e.show_context_menu?t("recipe-context-menu",{staticClass:"justify-content-end float-right align-items-end pr-0",attrs:{recipe:e.recipe,disabled_options:e.context_disabled_options}}):e._e()],1)]),t("b-card-text",{staticStyle:{"text-overflow":"ellipsis"}},[null!==e.recipe?[e.show_detail?t("div",[e._v(" "+e._s(e.recipe.description)+" ")]):e._e(),t("p",{staticClass:"mt-1 mb-1"},[t("last-cooked",{attrs:{recipe:e.recipe}}),t("keywords-component",{staticStyle:{"margin-top":"4px",position:"relative","z-index":"3"},attrs:{recipe:e.recipe,limit:3,enable_keyword_links:e.enable_keyword_links}})],1),t("transition",{attrs:{name:"fade",mode:"in-out"}},[e.show_detail?t("div",{staticClass:"row mt-3"},[t("div",{staticClass:"col-md-12"},[t("h6",{staticClass:"card-title"},[t("i",{staticClass:"fas fa-pepper-hot"}),e._v(" "+e._s(e.$t("Ingredients")))]),t("ingredients-card",{attrs:{steps:e.recipe.steps,header:!1,detailed:!1,servings:e.recipe.servings}})],1)]):e._e()]),void 0===e.recipe.internal||e.recipe.internal?e._e():t("b-badge",{attrs:{pill:"",variant:"info"}},[e._v(e._s(e.$t("External")))])]:e._e()],2)],1)],1):e._e()]],2)},s=[],r=i(91515),n=i(32825),o=i(92077),c=i(21956),l=i(11840),d=i(49665),p=i(30381),u=i.n(p),_=i(70538);_["default"].prototype.moment=u();var f={name:"RecipeCard",mixins:[d.ResolveUrlMixin],components:{LastCooked:o["default"],KeywordsComponent:n["default"],"recipe-context-menu":c["default"],IngredientsCard:r["default"],RecipeRating:l["default"]},props:{recipe:Object,meal_plan:Object,footer_text:String,footer_icon:String,detailed:{type:Boolean,default:!0},show_context_menu:{type:Boolean,default:!0},context_disabled_options:Object,open_recipe_on_click:{type:Boolean,default:!0},enable_keyword_links:{type:Boolean,default:!0}},data(){return{placeholder_image:window.IMAGE_PLACEHOLDER}},mounted(){},computed:{show_detail:function(){return void 0!==this.recipe?.steps&&this.detailed},recipe_image:function(){return null==this.recipe||null===this.recipe.image?window.IMAGE_PLACEHOLDER:this.recipe.image},working_time:function(){return(0,d.calculateHourMinuteSplit)(this.recipe.working_time)},waiting_time:function(){return(0,d.calculateHourMinuteSplit)(this.recipe.waiting_time)},recipe_link:function(){return this.open_recipe_on_click?void 0!==this.recipe.id?(0,d.resolveDjangoUrl)("view_recipe",this.recipe.id):null:"#"}},methods:{},directives:{hover:{inserted:function(e){e.addEventListener("mouseenter",(()=>{e.classList.add("shadow")})),e.addEventListener("mouseleave",(()=>{e.classList.remove("shadow")}))}}}},h=f,m=i(1001),g=(0,m.Z)(h,a,s,!1,null,"8dba8f0c",null),v=g.exports},11840:function(e,t,i){i.r(t),i.d(t,{default:function(){return l}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"rating"},[e.recipe.rating>0?t("span",{staticClass:"d-inline"},[e.pill?t("div",[t("b-badge",{staticClass:"mt-1 font-weight-normal",attrs:{pill:"",variant:"light"}},[e._l(Math.floor(e.recipe.rating),(function(e){return t("i",{key:e,staticClass:"fas fa-star fa-xs text-dark"})})),e.recipe.rating%1>0?t("i",{staticClass:"fas fa-star-half-alt fa-xs text-dark"}):e._e(),e._l(5-Math.ceil(e.recipe.rating),(function(e){return t("i",{key:e+10,staticClass:"far fa-star fa-xs text-dark"})}))],2)],1):t("div",[e._l(Math.floor(e.recipe.rating),(function(e){return t("i",{key:e,staticClass:"fas fa-star fa-xs text-primary"})})),e.recipe.rating%1>0?t("i",{staticClass:"fas fa-star-half-alt fa-xs text-primary"}):e._e(),e._l(5-Math.ceil(e.recipe.rating),(function(e){return t("i",{key:e+10,staticClass:"far fa-star fa-xs text-secondary"})}))],2)]):e._e()])},s=[],r={name:"RecipeRating",props:{recipe:Object,pill:{required:!1,type:Boolean,default:!1}}},n=r,o=i(1001),c=(0,o.Z)(n,a,s,!1,null,"b597b90a",null),l=c.exports},55805:function(e,t,i){i(55561)},56538:function(e,t,i){var a=i(34866);t.Z=a.Z},10104:function(e,t,i){var a=i(54296);t.Z=a.Z},7576:function(e,t,i){var a=i(49591);t.Z=a.Z},55561:function(){},34866:function(e,t,i){var a=i(6955),s=i(49665),r=i(26678);t.Z={name:"CookbookEditCard",components:{GenericMultiselect:r["default"]},mixins:[s.ApiMixin],props:{book:Object},data(){return{editing:!1,book_copy:{},users:[]}},mounted(){this.book_copy=this.book},directives:{hover:{inserted:function(e){e.addEventListener("mouseenter",(()=>{e.classList.add("shadow")})),e.addEventListener("mouseleave",(()=>{e.classList.remove("shadow")}))}}},methods:{editOrSave:function(){this.editing?(this.editing=!1,this.saveData(),this.$emit("editing",!1),this.$emit("reload")):(this.editing=!0,this.$emit("editing",!0))},saveData:function(){let e=new a.ApiApiFactory;e.updateRecipeBook(this.book_copy.id,this.book_copy).then((e=>{s.StandardToasts.makeStandardToast(this,s.StandardToasts.SUCCESS_UPDATE)})).catch((e=>{s.StandardToasts.makeStandardToast(this,s.StandardToasts.FAIL_UPDATE,e)}))},refreshData:function(){let e=new a.ApiApiFactory;e.listUsers().then((e=>{this.users=e.data}))},deleteBook:function(){if(confirm(this.$t("delete_confirmation",{source:this.book.name}))){let e=new a.ApiApiFactory;e.destroyRecipeBook(this.book.id).then((e=>{this.$emit("refresh"),s.StandardToasts.makeStandardToast(this,s.StandardToasts.SUCCESS_DELETE)})).catch((e=>{s.StandardToasts.makeStandardToast(this,s.StandardToasts.FAIL_DELETE,e)}))}}}}},54296:function(e,t,i){var a=i(13470),s=i(23398),r=i(98840),n=i(78627),o=i.n(n),c=i(70538),l=i(6955);c["default"].use(o()),t.Z={name:"CookbookSlider.vue",components:{CookbookToc:r["default"],CookbookEditCard:s["default"],RecipeCard:a["default"]},props:{recipes:Array,book:Object},computed:{page_count_pagination:function(){return this.recipes.length+2},page_count:function(){return Math.ceil(this.page_count_pagination/this.per_page_count)},display_recipes:function(){return this.recipes.slice(2*(this.current_page-1-1),2*(this.current_page-1))}},mounted(){},data(){return{current_page:1,per_page_count:2,bounce_left:!1,bounce_right:!1,cookbook_editing:!1}},methods:{pageChange:function(e){this.current_page=e,this.loadRecipeDetails(e)},loadRecipeDetails:function(e){this.display_recipes.forEach(((e,t)=>{if(void 0===e.recipe_content.steps){let t=new l.ApiApiFactory;t.retrieveRecipe(e.recipe).then((t=>{let i=Object.assign({},e);i.recipe_content=t.data,this.recipes.forEach(((e,t)=>{e.recipe===i.recipe&&this.$set(this.recipes,t,i)}))}))}}))},swipeLeft:function(){this.cookbook_editing||(this.current_page<this.page_count?this.pageChange(this.current_page+1):(this.bounce_left=!0,setTimeout((()=>this.bounce_left=!1),500)))},swipeRight:function(){this.cookbook_editing||(this.current_page>1?this.pageChange(this.current_page-1):(this.bounce_right=!0,setTimeout((()=>this.bounce_right=!1),500)))},switchRecipe:function(e){this.pageChange(Math.ceil((e+1)/this.per_page_count)+1)}},directives:{hover:{inserted:function(e){e.addEventListener("mouseenter",(()=>{e.classList.add("shadow")})),e.addEventListener("mouseleave",(()=>{e.classList.remove("shadow")}))}}}}},49591:function(e,t,i){var a=i(11840);t.Z={name:"CookbookToc",components:{RecipeRating:a["default"]},props:{recipes:Array},directives:{hover:{inserted:function(e){e.addEventListener("mouseenter",(()=>{e.classList.add("shadow")})),e.addEventListener("mouseleave",(()=>{e.classList.remove("shadow")}))}}}}}}]);