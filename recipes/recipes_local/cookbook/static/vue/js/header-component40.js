"use strict";(self["webpackChunktandoor"]=self["webpackChunktandoor"]||[]).push([[1677],{76919:function(t,e,a){a.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this,e=t._self._c;return e("b-card",{directives:[{name:"hover",rawName:"v-hover"}],attrs:{"no-body":""}},[e("b-card-header",{staticClass:"p-4"},[e("h5",[t._v(" "+t._s(t.book_copy.name)+" "),e("span",{staticClass:"float-right text-primary",on:{click:t.editOrSave}},[e("i",{staticClass:"fa",class:{"fa-pen":!t.editing,"fa-save":t.editing},attrs:{"aria-hidden":"true"}})])]),t._l(t.book_copy.shared,(function(a){return e("b-badge",{key:a.id,staticClass:"font-weight-normal mr-1",attrs:{variant:"primary",pill:""}},[t._v(t._s(a.display_name))])}))],2),e("b-card-body",{staticClass:"p-4"},[t.editing?e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"inputName1"}},[t._v(t._s(t.$t("Name")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.book_copy.name,expression:"book_copy.name"}],staticClass:"form-control",attrs:{id:"inputName1",placeholder:"Name"},domProps:{value:t.book_copy.name},on:{input:function(e){e.target.composing||t.$set(t.book_copy,"name",e.target.value)}}})]):t._e(),t.editing?e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"inputDesc1"}},[t._v(t._s(t.$t("Description")))]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.book_copy.description,expression:"book_copy.description"}],staticClass:"form-control",attrs:{id:"inputDesc1",rows:"3"},domProps:{value:t.book_copy.description},on:{input:function(e){e.target.composing||t.$set(t.book_copy,"description",e.target.value)}}})]):t._e(),t.editing?e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"inputDesc1"}},[t._v(t._s(t.$t("Share")))]),e("generic-multiselect",{staticStyle:{"flex-grow":"1","flex-shrink":"1","flex-basis":"0"},attrs:{parent_variable:"book.shared",initial_selection:t.book.shared,label:"display_name",model:t.Models.USER_NAME,placeholder:t.$t("Share"),limit:50},on:{change:function(e){t.book_copy.shared=e.val}}})],1):t._e(),t.editing?e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"inputDesc1"}},[t._v(t._s(t.$t("recipe_filter")))]),e("generic-multiselect",{staticStyle:{"flex-grow":"1","flex-shrink":"1","flex-basis":"0"},attrs:{parent_variable:"book.filter",initial_single_selection:t.book.filter,model:t.Models.CUSTOM_FILTER,multiple:!1,placeholder:t.$t("Custom Filter"),limit:50},on:{change:function(e){t.book_copy.filter=e.val}}}),e("small",{staticClass:"text-muted"},[t._v(t._s(t.$t("book_filter_help")))])],1):t._e(),t.editing?e("button",{staticClass:"btn btn-danger",on:{click:t.deleteBook}},[t._v(t._s(t.$t("Delete")))]):t._e(),t.editing?e("button",{staticClass:"btn btn-primary float-right",on:{click:t.editOrSave}},[t._v(t._s(t.$t("Save")))]):t._e(),t.editing?t._e():e("b-card-text",{staticStyle:{"text-overflow":"ellipsis"}},[t._v(" "+t._s(t.book_copy.description)+" ")])],1)],1)},o=[]},23398:function(t,e,a){a.r(e);var i=a(76919),o=a(56538),s=a(1001),n=(0,s.Z)(o.Z,i.s,i.x,!1,null,"4c724611",null);e["default"]=n.exports},56538:function(t,e,a){var i=a(34866);e.Z=i.Z},34866:function(t,e,a){var i=a(6955),o=a(49665),s=a(26678);e.Z={name:"CookbookEditCard",components:{GenericMultiselect:s["default"]},mixins:[o.ApiMixin],props:{book:Object},data(){return{editing:!1,book_copy:{},users:[]}},mounted(){this.book_copy=this.book},directives:{hover:{inserted:function(t){t.addEventListener("mouseenter",(()=>{t.classList.add("shadow")})),t.addEventListener("mouseleave",(()=>{t.classList.remove("shadow")}))}}},methods:{editOrSave:function(){this.editing?(this.editing=!1,this.saveData(),this.$emit("editing",!1),this.$emit("reload")):(this.editing=!0,this.$emit("editing",!0))},saveData:function(){let t=new i.ApiApiFactory;t.updateRecipeBook(this.book_copy.id,this.book_copy).then((t=>{o.StandardToasts.makeStandardToast(this,o.StandardToasts.SUCCESS_UPDATE)})).catch((t=>{o.StandardToasts.makeStandardToast(this,o.StandardToasts.FAIL_UPDATE,t)}))},refreshData:function(){let t=new i.ApiApiFactory;t.listUsers().then((t=>{this.users=t.data}))},deleteBook:function(){if(confirm(this.$t("delete_confirmation",{source:this.book.name}))){let t=new i.ApiApiFactory;t.destroyRecipeBook(this.book.id).then((t=>{this.$emit("refresh"),o.StandardToasts.makeStandardToast(this,o.StandardToasts.SUCCESS_DELETE)})).catch((t=>{o.StandardToasts.makeStandardToast(this,o.StandardToasts.FAIL_DELETE,t)}))}}}}}}]);